<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.TokenProvenance</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Data.List.Properties.html" class="Module">Data.List.Properties</a>
<a id="34" class="Keyword">open</a> <a id="39" class="Keyword">import</a> <a id="46" href="Data.Nat.Properties.html" class="Module">Data.Nat.Properties</a>

<a id="67" class="Keyword">open</a> <a id="72" class="Keyword">import</a> <a id="79" href="Prelude.Init.html" class="Module">Prelude.Init</a> <a id="92" class="Keyword">renaming</a> <a id="101" class="Symbol">(</a><a id="102" href="Data.List.Base.html#4217" class="Function">sum</a> <a id="106" class="Symbol">to</a> <a id="Base.sum"></a><a id="109" href="UTxO.TokenProvenance.html#109" class="Function">∑ℕ</a><a id="111" class="Symbol">)</a>
<a id="113" class="Keyword">open</a> <a id="118" href="Prelude.Init.html#3752" class="Module">L.NE</a> <a id="123" class="Keyword">using</a> <a id="129" class="Symbol">(</a><a id="130" href="Data.List.NonEmpty.html#1380" class="Field">head</a><a id="134" class="Symbol">;</a> <a id="136" href="Data.List.NonEmpty.html#5129" class="Function">last</a><a id="140" class="Symbol">)</a>
<a id="142" class="Keyword">open</a> <a id="147" class="Keyword">import</a> <a id="154" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="170" class="Keyword">open</a> <a id="175" class="Keyword">import</a> <a id="182" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="196" class="Keyword">open</a> <a id="201" class="Keyword">import</a> <a id="208" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="220" class="Keyword">open</a> <a id="225" class="Keyword">import</a> <a id="232" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>

<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="UTxO.Hashing.html" class="Module">UTxO.Hashing</a>
<a id="276" class="Keyword">open</a> <a id="281" class="Keyword">import</a> <a id="288" href="UTxO.Value.html" class="Module">UTxO.Value</a>
<a id="299" class="Keyword">open</a> <a id="304" class="Keyword">import</a> <a id="311" href="UTxO.Types.html" class="Module">UTxO.Types</a> <a id="322" class="Keyword">hiding</a> <a id="329" class="Symbol">(</a><a id="330" href="UTxO.Types.html#751" class="InductiveConstructor">I</a><a id="331" class="Symbol">)</a>
<a id="333" class="Keyword">open</a> <a id="338" class="Keyword">import</a> <a id="345" href="UTxO.TxUtilities.html" class="Module">UTxO.TxUtilities</a>
<a id="362" class="Keyword">open</a> <a id="367" class="Keyword">import</a> <a id="374" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>


<a id="390" class="Keyword">module</a> <a id="397" href="UTxO.TokenProvenance.html" class="Module">UTxO.TokenProvenance</a> <a id="418" class="Symbol">(</a><a id="419" href="UTxO.TokenProvenance.html#419" class="Bound">nft</a> <a id="423" class="Symbol">:</a> <a id="425" href="UTxO.Value.html#364" class="Function">TokenClass</a><a id="435" class="Symbol">)</a> <a id="437" class="Keyword">where</a>

<a id="444" class="Keyword">open</a> <a id="449" href="UTxO.Value.html#5762" class="Module">FocusTokenClass</a> <a id="465" href="UTxO.TokenProvenance.html#419" class="Bound">nft</a>

<a id="470" class="Keyword">private</a>
  <a id="480" class="Keyword">variable</a>
    <a id="493" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a>  <a id="496" class="Symbol">:</a> <a id="498" href="Data.Product.html#1369" class="Function">∃</a> <a id="500" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a>
    <a id="516" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="519" class="Symbol">:</a> <a id="521" href="UTxO.Types.html#7388" class="Record">Tx</a>
    <a id="528" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>  <a id="531" class="Symbol">:</a> <a id="533" href="UTxO.Value.html#344" class="Function">Quantity</a>

<a id="543" class="Comment">-- Definitions.</a>

<a id="_↝⟦_⟧_"></a><a id="560" href="UTxO.TokenProvenance.html#560" class="Function Operator">_↝⟦_⟧_</a> <a id="567" class="Symbol">:</a> <a id="569" href="UTxO.Types.html#7388" class="Record">Tx</a> <a id="572" class="Symbol">→</a> <a id="574" href="UTxO.Value.html#344" class="Function">Quantity</a> <a id="583" class="Symbol">→</a> <a id="585" href="UTxO.Types.html#7388" class="Record">Tx</a> <a id="588" class="Symbol">→</a> <a id="590" class="PrimitiveType">Set</a>
<a id="594" href="UTxO.TokenProvenance.html#594" class="Bound">tx</a> <a id="597" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="600" href="UTxO.TokenProvenance.html#600" class="Bound">n</a> <a id="602" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="604" href="UTxO.TokenProvenance.html#604" class="Bound">tx′</a> <a id="608" class="Symbol">=</a> <a id="610" href="Data.Product.html#916" class="Function">Σ[</a> <a id="613" href="UTxO.TokenProvenance.html#613" class="Bound">or∈</a> <a id="617" href="Data.Product.html#916" class="Function">∈</a> <a id="619" href="Data.List.Relation.Unary.Any.html#1111" class="Datatype">Any</a> <a id="623" class="Symbol">((</a><a id="625" href="UTxO.TokenProvenance.html#594" class="Bound">tx</a> <a id="628" href="UTxO.Hashing.Types.html#1169" class="Function Operator">♯ₜₓ</a> <a id="632" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡_</a><a id="634" class="Symbol">)</a> <a id="636" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="638" href="UTxO.Types.html#4089" class="Field">id</a><a id="640" class="Symbol">)</a> <a id="642" class="Symbol">(</a><a id="643" href="UTxO.Types.html#7844" class="Function">outputRefs</a> <a id="654" href="UTxO.TokenProvenance.html#604" class="Bound">tx′</a><a id="657" class="Symbol">)</a> <a id="659" href="Data.Product.html#916" class="Function">]</a>
                  <a id="679" href="Data.Product.html#1788" class="Function">∃[</a> <a id="682" href="UTxO.TokenProvenance.html#682" class="Bound">o</a> <a id="684" href="Data.Product.html#1788" class="Function">]</a> <a id="686" class="Symbol">(</a> <a id="688" class="Symbol">((</a><a id="690" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="698" href="UTxO.TokenProvenance.html#594" class="Bound">tx</a> <a id="701" href="Prelude.Lists.html#1212" class="Function Operator">⁉</a> <a id="703" href="UTxO.Types.html#4146" class="Field">index</a> <a id="709" class="Symbol">(</a><a id="710" href="Data.List.Relation.Unary.Any.html#2026" class="Function">L.Any.lookup</a> <a id="723" href="UTxO.TokenProvenance.html#613" class="Bound">or∈</a><a id="726" class="Symbol">))</a> <a id="729" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="731" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="736" href="UTxO.TokenProvenance.html#682" class="Bound">o</a><a id="737" class="Symbol">)</a>
                         <a id="764" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="766" class="Symbol">(</a><a id="767" href="UTxO.Types.html#4728" class="Field">value</a> <a id="773" href="UTxO.TokenProvenance.html#682" class="Bound">o</a> <a id="775" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="777" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="779" href="UTxO.TokenProvenance.html#600" class="Bound">n</a><a id="780" class="Symbol">)</a> <a id="782" class="Symbol">)</a>

<a id="785" class="Keyword">data</a> <a id="X"></a><a id="790" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="792" class="Symbol">(</a><a id="793" href="UTxO.TokenProvenance.html#793" class="Bound">n</a> <a id="795" class="Symbol">:</a> <a id="797" href="UTxO.Value.html#344" class="Function">Quantity</a><a id="805" class="Symbol">)</a> <a id="807" class="Symbol">:</a> <a id="809" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="815" href="UTxO.Types.html#7388" class="Record">Tx</a> <a id="818" class="Symbol">→</a> <a id="820" class="PrimitiveType">Set</a> <a id="824" class="Keyword">where</a>
  <a id="X.root"></a><a id="832" href="UTxO.TokenProvenance.html#832" class="InductiveConstructor">root</a> <a id="837" class="Symbol">:</a>

      <a id="846" class="Symbol">(</a><a id="847" href="UTxO.TokenProvenance.html#847" class="Bound">tx</a> <a id="850" class="Symbol">:</a> <a id="852" href="UTxO.Types.html#7388" class="Record">Tx</a><a id="854" class="Symbol">)</a>
    <a id="860" class="Symbol">→</a> <a id="862" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="868" href="UTxO.TokenProvenance.html#847" class="Bound">tx</a> <a id="871" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="873" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="875" href="UTxO.TokenProvenance.html#793" class="Bound">n</a>
      <a id="883" class="Comment">---------------</a>
    <a id="903" class="Symbol">→</a> <a id="905" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="907" href="UTxO.TokenProvenance.html#793" class="Bound">n</a> <a id="909" class="Symbol">(</a><a id="910" href="UTxO.TokenProvenance.html#847" class="Bound">tx</a> <a id="913" href="Data.List.NonEmpty.html#1364" class="InductiveConstructor Operator">∷</a> <a id="915" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="917" class="Symbol">)</a>

  <a id="X.cons"></a><a id="922" href="UTxO.TokenProvenance.html#922" class="InductiveConstructor">cons</a> <a id="927" class="Symbol">:</a> <a id="929" class="Symbol">∀</a> <a id="931" class="Symbol">{</a><a id="932" href="UTxO.TokenProvenance.html#932" class="Bound">txs</a> <a id="936" href="UTxO.TokenProvenance.html#936" class="Bound">tx</a><a id="938" class="Symbol">}</a>

    <a id="945" class="Symbol">→</a> <a id="947" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="949" href="UTxO.TokenProvenance.html#793" class="Bound">n</a> <a id="951" href="UTxO.TokenProvenance.html#932" class="Bound">txs</a>
    <a id="959" class="Symbol">→</a> <a id="961" href="Data.List.NonEmpty.html#1380" class="Field">head</a> <a id="966" href="UTxO.TokenProvenance.html#932" class="Bound">txs</a> <a id="970" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="973" href="UTxO.TokenProvenance.html#793" class="Bound">n</a> <a id="975" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="977" href="UTxO.TokenProvenance.html#936" class="Bound">tx</a>
      <a id="986" class="Comment">-------------------</a>
    <a id="1010" class="Symbol">→</a> <a id="1012" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="1014" href="UTxO.TokenProvenance.html#793" class="Bound">n</a> <a id="1016" class="Symbol">(</a><a id="1017" href="UTxO.TokenProvenance.html#936" class="Bound">tx</a> <a id="1020" href="Data.List.NonEmpty.html#1556" class="Function Operator">∷⁺</a> <a id="1023" href="UTxO.TokenProvenance.html#932" class="Bound">txs</a><a id="1026" class="Symbol">)</a>

<a id="weakenX"></a><a id="1029" href="UTxO.TokenProvenance.html#1029" class="Function">weakenX</a> <a id="1037" class="Symbol">:</a> <a id="1039" class="Symbol">∀</a> <a id="1041" class="Symbol">{</a><a id="1042" href="UTxO.TokenProvenance.html#1042" class="Bound">n</a> <a id="1044" href="UTxO.TokenProvenance.html#1044" class="Bound">n′</a> <a id="1047" href="UTxO.TokenProvenance.html#1047" class="Bound">txs</a><a id="1050" class="Symbol">}</a> <a id="1052" class="Symbol">→</a> <a id="1054" href="UTxO.TokenProvenance.html#1044" class="Bound">n′</a> <a id="1057" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="1059" href="UTxO.TokenProvenance.html#1042" class="Bound">n</a> <a id="1061" class="Symbol">→</a> <a id="1063" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="1065" href="UTxO.TokenProvenance.html#1042" class="Bound">n</a> <a id="1067" href="UTxO.TokenProvenance.html#1047" class="Bound">txs</a> <a id="1071" class="Symbol">→</a> <a id="1073" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="1075" href="UTxO.TokenProvenance.html#1044" class="Bound">n′</a> <a id="1078" href="UTxO.TokenProvenance.html#1047" class="Bound">txs</a>
<a id="1082" href="UTxO.TokenProvenance.html#1029" class="Function">weakenX</a> <a id="1090" href="UTxO.TokenProvenance.html#1090" class="Bound">n′&lt;</a> <a id="1094" class="Symbol">(</a><a id="1095" href="UTxO.TokenProvenance.html#832" class="InductiveConstructor">root</a> <a id="1100" href="UTxO.TokenProvenance.html#1100" class="Bound">tx</a> <a id="1103" href="UTxO.TokenProvenance.html#1103" class="Bound">n&lt;</a><a id="1105" class="Symbol">)</a>                <a id="1122" class="Symbol">=</a> <a id="1124" href="UTxO.TokenProvenance.html#832" class="InductiveConstructor">root</a> <a id="1129" href="UTxO.TokenProvenance.html#1100" class="Bound">tx</a> <a id="1132" class="Symbol">(</a><a id="1133" href="Data.Nat.Properties.html#3908" class="Function">≤-trans</a> <a id="1141" href="UTxO.TokenProvenance.html#1090" class="Bound">n′&lt;</a> <a id="1145" href="UTxO.TokenProvenance.html#1103" class="Bound">n&lt;</a><a id="1147" class="Symbol">)</a>
<a id="1149" href="UTxO.TokenProvenance.html#1029" class="Function">weakenX</a> <a id="1157" href="UTxO.TokenProvenance.html#1157" class="Bound">n′&lt;</a> <a id="1161" class="Symbol">(</a><a id="1162" href="UTxO.TokenProvenance.html#922" class="InductiveConstructor">cons</a> <a id="1167" href="UTxO.TokenProvenance.html#1167" class="Bound">x</a> <a id="1169" class="Symbol">(</a><a id="1170" href="UTxO.TokenProvenance.html#1170" class="Bound">or∈</a> <a id="1174" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1176" href="UTxO.TokenProvenance.html#1176" class="Bound">o</a> <a id="1178" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1180" href="UTxO.TokenProvenance.html#1180" class="Bound">p</a> <a id="1182" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1184" href="UTxO.TokenProvenance.html#1184" class="Bound">n&lt;</a><a id="1186" class="Symbol">))</a> <a id="1189" class="Symbol">=</a> <a id="1191" href="UTxO.TokenProvenance.html#922" class="InductiveConstructor">cons</a> <a id="1196" class="Symbol">(</a><a id="1197" href="UTxO.TokenProvenance.html#1029" class="Function">weakenX</a> <a id="1205" href="UTxO.TokenProvenance.html#1157" class="Bound">n′&lt;</a> <a id="1209" href="UTxO.TokenProvenance.html#1167" class="Bound">x</a><a id="1210" class="Symbol">)</a> <a id="1212" class="Symbol">(</a><a id="1213" href="UTxO.TokenProvenance.html#1170" class="Bound">or∈</a> <a id="1217" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1219" href="UTxO.TokenProvenance.html#1176" class="Bound">o</a> <a id="1221" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1223" href="UTxO.TokenProvenance.html#1180" class="Bound">p</a> <a id="1225" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1227" href="Data.Nat.Properties.html#3908" class="Function">≤-trans</a> <a id="1235" href="UTxO.TokenProvenance.html#1157" class="Bound">n′&lt;</a> <a id="1239" href="UTxO.TokenProvenance.html#1184" class="Bound">n&lt;</a><a id="1241" class="Symbol">)</a>

<a id="1244" class="Keyword">record</a> <a id="Trace"></a><a id="1251" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="1257" href="UTxO.TokenProvenance.html#1257" class="Bound">L</a> <a id="1259" class="Symbol">(</a><a id="1260" href="UTxO.TokenProvenance.html#1260" class="Bound">tx</a> <a id="1263" class="Symbol">:</a> <a id="1265" href="UTxO.Types.html#7388" class="Record">Tx</a><a id="1267" class="Symbol">)</a> <a id="1269" class="Symbol">(</a><a id="1270" href="UTxO.TokenProvenance.html#1270" class="Bound">n</a> <a id="1272" class="Symbol">:</a> <a id="1274" href="UTxO.Value.html#344" class="Function">Quantity</a><a id="1282" class="Symbol">)</a> <a id="1284" class="Symbol">:</a> <a id="1286" class="PrimitiveType">Set</a> <a id="1290" class="Keyword">where</a>
  <a id="1298" class="Keyword">field</a>
    <a id="Trace.txs"></a><a id="1308" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a>    <a id="1315" class="Symbol">:</a> <a id="1317" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="1323" href="UTxO.Types.html#7388" class="Record">Tx</a>
    <a id="Trace.trace∈"></a><a id="1330" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="1337" class="Symbol">:</a> <a id="1339" href="Prelude.Lists.html#17875" class="Function">All⁺</a> <a id="1344" class="Symbol">(</a><a id="1345" href="UTxO.Validity.html#3956" class="Function Operator">_∈′</a> <a id="1349" href="UTxO.TokenProvenance.html#1257" class="Bound">L</a><a id="1350" class="Symbol">)</a> <a id="1352" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a>
    <a id="Trace.linked"></a><a id="1360" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="1367" class="Symbol">:</a> <a id="1369" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="1371" href="UTxO.TokenProvenance.html#1270" class="Bound">n</a> <a id="1373" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a>
    <a id="Trace.head≡"></a><a id="1381" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a>  <a id="1388" class="Symbol">:</a> <a id="1390" href="Data.List.NonEmpty.html#1380" class="Field">head</a> <a id="1395" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="1399" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1401" href="UTxO.TokenProvenance.html#1260" class="Bound">tx</a>
<a id="1404" class="Keyword">open</a> <a id="1409" href="UTxO.TokenProvenance.html#1251" class="Module">Trace</a> <a id="1415" class="Keyword">public</a>

<a id="1423" class="Keyword">record</a> <a id="Provenance"></a><a id="1430" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="1441" href="UTxO.TokenProvenance.html#1441" class="Bound">L</a> <a id="1443" href="UTxO.TokenProvenance.html#1443" class="Bound">tx</a> <a id="1446" class="Symbol">(</a><a id="1447" href="UTxO.TokenProvenance.html#1447" class="Bound">n</a> <a id="1449" class="Symbol">:</a> <a id="1451" href="UTxO.Value.html#344" class="Function">Quantity</a><a id="1459" class="Symbol">)</a> <a id="1461" class="Symbol">:</a> <a id="1463" class="PrimitiveType">Set</a> <a id="1467" class="Keyword">where</a>
  <a id="1475" class="Keyword">field</a>
    <a id="Provenance.traces"></a><a id="1485" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="1492" class="Symbol">:</a> <a id="1494" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="1499" class="Symbol">(</a><a id="1500" href="Data.Product.html#1369" class="Function">∃</a> <a id="1502" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="1504" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="1510" href="UTxO.TokenProvenance.html#1441" class="Bound">L</a> <a id="1512" href="UTxO.TokenProvenance.html#1443" class="Bound">tx</a><a id="1514" class="Symbol">)</a>
    <a id="Provenance.sums"></a><a id="1520" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a>   <a id="1527" class="Symbol">:</a> <a id="1529" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="1532" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="1539" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="1541" href="UTxO.TokenProvenance.html#1447" class="Bound">n</a>
<a id="1543" class="Keyword">open</a> <a id="1548" href="UTxO.TokenProvenance.html#1430" class="Module">Provenance</a> <a id="1559" class="Keyword">public</a>

<a id="1567" class="Comment">-- Utilities.</a>

<a id="origin"></a><a id="1582" href="UTxO.TokenProvenance.html#1582" class="Function">origin</a> <a id="1589" class="Symbol">:</a> <a id="1591" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="1597" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="1599" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="1602" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="1604" class="Symbol">→</a> <a id="1606" href="UTxO.Types.html#7388" class="Record">Tx</a>
<a id="1609" href="UTxO.TokenProvenance.html#1582" class="Function">origin</a> <a id="1616" class="Symbol">=</a> <a id="1618" href="Data.List.NonEmpty.html#5129" class="Function">last</a> <a id="1623" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1625" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a>

<a id="∣_∣"></a><a id="1630" href="UTxO.TokenProvenance.html#1630" class="Function Operator">∣_∣</a> <a id="1634" class="Symbol">:</a> <a id="1636" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="1647" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="1649" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="1652" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="1654" class="Symbol">→</a> <a id="1656" href="Agda.Builtin.Nat.html#192" class="Datatype">ℕ</a>
<a id="1658" href="UTxO.TokenProvenance.html#1630" class="Function Operator">∣_∣</a> <a id="1662" class="Symbol">=</a> <a id="1664" href="Data.List.Base.html#4297" class="Function">length</a> <a id="1671" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1673" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a>

<a id="weaken-↝"></a><a id="1681" href="UTxO.TokenProvenance.html#1681" class="Function">weaken-↝</a> <a id="1690" class="Symbol">:</a> <a id="1692" class="Symbol">∀</a> <a id="1694" class="Symbol">{</a><a id="1695" href="UTxO.TokenProvenance.html#1695" class="Bound">tx</a> <a id="1698" href="UTxO.TokenProvenance.html#1698" class="Bound">tx′</a> <a id="1702" href="UTxO.TokenProvenance.html#1702" class="Bound">n</a> <a id="1704" href="UTxO.TokenProvenance.html#1704" class="Bound">n′</a><a id="1706" class="Symbol">}</a> <a id="1708" class="Symbol">→</a> <a id="1710" href="UTxO.TokenProvenance.html#1695" class="Bound">tx</a> <a id="1713" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="1716" href="UTxO.TokenProvenance.html#1702" class="Bound">n</a> <a id="1718" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="1720" href="UTxO.TokenProvenance.html#1698" class="Bound">tx′</a> <a id="1724" class="Symbol">→</a> <a id="1726" href="UTxO.TokenProvenance.html#1704" class="Bound">n′</a> <a id="1729" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="1731" href="UTxO.TokenProvenance.html#1702" class="Bound">n</a> <a id="1733" class="Symbol">→</a> <a id="1735" href="UTxO.TokenProvenance.html#1695" class="Bound">tx</a> <a id="1738" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="1741" href="UTxO.TokenProvenance.html#1704" class="Bound">n′</a> <a id="1744" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="1746" href="UTxO.TokenProvenance.html#1698" class="Bound">tx′</a>
<a id="1750" href="UTxO.TokenProvenance.html#1681" class="Function">weaken-↝</a> <a id="1759" class="Symbol">{</a><a id="1760" class="Argument">n</a> <a id="1762" class="Symbol">=</a> <a id="1764" href="UTxO.TokenProvenance.html#1764" class="Bound">n</a><a id="1765" class="Symbol">}{</a><a id="1767" href="UTxO.TokenProvenance.html#1767" class="Bound">n′</a><a id="1769" class="Symbol">}</a> <a id="1771" class="Symbol">(</a><a id="1772" href="UTxO.TokenProvenance.html#1772" class="Bound">or∈</a> <a id="1776" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1778" href="UTxO.TokenProvenance.html#1778" class="Bound">o</a> <a id="1780" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1782" href="UTxO.TokenProvenance.html#1782" class="Bound">p</a> <a id="1784" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1786" href="UTxO.TokenProvenance.html#1786" class="Bound">≤v</a><a id="1788" class="Symbol">)</a> <a id="1790" href="UTxO.TokenProvenance.html#1790" class="Bound">n≤</a> <a id="1793" class="Symbol">=</a> <a id="1795" href="UTxO.TokenProvenance.html#1772" class="Bound">or∈</a> <a id="1799" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1801" href="UTxO.TokenProvenance.html#1778" class="Bound">o</a> <a id="1803" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1805" href="UTxO.TokenProvenance.html#1782" class="Bound">p</a> <a id="1807" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1809" href="Data.Nat.Properties.html#3908" class="Function">≤-trans</a> <a id="1817" class="Symbol">{</a><a id="1818" class="Argument">i</a> <a id="1820" class="Symbol">=</a> <a id="1822" href="UTxO.TokenProvenance.html#1767" class="Bound">n′</a><a id="1824" class="Symbol">}</a> <a id="1826" class="Symbol">{</a><a id="1827" class="Argument">j</a> <a id="1829" class="Symbol">=</a> <a id="1831" href="UTxO.TokenProvenance.html#1764" class="Bound">n</a><a id="1832" class="Symbol">}</a> <a id="1834" class="Symbol">{</a><a id="1835" class="Argument">k</a> <a id="1837" class="Symbol">=</a> <a id="1839" href="UTxO.Types.html#4728" class="Field">value</a> <a id="1845" href="UTxO.TokenProvenance.html#1778" class="Bound">o</a> <a id="1847" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="1848" class="Symbol">}</a> <a id="1850" href="UTxO.TokenProvenance.html#1790" class="Bound">n≤</a> <a id="1853" href="UTxO.TokenProvenance.html#1786" class="Bound">≤v</a>

<a id="weakenTrace"></a><a id="1857" href="UTxO.TokenProvenance.html#1857" class="Function">weakenTrace</a> <a id="1869" class="Symbol">:</a> <a id="1871" class="Symbol">∀</a> <a id="1873" class="Symbol">{</a><a id="1874" href="UTxO.TokenProvenance.html#1874" class="Bound">L</a> <a id="1876" href="UTxO.TokenProvenance.html#1876" class="Bound">L′</a><a id="1878" class="Symbol">}</a> <a id="1880" class="Symbol">→</a> <a id="1882" href="UTxO.TokenProvenance.html#1876" class="Bound">L′</a> <a id="1885" href="UTxO.Validity.html#4236" class="Function Operator">≼′</a> <a id="1888" href="UTxO.TokenProvenance.html#1874" class="Bound">L</a> <a id="1890" class="Symbol">→</a> <a id="1892" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="1898" href="UTxO.TokenProvenance.html#1876" class="Bound">L′</a> <a id="1901" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="1904" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="1906" class="Symbol">→</a> <a id="1908" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="1914" href="UTxO.TokenProvenance.html#1874" class="Bound">L</a> <a id="1916" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="1919" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>
<a id="1921" href="UTxO.TokenProvenance.html#1857" class="Function">weakenTrace</a> <a id="1933" href="UTxO.TokenProvenance.html#1933" class="Bound">L′≼</a> <a id="1937" class="Keyword">record</a> <a id="1944" class="Symbol">{</a><a id="1945" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="1949" class="Symbol">=</a> <a id="1951" href="UTxO.TokenProvenance.html#1951" class="Bound">txs</a><a id="1954" class="Symbol">;</a> <a id="1956" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="1963" class="Symbol">=</a> <a id="1965" href="UTxO.TokenProvenance.html#1965" class="Bound">tr∈</a><a id="1968" class="Symbol">;</a>                          <a id="1995" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2002" class="Symbol">=</a> <a id="2004" href="UTxO.TokenProvenance.html#2004" class="Bound">p</a><a id="2005" class="Symbol">;</a> <a id="2007" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2013" class="Symbol">=</a> <a id="2015" href="UTxO.TokenProvenance.html#2015" class="Bound">h≡</a><a id="2017" class="Symbol">}</a>
              <a id="2033" class="Symbol">=</a> <a id="2035" class="Keyword">record</a> <a id="2042" class="Symbol">{</a><a id="2043" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="2047" class="Symbol">=</a> <a id="2049" href="UTxO.TokenProvenance.html#1951" class="Bound">txs</a><a id="2052" class="Symbol">;</a> <a id="2054" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="2061" class="Symbol">=</a> <a id="2063" href="Data.List.Relation.Unary.All.html#3090" class="Function">L.All.map</a> <a id="2073" class="Symbol">(</a><a id="2074" href="Prelude.Lists.html#20473" class="Postulate">Suffix⇒⊆</a> <a id="2083" href="UTxO.TokenProvenance.html#1933" class="Bound">L′≼</a><a id="2086" class="Symbol">)</a> <a id="2088" href="UTxO.TokenProvenance.html#1965" class="Bound">tr∈</a><a id="2091" class="Symbol">;</a> <a id="2093" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2100" class="Symbol">=</a> <a id="2102" href="UTxO.TokenProvenance.html#2004" class="Bound">p</a><a id="2103" class="Symbol">;</a> <a id="2105" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2111" class="Symbol">=</a> <a id="2113" href="UTxO.TokenProvenance.html#2015" class="Bound">h≡</a><a id="2115" class="Symbol">}</a>

<a id="weakenTraceⁿ"></a><a id="2118" href="UTxO.TokenProvenance.html#2118" class="Function">weakenTraceⁿ</a> <a id="2131" class="Symbol">:</a> <a id="2133" class="Symbol">∀</a> <a id="2135" class="Symbol">{</a><a id="2136" href="UTxO.TokenProvenance.html#2136" class="Bound">n</a> <a id="2138" href="UTxO.TokenProvenance.html#2138" class="Bound">n′</a><a id="2140" class="Symbol">}</a> <a id="2142" class="Symbol">→</a> <a id="2144" href="UTxO.TokenProvenance.html#2138" class="Bound">n′</a> <a id="2147" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="2149" href="UTxO.TokenProvenance.html#2136" class="Bound">n</a> <a id="2151" class="Symbol">→</a> <a id="2153" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2159" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="2161" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2164" href="UTxO.TokenProvenance.html#2136" class="Bound">n</a> <a id="2166" class="Symbol">→</a> <a id="2168" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2174" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="2176" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2179" href="UTxO.TokenProvenance.html#2138" class="Bound">n′</a>
<a id="2182" href="UTxO.TokenProvenance.html#2118" class="Function">weakenTraceⁿ</a> <a id="2195" href="UTxO.TokenProvenance.html#2195" class="Bound">n&lt;</a> <a id="2198" class="Keyword">record</a> <a id="2205" class="Symbol">{</a><a id="2206" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="2210" class="Symbol">=</a> <a id="2212" href="UTxO.TokenProvenance.html#2212" class="Bound">txs</a><a id="2215" class="Symbol">;</a> <a id="2217" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="2224" class="Symbol">=</a> <a id="2226" href="UTxO.TokenProvenance.html#2226" class="Bound">tr∈</a><a id="2229" class="Symbol">;</a> <a id="2231" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2238" class="Symbol">=</a> <a id="2240" href="UTxO.TokenProvenance.html#2240" class="Bound">p</a><a id="2241" class="Symbol">;</a>            <a id="2254" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2260" class="Symbol">=</a> <a id="2262" href="UTxO.TokenProvenance.html#2262" class="Bound">h≡</a><a id="2264" class="Symbol">}</a>
              <a id="2280" class="Symbol">=</a> <a id="2282" class="Keyword">record</a> <a id="2289" class="Symbol">{</a><a id="2290" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="2294" class="Symbol">=</a> <a id="2296" href="UTxO.TokenProvenance.html#2212" class="Bound">txs</a><a id="2299" class="Symbol">;</a> <a id="2301" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="2308" class="Symbol">=</a> <a id="2310" href="UTxO.TokenProvenance.html#2226" class="Bound">tr∈</a><a id="2313" class="Symbol">;</a> <a id="2315" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2322" class="Symbol">=</a> <a id="2324" href="UTxO.TokenProvenance.html#1029" class="Function">weakenX</a> <a id="2332" href="UTxO.TokenProvenance.html#2195" class="Bound">n&lt;</a> <a id="2335" href="UTxO.TokenProvenance.html#2240" class="Bound">p</a><a id="2336" class="Symbol">;</a> <a id="2338" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2344" class="Symbol">=</a> <a id="2346" href="UTxO.TokenProvenance.html#2262" class="Bound">h≡</a><a id="2348" class="Symbol">}</a>

<a id="weakenProvenance"></a><a id="2351" href="UTxO.TokenProvenance.html#2351" class="Function">weakenProvenance</a> <a id="2368" class="Symbol">:</a> <a id="2370" class="Symbol">∀</a> <a id="2372" class="Symbol">{</a><a id="2373" href="UTxO.TokenProvenance.html#2373" class="Bound">L</a> <a id="2375" href="UTxO.TokenProvenance.html#2375" class="Bound">L′</a><a id="2377" class="Symbol">}</a> <a id="2379" class="Symbol">→</a> <a id="2381" href="UTxO.TokenProvenance.html#2375" class="Bound">L′</a> <a id="2384" href="UTxO.Validity.html#4236" class="Function Operator">≼′</a> <a id="2387" href="UTxO.TokenProvenance.html#2373" class="Bound">L</a> <a id="2389" class="Symbol">→</a> <a id="2391" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="2402" href="UTxO.TokenProvenance.html#2375" class="Bound">L′</a> <a id="2405" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2408" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="2410" class="Symbol">→</a> <a id="2412" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="2423" href="UTxO.TokenProvenance.html#2373" class="Bound">L</a> <a id="2425" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2428" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>
<a id="2430" href="UTxO.TokenProvenance.html#2351" class="Function">weakenProvenance</a> <a id="2447" class="Symbol">{</a><a id="2448" class="Argument">tx</a> <a id="2451" class="Symbol">=</a> <a id="2453" href="UTxO.TokenProvenance.html#2453" class="Bound">tx</a><a id="2455" class="Symbol">}</a> <a id="2457" class="Symbol">{</a><a id="2458" class="Argument">n</a> <a id="2460" class="Symbol">=</a> <a id="2462" href="UTxO.TokenProvenance.html#2462" class="Bound">n</a><a id="2463" class="Symbol">}</a> <a id="2465" class="Symbol">{</a><a id="2466" class="Argument">L</a> <a id="2468" class="Symbol">=</a> <a id="2470" href="UTxO.TokenProvenance.html#2470" class="Bound">L</a><a id="2471" class="Symbol">}{</a><a id="2473" href="UTxO.TokenProvenance.html#2473" class="Bound">L′</a><a id="2475" class="Symbol">}</a> <a id="2477" href="UTxO.TokenProvenance.html#2477" class="Bound">L≼</a>
    <a id="2484" class="Keyword">record</a> <a id="2491" class="Symbol">{</a> <a id="2493" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="2500" class="Symbol">=</a> <a id="2502" href="UTxO.TokenProvenance.html#2502" class="Bound">trs</a><a id="2505" class="Symbol">;</a>              <a id="2520" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="2525" class="Symbol">=</a> <a id="2527" href="UTxO.TokenProvenance.html#2527" class="Bound">p</a> <a id="2529" class="Symbol">}</a>
  <a id="2533" class="Symbol">=</a> <a id="2535" class="Keyword">record</a> <a id="2542" class="Symbol">{</a> <a id="2544" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="2551" class="Symbol">=</a> <a id="2553" href="Data.List.Base.html#1497" class="Function">map</a> <a id="2557" class="Symbol">(</a><a id="2558" href="Prelude.Bifunctor.html#500" class="Function">map₂′</a> <a id="2564" href="UTxO.TokenProvenance.html#2643" class="Function">f</a><a id="2565" class="Symbol">)</a> <a id="2567" href="UTxO.TokenProvenance.html#2502" class="Bound">trs</a><a id="2570" class="Symbol">;</a> <a id="2572" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="2577" class="Symbol">=</a> <a id="2579" href="Relation.Binary.PropositionalEquality.Core.html#1076" class="Function">subst</a> <a id="2585" class="Symbol">(</a><a id="2586" href="Data.Nat.Base.html#1081" class="Function Operator">_≥</a> <a id="2589" href="UTxO.TokenProvenance.html#2462" class="Bound">n</a><a id="2590" class="Symbol">)</a> <a id="2592" class="Symbol">(</a><a id="2593" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="2597" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="2599" href="Prelude.Lists.html#22177" class="Postulate">∑₁-map₂</a> <a id="2607" class="Symbol">{</a><a id="2608" class="Argument">xs</a> <a id="2611" class="Symbol">=</a> <a id="2613" href="UTxO.TokenProvenance.html#2502" class="Bound">trs</a><a id="2616" class="Symbol">}</a> <a id="2618" class="Symbol">{</a><a id="2619" class="Argument">f</a> <a id="2621" class="Symbol">=</a> <a id="2623" href="UTxO.TokenProvenance.html#2643" class="Function">f</a><a id="2624" class="Symbol">})</a> <a id="2627" href="UTxO.TokenProvenance.html#2527" class="Bound">p</a> <a id="2629" class="Symbol">}</a>
  <a id="2633" class="Keyword">where</a>
    <a id="2643" href="UTxO.TokenProvenance.html#2643" class="Function">f</a> <a id="2645" class="Symbol">:</a> <a id="2647" class="Symbol">∀</a> <a id="2649" class="Symbol">{</a><a id="2650" href="UTxO.TokenProvenance.html#2650" class="Bound">n</a><a id="2651" class="Symbol">}</a> <a id="2653" class="Symbol">→</a> <a id="2655" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2661" href="UTxO.TokenProvenance.html#2473" class="Bound">L′</a> <a id="2664" href="UTxO.TokenProvenance.html#2453" class="Bound">tx</a> <a id="2667" href="UTxO.TokenProvenance.html#2650" class="Bound">n</a> <a id="2669" class="Symbol">→</a> <a id="2671" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2677" href="UTxO.TokenProvenance.html#2470" class="Bound">L</a> <a id="2679" href="UTxO.TokenProvenance.html#2453" class="Bound">tx</a> <a id="2682" href="UTxO.TokenProvenance.html#2650" class="Bound">n</a>
    <a id="2688" href="UTxO.TokenProvenance.html#2643" class="Function">f</a> <a id="2690" class="Symbol">=</a> <a id="2692" href="UTxO.TokenProvenance.html#1857" class="Function">weakenTrace</a> <a id="2704" href="UTxO.TokenProvenance.html#2477" class="Bound">L≼</a>

<a id="_∷ᵗ_∶-_"></a><a id="2708" href="UTxO.TokenProvenance.html#2708" class="Function Operator">_∷ᵗ_∶-_</a> <a id="2716" class="Symbol">:</a>
    <a id="2722" class="Symbol">(</a><a id="2723" href="UTxO.TokenProvenance.html#2723" class="Bound">tx′</a> <a id="2727" class="Symbol">:</a> <a id="2729" href="UTxO.Types.html#7388" class="Record">Tx</a><a id="2731" class="Symbol">)</a>
  <a id="2735" class="Symbol">→</a> <a id="2737" class="Symbol">(</a><a id="2738" href="UTxO.TokenProvenance.html#2738" class="Bound">tr</a> <a id="2741" class="Symbol">:</a> <a id="2743" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2749" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="2751" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2754" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a><a id="2755" class="Symbol">)</a>
  <a id="2759" class="Symbol">→</a> <a id="2761" class="Symbol">(</a><a id="2762" href="UTxO.TokenProvenance.html#2723" class="Bound">tx′</a> <a id="2766" href="UTxO.Validity.html#3956" class="Function Operator">∈′</a> <a id="2769" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a><a id="2770" class="Symbol">)</a> <a id="2772" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2774" class="Symbol">(</a><a id="2775" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="2778" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="2781" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="2783" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="2785" href="UTxO.TokenProvenance.html#2723" class="Bound">tx′</a><a id="2788" class="Symbol">)</a>
  <a id="2792" class="Symbol">→</a> <a id="2794" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="2800" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="2802" href="UTxO.TokenProvenance.html#2723" class="Bound">tx′</a> <a id="2806" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>
<a id="2808" href="UTxO.TokenProvenance.html#2808" class="Bound">tx</a> <a id="2811" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∷ᵗ</a> <a id="2814" class="Keyword">record</a> <a id="2821" class="Symbol">{</a><a id="2822" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="2826" class="Symbol">=</a> <a id="2828" href="UTxO.TokenProvenance.html#2828" class="Bound">txs</a><a id="2831" class="Symbol">;</a>       <a id="2839" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="2846" class="Symbol">=</a> <a id="2848" href="UTxO.TokenProvenance.html#2848" class="Bound">tr∈</a><a id="2851" class="Symbol">;</a>       <a id="2859" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2866" class="Symbol">=</a> <a id="2868" href="UTxO.TokenProvenance.html#2868" class="Bound">p</a><a id="2869" class="Symbol">;</a>          <a id="2880" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2886" class="Symbol">=</a> <a id="2888" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2892" class="Symbol">}</a> <a id="2894" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∶-</a> <a id="2897" class="Symbol">(</a><a id="2898" href="UTxO.TokenProvenance.html#2898" class="Bound">tx∈</a> <a id="2902" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2904" href="UTxO.TokenProvenance.html#2904" class="Bound">tx↝</a><a id="2907" class="Symbol">)</a>
    <a id="2913" class="Symbol">=</a> <a id="2915" class="Keyword">record</a> <a id="2922" class="Symbol">{</a><a id="2923" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="2927" class="Symbol">=</a> <a id="2929" href="UTxO.TokenProvenance.html#2808" class="Bound">tx</a> <a id="2932" href="Data.List.NonEmpty.html#1556" class="Function Operator">∷⁺</a> <a id="2935" href="UTxO.TokenProvenance.html#2828" class="Bound">txs</a><a id="2938" class="Symbol">;</a> <a id="2940" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="2947" class="Symbol">=</a> <a id="2949" href="UTxO.TokenProvenance.html#2898" class="Bound">tx∈</a> <a id="2953" href="Data.List.Relation.Unary.All.html#1354" class="InductiveConstructor Operator">∷</a> <a id="2955" href="UTxO.TokenProvenance.html#2848" class="Bound">tr∈</a><a id="2958" class="Symbol">;</a> <a id="2960" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="2967" class="Symbol">=</a> <a id="2969" href="UTxO.TokenProvenance.html#922" class="InductiveConstructor">cons</a> <a id="2974" href="UTxO.TokenProvenance.html#2868" class="Bound">p</a> <a id="2976" href="UTxO.TokenProvenance.html#2904" class="Bound">tx↝</a><a id="2979" class="Symbol">;</a> <a id="2981" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="2987" class="Symbol">=</a> <a id="2989" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="2993" class="Symbol">}</a>

<a id="forge◆≥"></a><a id="2996" href="UTxO.TokenProvenance.html#2996" class="Function">forge◆≥</a> <a id="3004" class="Symbol">:</a> <a id="3006" class="Symbol">∀</a> <a id="3008" class="Symbol">{</a><a id="3009" href="UTxO.TokenProvenance.html#3009" class="Bound">txs</a> <a id="3013" class="Symbol">:</a> <a id="3015" href="Data.List.NonEmpty.html#1318" class="Record">List⁺</a> <a id="3021" href="UTxO.Types.html#7388" class="Record">Tx</a><a id="3023" class="Symbol">}</a> <a id="3025" class="Symbol">(</a><a id="3026" href="UTxO.TokenProvenance.html#3026" class="Bound">x</a> <a id="3028" class="Symbol">:</a> <a id="3030" href="UTxO.TokenProvenance.html#790" class="Datatype">X</a> <a id="3032" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="3034" href="UTxO.TokenProvenance.html#3009" class="Bound">txs</a><a id="3037" class="Symbol">)</a> <a id="3039" class="Symbol">→</a> <a id="3041" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="3047" class="Symbol">(</a><a id="3048" href="Data.List.NonEmpty.html#5129" class="Function">last</a> <a id="3053" href="UTxO.TokenProvenance.html#3009" class="Bound">txs</a><a id="3056" class="Symbol">)</a> <a id="3058" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="3060" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="3062" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>
<a id="3064" href="UTxO.TokenProvenance.html#2996" class="Function">forge◆≥</a> <a id="3072" class="Symbol">(</a><a id="3073" href="UTxO.TokenProvenance.html#832" class="InductiveConstructor">root</a> <a id="3078" class="Symbol">_</a> <a id="3080" href="UTxO.TokenProvenance.html#3080" class="Bound">frg≥</a><a id="3084" class="Symbol">)</a>              <a id="3099" class="Symbol">=</a> <a id="3101" href="UTxO.TokenProvenance.html#3080" class="Bound">frg≥</a>
<a id="3106" href="UTxO.TokenProvenance.html#2996" class="Function">forge◆≥</a> <a id="3114" class="Symbol">(</a><a id="3115" href="UTxO.TokenProvenance.html#922" class="InductiveConstructor">cons</a> <a id="3120" class="Symbol">{</a><a id="3121" class="Argument">txs</a> <a id="3125" class="Symbol">=</a> <a id="3127" href="UTxO.TokenProvenance.html#3127" class="Bound">txs</a><a id="3130" class="Symbol">}{</a><a id="3132" href="UTxO.TokenProvenance.html#3132" class="Bound">tx</a><a id="3134" class="Symbol">}</a> <a id="3136" href="UTxO.TokenProvenance.html#3136" class="Bound">x</a> <a id="3138" class="Symbol">_)</a> <a id="3141" class="Keyword">rewrite</a> <a id="3149" href="Prelude.Lists.html#18386" class="Postulate">last-∷</a> <a id="3156" class="Symbol">{</a><a id="3157" class="Argument">x</a> <a id="3159" class="Symbol">=</a> <a id="3161" href="UTxO.TokenProvenance.html#3132" class="Bound">tx</a><a id="3163" class="Symbol">}{</a><a id="3165" href="UTxO.TokenProvenance.html#3127" class="Bound">txs</a><a id="3168" class="Symbol">}</a> <a id="3170" class="Symbol">=</a> <a id="3172" href="UTxO.TokenProvenance.html#2996" class="Function">forge◆≥</a> <a id="3180" href="UTxO.TokenProvenance.html#3136" class="Bound">x</a>

<a id="singleton-Provenance"></a><a id="3183" href="UTxO.TokenProvenance.html#3183" class="Function">singleton-Provenance</a> <a id="3204" class="Symbol">:</a> <a id="3206" class="Symbol">∀</a> <a id="3208" class="Symbol">{</a><a id="3209" href="UTxO.TokenProvenance.html#3209" class="Bound">tx</a> <a id="3212" href="UTxO.TokenProvenance.html#3212" class="Bound">l</a><a id="3213" class="Symbol">}</a> <a id="3215" class="Symbol">{</a><a id="3216" href="UTxO.TokenProvenance.html#3216" class="Bound">vl</a> <a id="3219" class="Symbol">:</a> <a id="3221" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="3233" class="Symbol">(</a><a id="3234" href="UTxO.TokenProvenance.html#3209" class="Bound">tx</a> <a id="3237" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3239" href="UTxO.TokenProvenance.html#3212" class="Bound">l</a><a id="3240" class="Symbol">)}</a> <a id="3243" class="Symbol">→</a> <a id="3245" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="3256" class="Symbol">(_</a> <a id="3259" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3261" href="UTxO.TokenProvenance.html#3216" class="Bound">vl</a><a id="3263" class="Symbol">)</a> <a id="3265" href="UTxO.TokenProvenance.html#3209" class="Bound">tx</a> <a id="3268" class="Symbol">(</a><a id="3269" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="3275" href="UTxO.TokenProvenance.html#3209" class="Bound">tx</a> <a id="3278" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="3279" class="Symbol">)</a>
<a id="3281" href="UTxO.TokenProvenance.html#3183" class="Function">singleton-Provenance</a> <a id="3302" class="Symbol">{</a><a id="3303" class="Argument">tx</a> <a id="3306" class="Symbol">=</a> <a id="3308" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a><a id="3310" class="Symbol">}{</a><a id="3312" href="UTxO.TokenProvenance.html#3312" class="Bound">l</a><a id="3313" class="Symbol">}{</a><a id="3315" href="UTxO.TokenProvenance.html#3315" class="Bound">vl</a><a id="3317" class="Symbol">}</a> <a id="3319" class="Symbol">=</a> <a id="3321" class="Keyword">record</a> <a id="3328" class="Symbol">{</a><a id="3329" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3336" class="Symbol">=</a> <a id="3338" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="3340" href="UTxO.TokenProvenance.html#3369" class="Function">tr</a> <a id="3343" href="Data.List.Base.html#4458" class="Function Operator">]</a><a id="3344" class="Symbol">;</a> <a id="3346" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="3351" class="Symbol">=</a> <a id="3353" href="UTxO.TokenProvenance.html#3501" class="Function">∑≥</a><a id="3355" class="Symbol">}</a>
  <a id="3359" class="Keyword">where</a>
    <a id="3369" href="UTxO.TokenProvenance.html#3369" class="Function">tr</a> <a id="3372" class="Symbol">:</a> <a id="3374" href="Data.Product.html#1369" class="Function">∃</a> <a id="3376" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="3378" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="3384" class="Symbol">(_</a> <a id="3387" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3389" href="UTxO.TokenProvenance.html#3315" class="Bound">vl</a><a id="3391" class="Symbol">)</a> <a id="3393" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a>
    <a id="3400" href="UTxO.TokenProvenance.html#3369" class="Function">tr</a> <a id="3403" class="Symbol">=</a> <a id="3405" class="Symbol">_</a> <a id="3407" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3409" class="Keyword">record</a> <a id="3416" class="Symbol">{</a><a id="3417" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="3421" class="Symbol">=</a> <a id="3423" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a> <a id="3426" href="Data.List.NonEmpty.html#1364" class="InductiveConstructor Operator">∷</a> <a id="3428" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3430" class="Symbol">;</a> <a id="3432" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="3439" class="Symbol">=</a> <a id="3441" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="3446" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3451" href="Data.List.Relation.Unary.All.html#1354" class="InductiveConstructor Operator">∷</a> <a id="3453" href="Data.List.Relation.Unary.All.html#1337" class="InductiveConstructor">[]</a><a id="3455" class="Symbol">;</a> <a id="3457" href="UTxO.TokenProvenance.html#1360" class="Field">linked</a> <a id="3464" class="Symbol">=</a> <a id="3466" href="UTxO.TokenProvenance.html#832" class="InductiveConstructor">root</a> <a id="3471" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a> <a id="3474" href="Data.Nat.Properties.html#3725" class="Function">≤-refl</a><a id="3480" class="Symbol">;</a> <a id="3482" href="UTxO.TokenProvenance.html#1381" class="Field">head≡</a> <a id="3488" class="Symbol">=</a> <a id="3490" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="3494" class="Symbol">}</a>

    <a id="3501" href="UTxO.TokenProvenance.html#3501" class="Function">∑≥</a> <a id="3504" class="Symbol">:</a> <a id="3506" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="3509" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="3511" href="UTxO.TokenProvenance.html#3369" class="Function">tr</a> <a id="3514" href="Data.List.Base.html#4458" class="Function Operator">]</a> <a id="3516" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="3518" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="3524" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a> <a id="3527" href="UTxO.Value.html#5805" class="Function Operator">◆</a>
    <a id="3533" href="UTxO.TokenProvenance.html#3501" class="Function">∑≥</a> <a id="3536" class="Symbol">=</a> <a id="3538" href="Relation.Binary.PropositionalEquality.Core.html#1076" class="Function">subst</a> <a id="3544" class="Symbol">(</a><a id="3545" href="Data.Nat.Base.html#1081" class="Function Operator">_≥</a> <a id="3548" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="3554" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a> <a id="3557" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="3558" class="Symbol">)</a> <a id="3560" class="Symbol">(</a><a id="3561" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="3565" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="3567" href="Prelude.Lists.html#22274" class="Postulate">∑₁-single</a> <a id="3577" class="Symbol">{</a><a id="3578" class="Argument">n</a> <a id="3580" class="Symbol">=</a> <a id="3582" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="3588" href="UTxO.TokenProvenance.html#3308" class="Bound">tx</a> <a id="3591" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="3592" class="Symbol">}</a> <a id="3594" class="Symbol">{</a><a id="3595" class="Argument">x</a> <a id="3597" class="Symbol">=</a> <a id="3599" href="UTxO.TokenProvenance.html#3369" class="Function">tr</a><a id="3601" class="Symbol">})</a> <a id="3604" href="Data.Nat.Properties.html#3725" class="Function">≤-refl</a>

<a id="combine"></a><a id="3612" href="UTxO.TokenProvenance.html#3612" class="Function">combine</a> <a id="3620" class="Symbol">:</a> <a id="3622" class="Symbol">(</a><a id="3623" href="UTxO.TokenProvenance.html#3623" class="Bound">prs</a> <a id="3627" class="Symbol">:</a> <a id="3629" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="3634" class="Symbol">(</a><a id="3635" href="Data.Product.html#1369" class="Function">∃</a> <a id="3637" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="3639" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="3650" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="3652" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a><a id="3654" class="Symbol">))</a> <a id="3657" class="Symbol">→</a> <a id="3659" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="3662" href="UTxO.TokenProvenance.html#3623" class="Bound">prs</a> <a id="3666" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="3668" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="3670" class="Symbol">→</a> <a id="3672" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="3683" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="3685" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="3688" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a>
<a id="3690" href="UTxO.TokenProvenance.html#3612" class="Function">combine</a> <a id="3698" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a> <a id="3701" href="Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a> <a id="3705" class="Symbol">=</a> <a id="3707" class="Keyword">record</a> <a id="3714" class="Symbol">{</a><a id="3715" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3722" class="Symbol">=</a> <a id="3724" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="3726" class="Symbol">;</a> <a id="3728" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="3733" class="Symbol">=</a> <a id="3735" href="Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a><a id="3738" class="Symbol">}</a>
<a id="3740" href="UTxO.TokenProvenance.html#3612" class="Function">combine</a> <a id="3748" class="Symbol">{</a><a id="3749" class="Argument">L</a> <a id="3751" class="Symbol">=</a> <a id="3753" href="UTxO.TokenProvenance.html#3753" class="Bound">L</a><a id="3754" class="Symbol">}</a> <a id="3756" class="Symbol">{</a><a id="3757" class="Argument">tx</a> <a id="3760" class="Symbol">=</a> <a id="3762" href="UTxO.TokenProvenance.html#3762" class="Bound">tx</a><a id="3764" class="Symbol">}</a> <a id="3766" class="Symbol">{</a><a id="3767" class="Argument">n</a> <a id="3769" class="Symbol">=</a> <a id="3771" href="UTxO.TokenProvenance.html#3771" class="Bound">n</a><a id="3772" class="Symbol">}</a> <a id="3774" class="Symbol">((</a><a id="3776" href="UTxO.TokenProvenance.html#3776" class="Bound">n′</a> <a id="3779" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3781" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a><a id="3783" class="Symbol">)</a> <a id="3785" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3787" href="UTxO.TokenProvenance.html#3787" class="Bound">prs</a><a id="3790" class="Symbol">)</a> <a id="3792" href="UTxO.TokenProvenance.html#3792" class="Bound">∑≥</a> <a id="3795" class="Symbol">=</a> <a id="3797" class="Keyword">record</a>
  <a id="3806" class="Symbol">{</a> <a id="3808" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3815" class="Symbol">=</a> <a id="3817" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3824" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a> <a id="3827" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="3830" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3837" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a>
  <a id="3843" class="Symbol">;</a> <a id="3845" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a>   <a id="3852" class="Symbol">=</a> <a id="3854" href="UTxO.TokenProvenance.html#3952" class="Function">∑≥′</a>
  <a id="3860" class="Symbol">}</a>
  <a id="3864" class="Keyword">where</a>
    <a id="3874" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a> <a id="3878" class="Symbol">:</a> <a id="3880" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="3891" href="UTxO.TokenProvenance.html#3753" class="Bound">L</a> <a id="3893" href="UTxO.TokenProvenance.html#3762" class="Bound">tx</a> <a id="3896" class="Symbol">(</a><a id="3897" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="3900" href="UTxO.TokenProvenance.html#3787" class="Bound">prs</a><a id="3903" class="Symbol">)</a>
    <a id="3909" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a> <a id="3913" class="Symbol">=</a> <a id="3915" href="UTxO.TokenProvenance.html#3612" class="Function">combine</a> <a id="3923" class="Symbol">{</a><a id="3924" class="Argument">n</a> <a id="3926" class="Symbol">=</a> <a id="3928" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="3931" href="UTxO.TokenProvenance.html#3787" class="Bound">prs</a><a id="3934" class="Symbol">}</a> <a id="3936" href="UTxO.TokenProvenance.html#3787" class="Bound">prs</a> <a id="3940" href="Data.Nat.Properties.html#3725" class="Function">≤-refl</a>

    <a id="3952" href="UTxO.TokenProvenance.html#3952" class="Function">∑≥′</a> <a id="3956" class="Symbol">:</a> <a id="3958" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="3961" class="Symbol">(</a><a id="3962" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3969" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a> <a id="3972" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="3975" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="3982" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a><a id="3985" class="Symbol">)</a> <a id="3987" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="3989" href="UTxO.TokenProvenance.html#3771" class="Bound">n</a>
    <a id="3995" href="UTxO.TokenProvenance.html#3952" class="Function">∑≥′</a> <a id="3999" class="Symbol">=</a> <a id="4001" href="Relation.Binary.Reasoning.Base.Triple.html#3005" class="Function Operator">begin</a> <a id="4007" href="UTxO.TokenProvenance.html#3771" class="Bound">n</a>                                <a id="4040" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">≤⟨</a> <a id="4043" href="UTxO.TokenProvenance.html#3792" class="Bound">∑≥</a> <a id="4046" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">⟩</a>
                <a id="4064" href="UTxO.TokenProvenance.html#3776" class="Bound">n′</a> <a id="4067" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="4069" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="4072" href="UTxO.TokenProvenance.html#3787" class="Bound">prs</a>                      <a id="4097" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">≤⟨</a> <a id="4100" href="Prelude.General.html#2012" class="Postulate">≥-+-swapˡʳ</a> <a id="4111" class="Symbol">(</a><a id="4112" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="4117" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a><a id="4119" class="Symbol">)</a> <a id="4121" class="Symbol">(</a><a id="4122" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="4127" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a><a id="4130" class="Symbol">)</a> <a id="4132" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">⟩</a>
                <a id="4150" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="4153" class="Symbol">(</a><a id="4154" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4161" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a><a id="4163" class="Symbol">)</a> <a id="4165" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="4167" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="4170" class="Symbol">(</a><a id="4171" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4178" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a><a id="4181" class="Symbol">)</a> <a id="4183" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">≡⟨</a> <a id="4186" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="4190" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="4192" href="Prelude.Lists.html#22002" class="Postulate">∑₁-++</a> <a id="4198" class="Symbol">{</a><a id="4199" class="Argument">xs</a> <a id="4202" class="Symbol">=</a> <a id="4204" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4211" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a><a id="4213" class="Symbol">}{</a><a id="4215" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4222" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a><a id="4225" class="Symbol">}</a> <a id="4227" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">⟩</a>
                <a id="4245" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="4248" class="Symbol">(</a><a id="4249" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4256" href="UTxO.TokenProvenance.html#3781" class="Bound">pr</a> <a id="4259" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="4262" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="4269" href="UTxO.TokenProvenance.html#3874" class="Function">pr′</a><a id="4272" class="Symbol">)</a>     <a id="4278" href="Relation.Binary.Reasoning.Base.Triple.html#5114" class="Function Operator">∎</a>
          <a id="4290" class="Keyword">where</a> <a id="4296" class="Keyword">open</a> <a id="4301" href="Data.Nat.Properties.html#11242" class="Module">≤-Reasoning</a>

<a id="4314" class="Comment">-- Token provenance.</a>

<a id="provenance"></a><a id="4336" href="UTxO.TokenProvenance.html#4336" class="Function">provenance</a> <a id="4347" class="Symbol">:</a> <a id="4349" class="Symbol">∀</a> <a id="4351" class="Symbol">{</a><a id="4352" href="UTxO.TokenProvenance.html#4352" class="Bound">tx</a> <a id="4355" href="UTxO.TokenProvenance.html#4355" class="Bound">l</a><a id="4356" class="Symbol">}</a> <a id="4358" class="Symbol">(</a><a id="4359" href="UTxO.TokenProvenance.html#4359" class="Bound">vl</a> <a id="4362" class="Symbol">:</a> <a id="4364" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="4376" class="Symbol">(</a><a id="4377" href="UTxO.TokenProvenance.html#4352" class="Bound">tx</a> <a id="4380" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4382" href="UTxO.TokenProvenance.html#4355" class="Bound">l</a><a id="4383" class="Symbol">))</a> <a id="4386" class="Symbol">→</a> <a id="4388" class="Symbol">∀</a> <a id="4390" class="Symbol">{</a><a id="4391" href="UTxO.TokenProvenance.html#4391" class="Bound">o</a><a id="4392" class="Symbol">}</a> <a id="4394" class="Symbol">→</a> <a id="4396" href="UTxO.TokenProvenance.html#4391" class="Bound">o</a> <a id="4398" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4400" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="4408" href="UTxO.TokenProvenance.html#4352" class="Bound">tx</a> <a id="4411" class="Symbol">→</a> <a id="4413" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="4424" class="Symbol">(_</a> <a id="4427" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4429" href="UTxO.TokenProvenance.html#4359" class="Bound">vl</a><a id="4431" class="Symbol">)</a> <a id="4433" href="UTxO.TokenProvenance.html#4352" class="Bound">tx</a> <a id="4436" class="Symbol">(</a><a id="4437" href="UTxO.Types.html#4728" class="Field">value</a> <a id="4443" href="UTxO.TokenProvenance.html#4391" class="Bound">o</a> <a id="4445" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="4446" class="Symbol">)</a>
<a id="4448" href="UTxO.TokenProvenance.html#4336" class="Function">provenance</a> <a id="4459" class="Symbol">{</a><a id="4460" href="UTxO.TokenProvenance.html#4460" class="Bound">tx</a><a id="4462" class="Symbol">}{</a><a id="4464" href="UTxO.TokenProvenance.html#4464" class="Bound">l</a><a id="4465" class="Symbol">}</a> <a id="4467" href="UTxO.TokenProvenance.html#4467" class="Bound">vl</a> <a id="4470" class="Symbol">=</a> <a id="4472" href="UTxO.TokenProvenance.html#4526" class="Function">go</a> <a id="4475" href="UTxO.TokenProvenance.html#4467" class="Bound">vl</a> <a id="4478" class="Symbol">(</a><a id="4479" href="UTxO.Validity.html#4849" class="Function">≺′-wf</a> <a id="4485" class="Symbol">(_</a> <a id="4488" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4490" href="UTxO.TokenProvenance.html#4467" class="Bound">vl</a><a id="4492" class="Symbol">))</a>
  <a id="4497" class="Keyword">module</a> <a id="Provenance₀"></a><a id="4504" href="UTxO.TokenProvenance.html#4504" class="Module">Provenance₀</a> <a id="4516" class="Keyword">where</a>
    <a id="Provenance₀.go"></a><a id="4526" href="UTxO.TokenProvenance.html#4526" class="Function">go</a> <a id="4529" class="Symbol">:</a> <a id="4531" class="Symbol">∀</a> <a id="4533" class="Symbol">{</a><a id="4534" href="UTxO.TokenProvenance.html#4534" class="Bound">tx</a> <a id="4537" href="UTxO.TokenProvenance.html#4537" class="Bound">l</a><a id="4538" class="Symbol">}</a> <a id="4540" class="Symbol">(</a><a id="4541" href="UTxO.TokenProvenance.html#4541" class="Bound">vl</a> <a id="4544" class="Symbol">:</a> <a id="4546" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="4558" class="Symbol">(</a><a id="4559" href="UTxO.TokenProvenance.html#4534" class="Bound">tx</a> <a id="4562" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="4564" href="UTxO.TokenProvenance.html#4537" class="Bound">l</a><a id="4565" class="Symbol">))</a> <a id="4568" class="Symbol">→</a> <a id="4570" href="Induction.WellFounded.html#1000" class="Datatype">Acc</a> <a id="4574" href="UTxO.Validity.html#4296" class="Function Operator">_≺′_</a> <a id="4579" class="Symbol">(_</a> <a id="4582" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4584" href="UTxO.TokenProvenance.html#4541" class="Bound">vl</a><a id="4586" class="Symbol">)</a>
       <a id="4595" class="Symbol">→</a> <a id="4597" class="Symbol">(∀</a> <a id="4600" class="Symbol">{</a><a id="4601" href="UTxO.TokenProvenance.html#4601" class="Bound">o</a><a id="4602" class="Symbol">}</a> <a id="4604" class="Symbol">→</a> <a id="4606" href="UTxO.TokenProvenance.html#4601" class="Bound">o</a> <a id="4608" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="4610" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="4618" href="UTxO.TokenProvenance.html#4534" class="Bound">tx</a> <a id="4621" class="Symbol">→</a> <a id="4623" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="4634" class="Symbol">(_</a> <a id="4637" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4639" href="UTxO.TokenProvenance.html#4541" class="Bound">vl</a><a id="4641" class="Symbol">)</a> <a id="4643" href="UTxO.TokenProvenance.html#4534" class="Bound">tx</a> <a id="4646" class="Symbol">(</a><a id="4647" href="UTxO.Types.html#4728" class="Field">value</a> <a id="4653" href="UTxO.TokenProvenance.html#4601" class="Bound">o</a> <a id="4655" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="4656" class="Symbol">))</a>
    <a id="4663" href="UTxO.TokenProvenance.html#4526" class="Function">go</a> <a id="4666" class="Symbol">{</a><a id="4667" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="4669" class="Symbol">}{</a><a id="4671" href="UTxO.TokenProvenance.html#4671" class="Bound">l</a><a id="4672" class="Symbol">}</a> <a id="4674" href="UTxO.TokenProvenance.html#4674" class="Bound">vl₀</a><a id="4677" class="Symbol">@(</a><a id="4679" href="UTxO.TokenProvenance.html#4679" class="Bound">vl</a> <a id="4682" href="UTxO.Validity.html#2167" class="InductiveConstructor Operator">⊕</a> <a id="4684" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="4687" href="UTxO.Validity.html#2167" class="InductiveConstructor Operator">∶-</a> <a id="4690" href="UTxO.TokenProvenance.html#4690" class="Bound">vtx</a><a id="4693" class="Symbol">)</a> <a id="4695" class="Symbol">(</a><a id="4696" href="Induction.WellFounded.html#1062" class="InductiveConstructor">acc</a> <a id="4700" href="UTxO.TokenProvenance.html#4700" class="Bound">a</a><a id="4701" class="Symbol">)</a> <a id="4703" class="Symbol">{</a><a id="4704" href="UTxO.TokenProvenance.html#4704" class="Bound">o</a><a id="4705" class="Symbol">}</a> <a id="4707" href="UTxO.TokenProvenance.html#4707" class="Bound">o∈</a>
      <a id="4716" class="Symbol">=</a> <a id="4718" href="UTxO.TokenProvenance.html#3612" class="Function">combine</a> <a id="4726" href="UTxO.TokenProvenance.html#6247" class="Function">allPrevs</a> <a id="4735" href="UTxO.TokenProvenance.html#7825" class="Function">∑≥</a>
      <a id="4744" class="Keyword">module</a> <a id="Provenance₁"></a><a id="4751" href="UTxO.TokenProvenance.html#4751" class="Module">Provenance₁</a> <a id="4763" class="Keyword">where</a>
        <a id="Provenance₀.Provenance₁.L₀"></a><a id="4777" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="4780" class="Symbol">=</a> <a id="4782" class="Symbol">_</a> <a id="4784" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4786" href="UTxO.TokenProvenance.html#4674" class="Bound">vl₀</a>
        <a id="Provenance₀.Provenance₁.v"></a><a id="4798" href="UTxO.TokenProvenance.html#4798" class="Function">v</a>  <a id="4801" class="Symbol">=</a> <a id="4803" href="UTxO.Types.html#4728" class="Field">value</a> <a id="4809" href="UTxO.TokenProvenance.html#4704" class="Bound">o</a> <a id="4811" href="UTxO.Value.html#5805" class="Function Operator">◆</a>
        <a id="Provenance₀.Provenance₁.rs"></a><a id="4821" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a> <a id="4824" class="Symbol">=</a> <a id="4826" href="UTxO.Validity.html#6948" class="Function">prevs</a> <a id="4832" href="UTxO.TokenProvenance.html#4679" class="Bound">vl</a> <a id="4835" href="UTxO.TokenProvenance.html#4690" class="Bound">vtx</a>

        <a id="Provenance₀.Provenance₁.fromForge"></a><a id="4848" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a> <a id="4858" class="Symbol">:</a> <a id="4860" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="4865" class="Symbol">(</a><a id="4866" href="Data.Product.html#1369" class="Function">∃</a> <a id="4868" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="4870" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="4881" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="4884" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="4886" class="Symbol">)</a>
        <a id="4896" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a>
          <a id="4916" class="Keyword">with</a> <a id="4921" href="UTxO.Value.html#5895" class="Function Operator">◆∈?</a> <a id="4925" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="4931" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a>
        <a id="4942" class="Symbol">...</a> <a id="4946" class="Symbol">|</a> <a id="4948" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="4952" class="Symbol">_</a> <a id="4954" class="Symbol">=</a> <a id="4956" href="Data.List.Base.html#4458" class="Function Operator">[</a> <a id="4958" class="Symbol">_</a> <a id="4960" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="4962" href="UTxO.TokenProvenance.html#3183" class="Function">singleton-Provenance</a> <a id="4983" class="Symbol">{</a><a id="4984" class="Argument">tx</a> <a id="4987" class="Symbol">=</a> <a id="4989" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="4991" class="Symbol">}{</a><a id="4993" href="UTxO.TokenProvenance.html#4671" class="Bound">l</a><a id="4994" class="Symbol">}{</a><a id="4996" href="UTxO.TokenProvenance.html#4674" class="Bound">vl₀</a><a id="4999" class="Symbol">}</a> <a id="5001" href="Data.List.Base.html#4458" class="Function Operator">]</a>
          <a id="5013" class="Keyword">where</a>
        <a id="5027" class="Symbol">...</a> <a id="5031" class="Symbol">|</a> <a id="5033" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="5037" class="Symbol">_</a> <a id="5039" class="Symbol">=</a> <a id="5041" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a>

        <a id="Provenance₀.Provenance₁.res→traces"></a><a id="5053" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="5064" class="Symbol">:</a> <a id="5066" href="UTxO.Validity.html#6274" class="Record">Res</a> <a id="5070" href="UTxO.TokenProvenance.html#4679" class="Bound">vl</a> <a id="5073" href="UTxO.TokenProvenance.html#4690" class="Bound">vtx</a> <a id="5077" class="Symbol">→</a> <a id="5079" href="Data.Maybe.Base.html#838" class="Datatype">Maybe</a> <a id="5085" class="Symbol">(</a><a id="5086" href="Data.Product.html#1369" class="Function">∃</a> <a id="5088" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="5090" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="5101" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="5104" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="5106" class="Symbol">)</a>
        <a id="5116" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="5127" href="UTxO.TokenProvenance.html#5127" class="Bound">r</a><a id="5128" class="Symbol">@(</a><a id="5130" class="Keyword">record</a> <a id="5137" class="Symbol">{</a> <a id="5139" href="UTxO.Validity.html#6369" class="Field">prevTx</a> <a id="5146" class="Symbol">=</a> <a id="5148" href="UTxO.TokenProvenance.html#5148" class="Bound">tx′</a><a id="5151" class="Symbol">;</a> <a id="5153" href="UTxO.Validity.html#6433" class="Field">vl′</a> <a id="5157" class="Symbol">=</a> <a id="5159" href="UTxO.TokenProvenance.html#5159" class="Bound">vl′</a><a id="5162" class="Symbol">;</a> <a id="5164" href="UTxO.Validity.html#6409" class="Field">prevOut</a> <a id="5172" class="Symbol">=</a> <a id="5174" href="UTxO.TokenProvenance.html#5174" class="Bound">o′</a><a id="5176" class="Symbol">;</a> <a id="5178" href="UTxO.Validity.html#6474" class="Field">prevOut∈</a> <a id="5187" class="Symbol">=</a> <a id="5189" href="UTxO.TokenProvenance.html#5189" class="Bound">o∈′</a><a id="5192" class="Symbol">;</a> <a id="5194" href="UTxO.Validity.html#6514" class="Field">vl′≺vl</a> <a id="5201" class="Symbol">=</a> <a id="5203" href="UTxO.TokenProvenance.html#5203" class="Bound">vl′≺vl</a>
                             <a id="5239" class="Symbol">;</a> <a id="5241" href="UTxO.Validity.html#6702" class="Field">or∈</a> <a id="5245" class="Symbol">=</a> <a id="5247" href="UTxO.TokenProvenance.html#5247" class="Bound">or∈</a><a id="5250" class="Symbol">;</a> <a id="5252" href="UTxO.Validity.html#6760" class="Field">⁉≡just</a> <a id="5259" class="Symbol">=</a> <a id="5261" href="UTxO.TokenProvenance.html#5261" class="Bound">⁉≡just</a> <a id="5268" class="Symbol">})</a>
          <a id="5281" class="Keyword">with</a> <a id="5286" href="UTxO.Value.html#5895" class="Function Operator">◆∈?</a> <a id="5290" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="5299" href="UTxO.TokenProvenance.html#5127" class="Bound">r</a>
        <a id="5309" class="Symbol">...</a> <a id="5313" class="Symbol">|</a> <a id="5315" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="5319" class="Symbol">_</a> <a id="5321" class="Symbol">=</a> <a id="5323" href="Data.Maybe.Base.html#872" class="InductiveConstructor">nothing</a>
        <a id="5339" class="Symbol">...</a> <a id="5343" class="Symbol">|</a> <a id="5345" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="5349" class="Symbol">_</a> <a id="5351" class="Symbol">=</a> <a id="5353" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="5358" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="5360" class="Symbol">_</a> <a id="5362" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5364" href="UTxO.TokenProvenance.html#5639" class="Function">pr</a>
          <a id="5377" class="Keyword">where</a>
            <a id="5395" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a> <a id="5398" class="Symbol">=</a> <a id="5400" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="5409" class="Bound">r</a> <a id="5411" href="UTxO.Value.html#5805" class="Function Operator">◆</a>

            <a id="5426" href="UTxO.TokenProvenance.html#5426" class="Function">↝tx</a> <a id="5430" class="Symbol">:</a> <a id="5432" class="Bound">tx′</a> <a id="5436" href="UTxO.TokenProvenance.html#560" class="Function Operator">↝⟦</a> <a id="5439" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a> <a id="5442" href="UTxO.TokenProvenance.html#560" class="Function Operator">⟧</a> <a id="5444" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a>
            <a id="5459" href="UTxO.TokenProvenance.html#5426" class="Function">↝tx</a> <a id="5463" class="Symbol">=</a> <a id="5465" class="Bound">or∈</a> <a id="5469" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5471" class="Bound">o′</a> <a id="5474" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5476" class="Bound">⁉≡just</a> <a id="5483" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5485" href="Data.Nat.Properties.html#3725" class="Function">≤-refl</a>

            <a id="5505" href="UTxO.TokenProvenance.html#5505" class="Function">pr′</a> <a id="5509" class="Symbol">:</a> <a id="5511" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="5522" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="5525" class="Bound">tx′</a> <a id="5529" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a>
            <a id="5544" href="UTxO.TokenProvenance.html#5505" class="Function">pr′</a> <a id="5548" class="Symbol">=</a> <a id="5550" href="UTxO.TokenProvenance.html#2351" class="Function">weakenProvenance</a> <a id="5567" class="Symbol">(</a><a id="5568" href="UTxO.Validity.html#4503" class="Function">≺′⇒≼′</a> <a id="5574" class="Symbol">{</a><a id="5575" class="Argument">l</a> <a id="5577" class="Symbol">=</a> <a id="5579" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a><a id="5581" class="Symbol">}{_</a> <a id="5585" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5587" class="Bound">vl′</a><a id="5590" class="Symbol">}</a> <a id="5592" class="Bound">vl′≺vl</a><a id="5598" class="Symbol">)</a> <a id="5600" class="Symbol">(</a><a id="5601" href="UTxO.TokenProvenance.html#4526" class="Function">go</a> <a id="5604" class="Bound">vl′</a> <a id="5608" class="Symbol">(</a><a id="5609" href="UTxO.TokenProvenance.html#4700" class="Bound">a</a> <a id="5611" class="Symbol">_</a> <a id="5613" class="Bound">vl′≺vl</a><a id="5619" class="Symbol">)</a> <a id="5621" class="Bound">o∈′</a><a id="5624" class="Symbol">)</a>

            <a id="5639" href="UTxO.TokenProvenance.html#5639" class="Function">pr</a> <a id="5642" class="Symbol">:</a> <a id="5644" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="5655" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="5658" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="5661" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a>
            <a id="5676" href="UTxO.TokenProvenance.html#5639" class="Function">pr</a> <a id="5679" class="Symbol">=</a> <a id="5681" class="Keyword">record</a> <a id="5688" class="Symbol">{</a> <a id="5690" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="5697" class="Symbol">=</a> <a id="5699" href="Prelude.Lists.html#21485" class="Function">limit</a> <a id="5705" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a> <a id="5708" href="UTxO.TokenProvenance.html#5856" class="Function">k₁</a> <a id="5711" href="UTxO.TokenProvenance.html#6004" class="Function">k₂</a> <a id="5714" class="Symbol">(</a><a id="5715" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="5722" href="UTxO.TokenProvenance.html#5505" class="Function">pr′</a><a id="5725" class="Symbol">)</a>
                        <a id="5751" class="Symbol">;</a> <a id="5753" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="5758" class="Symbol">=</a> <a id="5760" href="Prelude.Lists.html#21836" class="Postulate">∑₁-limit</a> <a id="5769" class="Symbol">{</a><a id="5770" class="Argument">xs</a> <a id="5773" class="Symbol">=</a> <a id="5775" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="5782" href="UTxO.TokenProvenance.html#5505" class="Function">pr′</a><a id="5785" class="Symbol">}</a> <a id="5787" class="Symbol">{</a><a id="5788" class="Argument">k₁</a> <a id="5791" class="Symbol">=</a> <a id="5793" href="UTxO.TokenProvenance.html#5856" class="Function">k₁</a><a id="5795" class="Symbol">}</a> <a id="5797" class="Symbol">{</a><a id="5798" class="Argument">k₂</a> <a id="5801" class="Symbol">=</a> <a id="5803" href="UTxO.TokenProvenance.html#6004" class="Function">k₂</a><a id="5805" class="Symbol">}</a> <a id="5807" class="Symbol">(</a><a id="5808" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="5813" href="UTxO.TokenProvenance.html#5505" class="Function">pr′</a><a id="5816" class="Symbol">)</a> <a id="5818" class="Symbol">}</a>
              <a id="5834" class="Keyword">where</a>
                <a id="5856" href="UTxO.TokenProvenance.html#5856" class="Function">k₁</a> <a id="5859" class="Symbol">:</a> <a id="5861" class="Symbol">∀</a> <a id="5863" class="Symbol">{</a><a id="5864" href="UTxO.TokenProvenance.html#5864" class="Bound">n</a><a id="5865" class="Symbol">}</a> <a id="5867" class="Symbol">→</a> <a id="5869" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a> <a id="5872" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="5874" href="UTxO.TokenProvenance.html#5864" class="Bound">n</a> <a id="5876" class="Symbol">→</a> <a id="5878" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="5884" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="5887" class="Bound">tx′</a> <a id="5891" href="UTxO.TokenProvenance.html#5864" class="Bound">n</a> <a id="5893" class="Symbol">→</a> <a id="5895" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="5901" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="5904" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="5907" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a>
                <a id="5926" href="UTxO.TokenProvenance.html#5856" class="Function">k₁</a> <a id="5929" class="Symbol">{</a><a id="5930" href="UTxO.TokenProvenance.html#5930" class="Bound">n</a><a id="5931" class="Symbol">}</a> <a id="5933" href="UTxO.TokenProvenance.html#5933" class="Bound">r≤</a> <a id="5936" href="UTxO.TokenProvenance.html#5936" class="Bound">tr</a> <a id="5939" class="Symbol">=</a> <a id="5941" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="5944" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∷ᵗ</a> <a id="5947" href="UTxO.TokenProvenance.html#2118" class="Function">weakenTraceⁿ</a> <a id="5960" href="UTxO.TokenProvenance.html#5933" class="Bound">r≤</a> <a id="5963" href="UTxO.TokenProvenance.html#5936" class="Bound">tr</a> <a id="5966" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∶-</a> <a id="5969" class="Symbol">(</a><a id="5970" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="5975" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="5980" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="5982" href="UTxO.TokenProvenance.html#5426" class="Function">↝tx</a><a id="5985" class="Symbol">)</a>

                <a id="6004" href="UTxO.TokenProvenance.html#6004" class="Function">k₂</a> <a id="6007" class="Symbol">:</a> <a id="6009" class="Symbol">∀</a> <a id="6011" class="Symbol">{</a><a id="6012" href="UTxO.TokenProvenance.html#6012" class="Bound">n</a><a id="6013" class="Symbol">}</a> <a id="6015" class="Symbol">→</a> <a id="6017" href="UTxO.TokenProvenance.html#6012" class="Bound">n</a> <a id="6019" href="Data.Nat.Base.html#937" class="Datatype Operator">≤</a> <a id="6021" href="UTxO.TokenProvenance.html#5395" class="Function">r◆</a> <a id="6024" class="Symbol">→</a> <a id="6026" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="6032" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="6035" class="Bound">tx′</a> <a id="6039" href="UTxO.TokenProvenance.html#6012" class="Bound">n</a> <a id="6041" class="Symbol">→</a> <a id="6043" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="6049" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="6052" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="6055" href="UTxO.TokenProvenance.html#6012" class="Bound">n</a>
                <a id="6073" href="UTxO.TokenProvenance.html#6004" class="Function">k₂</a> <a id="6076" class="Symbol">{</a><a id="6077" href="UTxO.TokenProvenance.html#6077" class="Bound">n</a><a id="6078" class="Symbol">}</a> <a id="6080" href="UTxO.TokenProvenance.html#6080" class="Bound">n≤</a> <a id="6083" href="UTxO.TokenProvenance.html#6083" class="Bound">tr</a> <a id="6086" class="Symbol">=</a> <a id="6088" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="6091" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∷ᵗ</a> <a id="6094" href="UTxO.TokenProvenance.html#6083" class="Bound">tr</a> <a id="6097" href="UTxO.TokenProvenance.html#2708" class="Function Operator">∶-</a> <a id="6100" class="Symbol">(</a><a id="6101" href="Data.List.Relation.Unary.Any.html#1174" class="InductiveConstructor">here</a> <a id="6106" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="6111" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="6113" href="UTxO.TokenProvenance.html#1681" class="Function">weaken-↝</a> <a id="6122" class="Symbol">{</a><a id="6123" class="Argument">tx</a> <a id="6126" class="Symbol">=</a> <a id="6128" class="Bound">tx′</a><a id="6131" class="Symbol">}{</a><a id="6133" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="6135" class="Symbol">}</a> <a id="6137" href="UTxO.TokenProvenance.html#5426" class="Function">↝tx</a> <a id="6141" href="UTxO.TokenProvenance.html#6080" class="Bound">n≤</a><a id="6143" class="Symbol">)</a>


        <a id="Provenance₀.Provenance₁.fromPrevs"></a><a id="6155" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a> <a id="6165" class="Symbol">:</a> <a id="6167" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="6172" class="Symbol">(</a><a id="6173" href="Data.Product.html#1369" class="Function">∃</a> <a id="6175" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="6177" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="6188" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="6191" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="6193" class="Symbol">)</a>
        <a id="6203" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a> <a id="6213" class="Symbol">=</a> <a id="6215" href="Data.List.Base.html#1582" class="Function">mapMaybe</a> <a id="6224" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="6235" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a>

        <a id="Provenance₀.Provenance₁.allPrevs"></a><a id="6247" href="UTxO.TokenProvenance.html#6247" class="Function">allPrevs</a> <a id="6256" class="Symbol">:</a> <a id="6258" href="Agda.Builtin.List.html#148" class="Datatype">List</a> <a id="6263" class="Symbol">(</a><a id="6264" href="Data.Product.html#1369" class="Function">∃</a> <a id="6266" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="6268" href="UTxO.TokenProvenance.html#1430" class="Record">Provenance</a> <a id="6279" href="UTxO.TokenProvenance.html#4777" class="Function">L₀</a> <a id="6282" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="6284" class="Symbol">)</a>
        <a id="6294" href="UTxO.TokenProvenance.html#6247" class="Function">allPrevs</a> <a id="6303" class="Symbol">=</a> <a id="6305" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a> <a id="6315" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="6318" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a>

<a id="6329" class="Comment">--</a>

        <a id="Provenance₀.Provenance₁.∑prev"></a><a id="6341" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a> <a id="6347" class="Symbol">=</a> <a id="6349" href="UTxO.Value.html#2415" class="Function">∑</a> <a id="6351" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a> <a id="6354" href="UTxO.Validity.html#6831" class="Function">resValue</a>
        <a id="Provenance₀.Provenance₁.∑all"></a><a id="6371" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a>  <a id="6377" class="Symbol">=</a> <a id="6379" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="6385" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="6388" href="UTxO.Value.html#1833" class="Function Operator">+ᶜ</a> <a id="6391" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a>

        <a id="Provenance₀.Provenance₁.pv₀"></a><a id="6406" href="UTxO.TokenProvenance.html#6406" class="Function">pv₀</a> <a id="6410" class="Symbol">:</a> <a id="6412" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a> <a id="6417" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6419" href="UTxO.TxUtilities.html#6734" class="Function">∑ᵥ</a> <a id="6422" class="Symbol">(</a><a id="6423" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="6431" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="6433" class="Symbol">)</a>
        <a id="6443" href="UTxO.TokenProvenance.html#6406" class="Function">pv₀</a> <a id="6447" class="Symbol">=</a> <a id="6449" href="UTxO.Value.html#8463" class="Function">∑M≡just</a> <a id="6457" class="Symbol">(</a><a id="6458" href="UTxO.Validity.html#8854" class="Function">∑prevs≡</a> <a id="6466" href="UTxO.TokenProvenance.html#4679" class="Bound">vl</a> <a id="6469" href="UTxO.TokenProvenance.html#4690" class="Bound">vtx</a><a id="6472" class="Symbol">)</a> <a id="6474" class="Symbol">(</a><a id="6475" href="UTxO.Validity.html#1385" class="Field">preservesValues</a> <a id="6491" href="UTxO.TokenProvenance.html#4690" class="Bound">vtx</a><a id="6494" class="Symbol">)</a>

        <a id="Provenance₀.Provenance₁.pv₁"></a><a id="6505" href="UTxO.TokenProvenance.html#6505" class="Function">pv₁</a> <a id="6509" class="Symbol">:</a> <a id="6511" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="6513" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="6515" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a> <a id="6520" href="UTxO.Value.html#2174" class="Function Operator">≥ᶜ</a> <a id="6523" href="UTxO.Types.html#4728" class="Field">value</a> <a id="6529" href="UTxO.TokenProvenance.html#4704" class="Bound">o</a>
        <a id="6539" href="UTxO.TokenProvenance.html#6505" class="Function">pv₁</a> <a id="6543" class="Symbol">=</a> <a id="6545" href="UTxO.Value.html#3898" class="Postulate">≥ᶜ-trans</a> <a id="6554" class="Symbol">{</a><a id="6555" class="Argument">x</a> <a id="6557" class="Symbol">=</a> <a id="6559" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a><a id="6563" class="Symbol">}</a> <a id="6565" class="Symbol">{</a><a id="6566" class="Argument">y</a> <a id="6568" class="Symbol">=</a> <a id="6570" href="UTxO.TxUtilities.html#6734" class="Function">∑ᵥ</a> <a id="6573" class="Symbol">(</a><a id="6574" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="6582" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="6584" class="Symbol">)}</a> <a id="6587" class="Symbol">{</a><a id="6588" class="Argument">z</a> <a id="6590" class="Symbol">=</a> <a id="6592" href="UTxO.Types.html#4728" class="Field">value</a> <a id="6598" href="UTxO.TokenProvenance.html#4704" class="Bound">o</a><a id="6599" class="Symbol">}</a> <a id="6601" class="Symbol">(</a><a id="6602" href="UTxO.Value.html#7020" class="Function">≥ᶜ-refl′</a> <a id="6611" href="UTxO.TokenProvenance.html#6406" class="Function">pv₀</a><a id="6614" class="Symbol">)</a> <a id="6616" class="Symbol">(</a><a id="6617" href="UTxO.Value.html#4775" class="Postulate">∑-≥ᶜ</a> <a id="6622" class="Symbol">{</a><a id="6623" class="Argument">fv</a> <a id="6626" class="Symbol">=</a> <a id="6628" href="UTxO.Types.html#4728" class="Field">value</a><a id="6633" class="Symbol">}</a> <a id="6635" href="UTxO.TokenProvenance.html#4707" class="Bound">o∈</a><a id="6637" class="Symbol">)</a>

        <a id="Provenance₀.Provenance₁.pv₂"></a><a id="6648" href="UTxO.TokenProvenance.html#6648" class="Function">pv₂</a> <a id="6652" class="Symbol">:</a> <a id="6654" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a> <a id="6659" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="6661" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="6663" href="UTxO.TokenProvenance.html#4798" class="Function">v</a>
        <a id="6673" href="UTxO.TokenProvenance.html#6648" class="Function">pv₂</a> <a id="6677" class="Symbol">=</a> <a id="6679" href="UTxO.Value.html#6030" class="Function">≥ᶜ-◆</a> <a id="6684" class="Symbol">{</a><a id="6685" class="Argument">x</a> <a id="6687" class="Symbol">=</a> <a id="6689" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a><a id="6693" class="Symbol">}</a> <a id="6695" class="Symbol">{</a><a id="6696" class="Argument">y</a> <a id="6698" class="Symbol">=</a> <a id="6700" href="UTxO.Types.html#4728" class="Field">value</a> <a id="6706" href="UTxO.TokenProvenance.html#4704" class="Bound">o</a><a id="6707" class="Symbol">}</a> <a id="6709" href="UTxO.TokenProvenance.html#6505" class="Function">pv₁</a>

        <a id="Provenance₀.Provenance₁.∑forge≡"></a><a id="6722" href="UTxO.TokenProvenance.html#6722" class="Function">∑forge≡</a> <a id="6730" class="Symbol">:</a> <a id="6732" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="6735" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a> <a id="6745" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6747" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="6753" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="6756" href="UTxO.Value.html#5805" class="Function Operator">◆</a>
        <a id="6766" href="UTxO.TokenProvenance.html#6722" class="Function">∑forge≡</a> <a id="6774" class="Keyword">with</a> <a id="6779" href="UTxO.Value.html#5895" class="Function Operator">◆∈?</a> <a id="6783" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="6789" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a>
        <a id="6800" class="Symbol">...</a> <a id="6804" class="Symbol">|</a> <a id="6806" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="6810" class="Symbol">_</a> <a id="6812" class="Symbol">=</a> <a id="6814" href="Data.Nat.Properties.html#12646" class="Function">+-identityʳ</a> <a id="6826" class="Symbol">(</a><a id="6827" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="6833" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="6836" href="UTxO.Value.html#5805" class="Function Operator">◆</a><a id="6837" class="Symbol">)</a>
        <a id="6847" class="Symbol">...</a> <a id="6851" class="Symbol">|</a> <a id="6853" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="6856" href="UTxO.TokenProvenance.html#6856" class="Bound">¬p</a> <a id="6859" class="Symbol">=</a> <a id="6861" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="6865" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="6867" href="Prelude.General.html#1553" class="Postulate">¬x&gt;0⇒x≡0</a> <a id="6876" href="UTxO.TokenProvenance.html#6856" class="Bound">¬p</a>

        <a id="Provenance₀.Provenance₁.∑-helper"></a><a id="6888" href="UTxO.TokenProvenance.html#6888" class="Function">∑-helper</a> <a id="6897" class="Symbol">:</a> <a id="6899" href="UTxO.TokenProvenance.html#109" class="Function">∑ℕ</a> <a id="6902" class="Symbol">(</a><a id="6903" href="Data.List.Base.html#1497" class="Function">map</a> <a id="6907" class="Symbol">(</a><a id="6908" href="UTxO.Value.html#5805" class="Function Operator">_◆</a> <a id="6911" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="6913" href="UTxO.Validity.html#6831" class="Function">resValue</a><a id="6921" class="Symbol">)</a> <a id="6923" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="6925" class="Symbol">)</a> <a id="6927" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="6929" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="6932" class="Symbol">(</a><a id="6933" href="Data.List.Base.html#1582" class="Function">mapMaybe</a> <a id="6942" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="6953" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="6955" class="Symbol">)</a>
        <a id="6965" href="UTxO.TokenProvenance.html#6888" class="Function">∑-helper</a> <a id="6974" class="Symbol">=</a> <a id="6976" href="UTxO.Value.html#6662" class="Function">∑-mapMaybe</a> <a id="6987" class="Symbol">{</a><a id="6988" class="Argument">xs</a> <a id="6991" class="Symbol">=</a> <a id="6993" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="6995" class="Symbol">}</a> <a id="6997" class="Symbol">{</a><a id="6998" class="Argument">fm</a> <a id="7001" class="Symbol">=</a> <a id="7003" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a><a id="7013" class="Symbol">}</a> <a id="7015" class="Symbol">{</a><a id="7016" class="Argument">g</a> <a id="7018" class="Symbol">=</a> <a id="7020" href="UTxO.Validity.html#6831" class="Function">resValue</a><a id="7028" class="Symbol">}</a> <a id="7030" class="Symbol">{</a><a id="7031" class="Argument">fv</a> <a id="7034" class="Symbol">=</a> <a id="7036" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a><a id="7041" class="Symbol">}</a> <a id="7043" href="UTxO.TokenProvenance.html#7077" class="Function">p₁</a> <a id="7046" href="UTxO.TokenProvenance.html#7273" class="Function">p₂</a>
          <a id="7059" class="Keyword">where</a>
            <a id="7077" href="UTxO.TokenProvenance.html#7077" class="Function">p₁</a> <a id="7080" class="Symbol">:</a> <a id="7082" class="Symbol">∀</a> <a id="7084" href="UTxO.TokenProvenance.html#7084" class="Bound">r</a> <a id="7086" class="Symbol">→</a> <a id="7088" href="Data.Maybe.html#852" class="Function">Is-nothing</a> <a id="7099" class="Symbol">(</a><a id="7100" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="7111" href="UTxO.TokenProvenance.html#7084" class="Bound">r</a><a id="7112" class="Symbol">)</a> <a id="7114" class="Symbol">→</a> <a id="7116" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="7125" href="UTxO.TokenProvenance.html#7084" class="Bound">r</a> <a id="7127" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="7129" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7131" class="Number">0</a>
            <a id="7145" href="UTxO.TokenProvenance.html#7077" class="Function">p₁</a> <a id="7148" href="UTxO.TokenProvenance.html#7148" class="Bound">r</a> <a id="7150" href="UTxO.TokenProvenance.html#7150" class="Bound">rn</a> <a id="7153" class="Keyword">with</a> <a id="7158" href="UTxO.Value.html#5895" class="Function Operator">◆∈?</a> <a id="7162" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="7171" href="UTxO.TokenProvenance.html#7148" class="Bound">r</a> <a id="7173" class="Symbol">|</a> <a id="7175" href="UTxO.TokenProvenance.html#7150" class="Bound">rn</a>
            <a id="7190" class="Symbol">...</a> <a id="7194" class="Symbol">|</a> <a id="7196" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="7200" class="Symbol">_</a> <a id="7202" class="Symbol">|</a> <a id="7204" href="Data.Maybe.Relation.Unary.All.html#1013" class="InductiveConstructor">M.All.just</a> <a id="7215" class="Symbol">()</a>
            <a id="7230" class="Symbol">...</a> <a id="7234" class="Symbol">|</a> <a id="7236" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="7239" href="UTxO.TokenProvenance.html#7239" class="Bound">¬p</a> <a id="7242" class="Symbol">|</a> <a id="7244" class="Symbol">_</a> <a id="7246" class="Symbol">=</a> <a id="7248" href="Prelude.General.html#1553" class="Postulate">¬x&gt;0⇒x≡0</a> <a id="7257" href="UTxO.TokenProvenance.html#7239" class="Bound">¬p</a>

            <a id="7273" href="UTxO.TokenProvenance.html#7273" class="Function">p₂</a> <a id="7276" class="Symbol">:</a> <a id="7278" class="Symbol">∀</a> <a id="7280" href="UTxO.TokenProvenance.html#7280" class="Bound">r</a> <a id="7282" href="UTxO.TokenProvenance.html#7282" class="Bound">v</a> <a id="7284" class="Symbol">→</a> <a id="7286" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="7297" href="UTxO.TokenProvenance.html#7280" class="Bound">r</a> <a id="7299" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7301" href="Data.Maybe.Base.html#892" class="InductiveConstructor">just</a> <a id="7306" href="UTxO.TokenProvenance.html#7282" class="Bound">v</a> <a id="7308" class="Symbol">→</a> <a id="7310" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="7319" href="UTxO.TokenProvenance.html#7280" class="Bound">r</a> <a id="7321" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="7323" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7325" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="7331" href="UTxO.TokenProvenance.html#7282" class="Bound">v</a>
            <a id="7345" href="UTxO.TokenProvenance.html#7273" class="Function">p₂</a> <a id="7348" href="UTxO.TokenProvenance.html#7348" class="Bound">r</a> <a id="7350" href="UTxO.TokenProvenance.html#7350" class="Bound">v</a> <a id="7352" href="UTxO.TokenProvenance.html#7352" class="Bound">rj</a> <a id="7355" class="Keyword">with</a> <a id="7360" href="UTxO.Value.html#5895" class="Function Operator">◆∈?</a> <a id="7364" href="UTxO.Validity.html#6831" class="Function">resValue</a> <a id="7373" href="UTxO.TokenProvenance.html#7348" class="Bound">r</a> <a id="7375" class="Symbol">|</a> <a id="7377" href="UTxO.TokenProvenance.html#7352" class="Bound">rj</a>
            <a id="7392" class="Symbol">...</a> <a id="7396" class="Symbol">|</a> <a id="7398" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="7402" class="Symbol">_</a> <a id="7404" class="Symbol">|</a> <a id="7406" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="7411" class="Symbol">=</a> <a id="7413" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
            <a id="7430" class="Symbol">...</a> <a id="7434" class="Symbol">|</a> <a id="7436" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a>  <a id="7440" class="Symbol">_</a> <a id="7442" class="Symbol">|</a> <a id="7444" class="Symbol">()</a>

        <a id="Provenance₀.Provenance₁.∑fromPrevs≡"></a><a id="7456" href="UTxO.TokenProvenance.html#7456" class="Function">∑fromPrevs≡</a> <a id="7468" class="Symbol">:</a> <a id="7470" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a> <a id="7476" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="7478" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="7480" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="7483" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a>
        <a id="7501" href="UTxO.TokenProvenance.html#7456" class="Function">∑fromPrevs≡</a> <a id="7513" class="Symbol">=</a> <a id="7515" href="Relation.Binary.PropositionalEquality.Core.html#2517" class="Function Operator">begin</a> <a id="7521" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a> <a id="7527" href="UTxO.Value.html#5805" class="Function Operator">◆</a>                     <a id="7549" href="Relation.Binary.PropositionalEquality.Core.html#2634" class="Function">≡⟨</a> <a id="7552" href="UTxO.Value.html#6578" class="Function">∑-◆</a> <a id="7556" class="Symbol">{</a><a id="7557" class="Argument">xs</a> <a id="7560" class="Symbol">=</a> <a id="7562" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="7564" class="Symbol">}</a> <a id="7566" class="Symbol">{</a><a id="7567" class="Argument">f</a> <a id="7569" class="Symbol">=</a> <a id="7571" href="UTxO.Validity.html#6831" class="Function">resValue</a><a id="7579" class="Symbol">}</a> <a id="7581" href="Relation.Binary.PropositionalEquality.Core.html#2634" class="Function">⟩</a>
                            <a id="7611" href="UTxO.TokenProvenance.html#109" class="Function">∑ℕ</a> <a id="7614" class="Symbol">(</a><a id="7615" href="Data.List.Base.html#1497" class="Function">map</a> <a id="7619" class="Symbol">(</a><a id="7620" href="UTxO.Value.html#5805" class="Function Operator">_◆</a> <a id="7623" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="7625" href="UTxO.Validity.html#6831" class="Function">resValue</a><a id="7633" class="Symbol">)</a> <a id="7635" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="7637" class="Symbol">)</a> <a id="7639" href="Relation.Binary.PropositionalEquality.Core.html#2634" class="Function">≡⟨</a> <a id="7642" href="UTxO.TokenProvenance.html#6888" class="Function">∑-helper</a> <a id="7651" href="Relation.Binary.PropositionalEquality.Core.html#2634" class="Function">⟩</a>
                            <a id="7681" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="7684" class="Symbol">(</a><a id="7685" href="Data.List.Base.html#1582" class="Function">mapMaybe</a> <a id="7694" href="UTxO.TokenProvenance.html#5053" class="Function">res→traces</a> <a id="7705" href="UTxO.TokenProvenance.html#4821" class="Function">rs</a><a id="7707" class="Symbol">)</a> <a id="7709" href="Relation.Binary.PropositionalEquality.Core.html#2575" class="Function Operator">≡⟨⟩</a>
                            <a id="7741" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="7744" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a>                <a id="7769" href="Relation.Binary.PropositionalEquality.Core.html#2816" class="Function Operator">∎</a>
                      <a id="7793" class="Keyword">where</a> <a id="7799" class="Keyword">open</a> <a id="7804" href="Relation.Binary.PropositionalEquality.Core.html#2419" class="Module">≡-Reasoning</a>

        <a id="Provenance₀.Provenance₁.∑≥"></a><a id="7825" href="UTxO.TokenProvenance.html#7825" class="Function">∑≥</a> <a id="7828" class="Symbol">:</a> <a id="7830" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="7833" href="UTxO.TokenProvenance.html#6247" class="Function">allPrevs</a> <a id="7842" href="Data.Nat.Base.html#1081" class="Function Operator">≥</a> <a id="7844" href="UTxO.TokenProvenance.html#4798" class="Function">v</a>
        <a id="7854" href="UTxO.TokenProvenance.html#7825" class="Function">∑≥</a> <a id="7857" class="Symbol">=</a> <a id="7859" href="Relation.Binary.Reasoning.Base.Triple.html#3005" class="Function Operator">begin</a> <a id="7865" href="UTxO.TokenProvenance.html#4798" class="Function">v</a>                             <a id="7895" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">≤⟨</a> <a id="7898" href="UTxO.TokenProvenance.html#6648" class="Function">pv₂</a> <a id="7902" href="Relation.Binary.Reasoning.Base.Triple.html#3740" class="Function">⟩</a>
                   <a id="7923" href="UTxO.TokenProvenance.html#6371" class="Function">∑all</a> <a id="7928" href="UTxO.Value.html#5805" class="Function Operator">◆</a>                        <a id="7953" href="Relation.Binary.Reasoning.Base.Triple.html#5018" class="Function Operator">≡⟨⟩</a>
                   <a id="7976" class="Symbol">(</a><a id="7977" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="7983" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="7986" href="UTxO.Value.html#1833" class="Function Operator">+ᶜ</a> <a id="7989" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a><a id="7994" class="Symbol">)</a> <a id="7996" href="UTxO.Value.html#5805" class="Function Operator">◆</a>         <a id="8006" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">≡⟨</a> <a id="8009" href="UTxO.Value.html#5986" class="Function">+ᶜ-◆</a> <a id="8014" class="Symbol">{</a><a id="8015" class="Argument">x</a> <a id="8017" class="Symbol">=</a> <a id="8019" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="8025" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a><a id="8027" class="Symbol">}</a> <a id="8029" class="Symbol">{</a><a id="8030" class="Argument">y</a> <a id="8032" class="Symbol">=</a> <a id="8034" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a><a id="8039" class="Symbol">}</a> <a id="8041" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">⟩</a>
                   <a id="8062" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="8068" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="8071" href="UTxO.Value.html#5805" class="Function Operator">◆</a>     <a id="8077" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="8079" href="UTxO.TokenProvenance.html#6341" class="Function">∑prev</a> <a id="8085" href="UTxO.Value.html#5805" class="Function Operator">◆</a>      <a id="8092" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">≡⟨</a> <a id="8095" href="Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a> <a id="8100" class="Symbol">(</a><a id="8101" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="8107" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="8110" href="UTxO.Value.html#5805" class="Function Operator">◆</a> <a id="8112" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+_</a><a id="8114" class="Symbol">)</a> <a id="8116" href="UTxO.TokenProvenance.html#7456" class="Function">∑fromPrevs≡</a> <a id="8128" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">⟩</a>
                   <a id="8149" href="UTxO.Types.html#7555" class="Field">forge</a> <a id="8155" href="UTxO.TokenProvenance.html#4667" class="Bound">tx</a> <a id="8158" href="UTxO.Value.html#5805" class="Function Operator">◆</a>     <a id="8164" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="8166" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8169" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a> <a id="8179" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">≡⟨</a> <a id="8182" href="Relation.Binary.PropositionalEquality.Core.html#1131" class="Function">cong</a> <a id="8187" class="Symbol">(</a><a id="8188" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">_+</a> <a id="8191" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8194" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a><a id="8203" class="Symbol">)</a> <a id="8205" class="Symbol">(</a><a id="8206" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="8210" href="UTxO.TokenProvenance.html#6722" class="Function">∑forge≡</a><a id="8217" class="Symbol">)</a> <a id="8219" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">⟩</a>
                   <a id="8240" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8243" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a> <a id="8253" href="Agda.Builtin.Nat.html#325" class="Primitive Operator">+</a> <a id="8255" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8258" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a>   <a id="8270" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">≡⟨</a> <a id="8273" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="8277" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="8279" href="Prelude.Lists.html#22002" class="Postulate">∑₁-++</a> <a id="8285" class="Symbol">{</a><a id="8286" class="Argument">xs</a> <a id="8289" class="Symbol">=</a> <a id="8291" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a><a id="8300" class="Symbol">}{</a><a id="8302" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a><a id="8311" class="Symbol">}</a> <a id="8313" href="Relation.Binary.Reasoning.Base.Triple.html#4513" class="Function">⟩</a>
                   <a id="8334" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8337" class="Symbol">(</a><a id="8338" href="UTxO.TokenProvenance.html#4848" class="Function">fromForge</a> <a id="8348" href="Data.List.Base.html#1763" class="Function Operator">++</a> <a id="8351" href="UTxO.TokenProvenance.html#6155" class="Function">fromPrevs</a><a id="8360" class="Symbol">)</a>   <a id="8364" href="Relation.Binary.Reasoning.Base.Triple.html#5018" class="Function Operator">≡⟨⟩</a>
                   <a id="8387" href="Prelude.Lists.html#21443" class="Function">∑₁</a> <a id="8390" href="UTxO.TokenProvenance.html#6247" class="Function">allPrevs</a> <a id="8399" href="Relation.Binary.Reasoning.Base.Triple.html#5114" class="Function Operator">∎</a>
              <a id="8415" class="Keyword">where</a> <a id="8421" class="Keyword">open</a> <a id="8426" href="Data.Nat.Properties.html#11242" class="Module">≤-Reasoning</a>

<a id="provenance⁺"></a><a id="8439" href="UTxO.TokenProvenance.html#8439" class="Function">provenance⁺</a> <a id="8451" class="Symbol">:</a> <a id="8453" class="Symbol">∀</a> <a id="8455" class="Symbol">{</a><a id="8456" href="UTxO.TokenProvenance.html#8456" class="Bound">tx</a> <a id="8459" href="UTxO.TokenProvenance.html#8459" class="Bound">l</a><a id="8460" class="Symbol">}</a> <a id="8462" class="Symbol">(</a><a id="8463" href="UTxO.TokenProvenance.html#8463" class="Bound">vl</a> <a id="8466" class="Symbol">:</a> <a id="8468" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="8480" class="Symbol">(</a><a id="8481" href="UTxO.TokenProvenance.html#8456" class="Bound">tx</a> <a id="8484" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8486" href="UTxO.TokenProvenance.html#8459" class="Bound">l</a><a id="8487" class="Symbol">))</a> <a id="8490" class="Symbol">{</a><a id="8491" href="UTxO.TokenProvenance.html#8491" class="Bound">o</a><a id="8492" class="Symbol">}</a> <a id="8494" class="Symbol">(</a><a id="8495" href="UTxO.TokenProvenance.html#8495" class="Bound">o∈</a> <a id="8498" class="Symbol">:</a> <a id="8500" href="UTxO.TokenProvenance.html#8491" class="Bound">o</a> <a id="8502" href="Data.List.Membership.Setoid.html#882" class="Function Operator">∈</a> <a id="8504" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="8512" href="UTxO.TokenProvenance.html#8456" class="Bound">tx</a><a id="8514" class="Symbol">)</a>
  <a id="8518" class="Symbol">→</a> <a id="8520" href="UTxO.Value.html#5879" class="Function Operator">◆∈</a> <a id="8523" href="UTxO.Types.html#4728" class="Field">value</a> <a id="8529" href="UTxO.TokenProvenance.html#8491" class="Bound">o</a>
  <a id="8533" class="Symbol">→</a> <a id="8535" href="UTxO.TokenProvenance.html#1630" class="Function Operator">∣</a> <a id="8537" href="UTxO.TokenProvenance.html#4336" class="Function">provenance</a> <a id="8548" href="UTxO.TokenProvenance.html#8463" class="Bound">vl</a> <a id="8551" href="UTxO.TokenProvenance.html#8495" class="Bound">o∈</a> <a id="8554" href="UTxO.TokenProvenance.html#1630" class="Function Operator">∣</a> <a id="8556" href="Data.Nat.Base.html#1111" class="Function Operator">&gt;</a> <a id="8558" class="Number">0</a>
<a id="8560" href="UTxO.TokenProvenance.html#8439" class="Function">provenance⁺</a> <a id="8572" href="UTxO.TokenProvenance.html#8572" class="Bound">vl</a> <a id="8575" href="UTxO.TokenProvenance.html#8575" class="Bound">o∈</a> <a id="8578" href="UTxO.TokenProvenance.html#8578" class="Bound">◆∈v</a>
  <a id="8584" class="Keyword">with</a> <a id="8589" href="UTxO.TokenProvenance.html#4336" class="Function">provenance</a> <a id="8600" href="UTxO.TokenProvenance.html#8572" class="Bound">vl</a> <a id="8603" href="UTxO.TokenProvenance.html#8575" class="Bound">o∈</a>
<a id="8606" class="Symbol">...</a> <a id="8610" class="Symbol">|</a> <a id="8612" class="Keyword">record</a> <a id="8619" class="Symbol">{</a><a id="8620" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="8627" class="Symbol">=</a> <a id="8629" href="Agda.Builtin.List.html#185" class="InductiveConstructor">[]</a><a id="8631" class="Symbol">;</a> <a id="8633" href="UTxO.TokenProvenance.html#1520" class="Field">sums</a> <a id="8638" class="Symbol">=</a> <a id="8640" href="UTxO.TokenProvenance.html#8640" class="Bound">p</a><a id="8641" class="Symbol">}</a> <a id="8643" class="Symbol">=</a> <a id="8645" href="Data.Empty.html#628" class="Function">⊥-elim</a> <a id="8652" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="8654" href="Prelude.General.html#1592" class="Postulate">x≡0⇒¬x&gt;0</a> <a id="8663" class="Symbol">(</a><a id="8664" href="Prelude.General.html#1631" class="Postulate">x≤0⇒x≡0</a> <a id="8672" href="UTxO.TokenProvenance.html#8640" class="Bound">p</a><a id="8673" class="Symbol">)</a> <a id="8675" class="Bound">◆∈v</a>
<a id="8679" class="Symbol">...</a> <a id="8683" class="Symbol">|</a> <a id="8685" class="Keyword">record</a> <a id="8692" class="Symbol">{</a><a id="8693" href="UTxO.TokenProvenance.html#1485" class="Field">traces</a> <a id="8700" class="Symbol">=</a> <a id="8702" class="Symbol">_</a> <a id="8704" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="8706" class="Symbol">_}</a>        <a id="8716" class="Symbol">=</a> <a id="8718" href="Data.Nat.Base.html#1002" class="InductiveConstructor">s≤s</a> <a id="8722" href="Data.Nat.Base.html#960" class="InductiveConstructor">z≤n</a>

<a id="origin∈"></a><a id="8727" href="UTxO.TokenProvenance.html#8727" class="Function">origin∈</a> <a id="8735" class="Symbol">:</a> <a id="8737" class="Symbol">(</a><a id="8738" href="UTxO.TokenProvenance.html#8738" class="Bound">tr</a> <a id="8741" class="Symbol">:</a> <a id="8743" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="8749" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="8751" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="8754" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a><a id="8755" class="Symbol">)</a> <a id="8757" class="Symbol">→</a> <a id="8759" href="UTxO.TokenProvenance.html#1582" class="Function">origin</a> <a id="8766" href="UTxO.TokenProvenance.html#8738" class="Bound">tr</a> <a id="8769" href="UTxO.Validity.html#3956" class="Function Operator">∈′</a> <a id="8772" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a>
<a id="8774" href="UTxO.TokenProvenance.html#8727" class="Function">origin∈</a> <a id="8782" class="Symbol">=</a> <a id="8784" href="Prelude.Lists.html#18448" class="Function">All⁺-last</a> <a id="8794" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="8796" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a>

<a id="mkPendingMPS"></a><a id="8804" href="UTxO.TokenProvenance.html#8804" class="Function">mkPendingMPS</a> <a id="8817" class="Symbol">:</a> <a id="8819" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="8825" href="UTxO.TokenProvenance.html#493" class="Generalizable">L</a> <a id="8827" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="8830" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a> <a id="8832" class="Symbol">→</a> <a id="8834" href="UTxO.Hashing.Base.html#214" class="Function">HashId</a> <a id="8841" class="Symbol">→</a> <a id="8843" href="UTxO.Types.html#5298" class="Function">PendingMPS</a>
<a id="8854" href="UTxO.TokenProvenance.html#8804" class="Function">mkPendingMPS</a> <a id="8867" href="UTxO.TokenProvenance.html#8867" class="Bound">tr</a> <a id="8870" class="Symbol">=</a> <a id="8872" href="UTxO.TxUtilities.html#6316" class="Function">toPendingMPS</a> <a id="8885" class="Symbol">(</a><a id="8886" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="8892" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="8894" href="Prelude.Lists.html#20251" class="Function">∈⇒Suffix</a> <a id="8903" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="8905" href="UTxO.TokenProvenance.html#8727" class="Function">origin∈</a> <a id="8913" href="UTxO.TokenProvenance.html#8867" class="Bound">tr</a><a id="8915" class="Symbol">)</a> <a id="8917" class="Symbol">(</a><a id="8918" href="UTxO.TokenProvenance.html#1582" class="Function">origin</a> <a id="8925" href="UTxO.TokenProvenance.html#8867" class="Bound">tr</a><a id="8927" class="Symbol">)</a>

<a id="mps≡"></a><a id="8930" href="UTxO.TokenProvenance.html#8930" class="Function">mps≡</a> <a id="8935" class="Symbol">:</a> <a id="8937" class="Symbol">∀</a> <a id="8939" class="Symbol">{</a><a id="8940" href="UTxO.TokenProvenance.html#8940" class="Bound">L</a> <a id="8942" href="UTxO.TokenProvenance.html#8942" class="Bound">L′</a><a id="8944" class="Symbol">}</a> <a id="8946" class="Symbol">(</a><a id="8947" href="UTxO.TokenProvenance.html#8947" class="Bound">l≺</a> <a id="8950" class="Symbol">:</a> <a id="8952" href="UTxO.TokenProvenance.html#8942" class="Bound">L′</a> <a id="8955" href="UTxO.Validity.html#4236" class="Function Operator">≼′</a> <a id="8958" href="UTxO.TokenProvenance.html#8940" class="Bound">L</a><a id="8959" class="Symbol">)</a> <a id="8961" class="Symbol">(</a><a id="8962" href="UTxO.TokenProvenance.html#8962" class="Bound">tr</a> <a id="8965" class="Symbol">:</a> <a id="8967" href="UTxO.TokenProvenance.html#1251" class="Record">Trace</a> <a id="8973" href="UTxO.TokenProvenance.html#8942" class="Bound">L′</a> <a id="8976" href="UTxO.TokenProvenance.html#516" class="Generalizable">tx</a> <a id="8979" href="UTxO.TokenProvenance.html#528" class="Generalizable">n</a><a id="8980" class="Symbol">)</a>
  <a id="8984" class="Symbol">→</a> <a id="8986" class="Symbol">(</a><a id="8987" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="8993" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="8995" href="Prelude.Lists.html#20251" class="Function">∈⇒Suffix</a> <a id="9004" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="9006" href="UTxO.TokenProvenance.html#8727" class="Function">origin∈</a> <a id="9014" class="Symbol">{</a><a id="9015" class="Argument">L</a> <a id="9017" class="Symbol">=</a> <a id="9019" href="UTxO.TokenProvenance.html#8940" class="Bound">L</a><a id="9020" class="Symbol">}</a> <a id="9022" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="9024" href="UTxO.TokenProvenance.html#1857" class="Function">weakenTrace</a> <a id="9036" href="UTxO.TokenProvenance.html#8947" class="Bound">l≺</a> <a id="9039" href="UTxO.TokenProvenance.html#8962" class="Bound">tr</a><a id="9041" class="Symbol">)</a>
  <a id="9045" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="9047" class="Symbol">(</a><a id="9048" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="9054" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="9056" href="Prelude.Lists.html#20251" class="Function">∈⇒Suffix</a> <a id="9065" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="9067" href="UTxO.TokenProvenance.html#8727" class="Function">origin∈</a> <a id="9075" href="UTxO.TokenProvenance.html#8962" class="Bound">tr</a><a id="9077" class="Symbol">)</a>
<a id="9079" href="UTxO.TokenProvenance.html#8930" class="Function">mps≡</a> <a id="9084" class="Symbol">{</a><a id="9085" class="Argument">L</a> <a id="9087" class="Symbol">=</a> <a id="9089" href="UTxO.TokenProvenance.html#9089" class="Bound">L</a><a id="9090" class="Symbol">}{</a><a id="9092" href="UTxO.TokenProvenance.html#9092" class="Bound">L′</a><a id="9094" class="Symbol">}</a> <a id="9096" href="UTxO.TokenProvenance.html#9096" class="Bound">l≺</a> <a id="9099" href="UTxO.TokenProvenance.html#9099" class="Bound">tr</a> <a id="9102" class="Symbol">=</a> <a id="9104" href="Prelude.Lists.html#20530" class="Postulate">proj₁∘∈⇒Suffix≡</a> <a id="9120" class="Symbol">{</a><a id="9121" class="Argument">xs</a> <a id="9124" class="Symbol">=</a> <a id="9126" href="UTxO.TokenProvenance.html#1308" class="Field">txs</a> <a id="9130" href="UTxO.TokenProvenance.html#9099" class="Bound">tr</a><a id="9132" class="Symbol">}{</a><a id="9134" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="9140" href="UTxO.TokenProvenance.html#9092" class="Bound">L′</a><a id="9142" class="Symbol">}{</a><a id="9144" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="9150" href="UTxO.TokenProvenance.html#9089" class="Bound">L</a><a id="9151" class="Symbol">}</a> <a id="9153" class="Symbol">(</a><a id="9154" href="UTxO.TokenProvenance.html#1330" class="Field">trace∈</a> <a id="9161" href="UTxO.TokenProvenance.html#9099" class="Bound">tr</a><a id="9163" class="Symbol">)</a> <a id="9165" href="UTxO.TokenProvenance.html#9096" class="Bound">l≺</a>
</pre></body></html>