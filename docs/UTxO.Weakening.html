<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.Weakening</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Weakening: Translating a valid ledger to a &quot;larger&quot; address space.</a>
<a id="144" class="Comment">------------------------------------------------------------------------</a>

<a id="218" class="Keyword">open</a> <a id="223" class="Keyword">import</a> <a id="230" href="Function.html" class="Module">Function</a> <a id="239" class="Keyword">using</a> <a id="245" class="Symbol">(</a><a id="246" href="Function.html#1085" class="Function Operator">_âˆ˜_</a><a id="249" class="Symbol">)</a>
<a id="251" class="Keyword">open</a> <a id="256" class="Keyword">import</a> <a id="263" href="Function.Injection.html" class="Module">Function.Injection</a> <a id="282" class="Keyword">using</a> <a id="288" class="Symbol">(</a><a id="289" class="Keyword">module</a> <a id="296" href="Function.Injection.html#994" class="Module">Injection</a><a id="305" class="Symbol">;</a> <a id="307" href="Function.Injection.html#1399" class="Function Operator">_â†£_</a><a id="310" class="Symbol">)</a>

<a id="313" class="Keyword">open</a> <a id="318" class="Keyword">import</a> <a id="325" href="Data.Unit.html" class="Module">Data.Unit</a>    <a id="338" class="Keyword">using</a> <a id="344" class="Symbol">(</a><a id="345" href="Agda.Builtin.Unit.html#174" class="InductiveConstructor">tt</a><a id="347" class="Symbol">)</a>
<a id="349" class="Keyword">open</a> <a id="354" class="Keyword">import</a> <a id="361" href="Data.Bool.html" class="Module">Data.Bool</a>    <a id="374" class="Keyword">using</a> <a id="380" class="Symbol">(</a><a id="381" href="Data.Bool.Base.html#1240" class="Function">T</a><a id="382" class="Symbol">)</a>
<a id="384" class="Keyword">open</a> <a id="389" class="Keyword">import</a> <a id="396" href="Data.Nat.html" class="Module">Data.Nat</a>     <a id="409" class="Keyword">using</a> <a id="415" class="Symbol">(</a><a id="416" href="Data.Nat.Base.html#1076" class="Function Operator">_&lt;_</a><a id="419" class="Symbol">)</a>
<a id="421" class="Keyword">open</a> <a id="426" class="Keyword">import</a> <a id="433" href="Data.Product.html" class="Module">Data.Product</a> <a id="446" class="Keyword">using</a> <a id="452" class="Symbol">(</a><a id="453" href="Data.Product.html#1162" class="Function Operator">_Ã—_</a><a id="456" class="Symbol">;</a> <a id="458" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">_,_</a><a id="461" class="Symbol">;</a> <a id="463" href="Data.Product.html#1364" class="Function">âˆƒ</a><a id="464" class="Symbol">;</a> <a id="466" href="Data.Product.html#1783" class="Function">âˆƒ-syntax</a><a id="474" class="Symbol">)</a>

<a id="477" class="Keyword">open</a> <a id="482" class="Keyword">import</a> <a id="489" href="Data.Fin.html" class="Module">Data.Fin</a> <a id="498" class="Keyword">using</a> <a id="504" class="Symbol">(</a><a id="505" href="Data.Fin.Base.html#951" class="Datatype">Fin</a><a id="508" class="Symbol">;</a> <a id="510" href="Data.Fin.Base.html#1077" class="Function">toâ„•</a><a id="513" class="Symbol">;</a> <a id="515" href="Data.Fin.Base.html#1798" class="Function">fromâ„•â‰¤</a><a id="521" class="Symbol">;</a> <a id="523" href="Data.Fin.Base.html#3051" class="Function">injectâ‰¤</a><a id="530" class="Symbol">)</a>
<a id="532" class="Keyword">open</a> <a id="537" class="Keyword">import</a> <a id="544" href="Data.Fin.Properties.html" class="Module">Data.Fin.Properties</a> <a id="564" class="Keyword">using</a> <a id="570" class="Symbol">(</a><a id="571" href="Data.Fin.Properties.html#2448" class="Function">toâ„•-injective</a><a id="584" class="Symbol">;</a> <a id="586" href="Data.Fin.Properties.html#4084" class="Function">toâ„•-fromâ„•â‰¤</a><a id="596" class="Symbol">;</a> <a id="598" href="Data.Fin.Properties.html#11451" class="Function">toâ„•-injectâ‰¤</a><a id="609" class="Symbol">)</a>

<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="Data.List.Properties.html" class="Module">Data.List.Properties</a> <a id="645" class="Keyword">using</a> <a id="651" class="Symbol">(</a><a id="652" href="Data.List.Properties.html#3222" class="Function">length-map</a><a id="662" class="Symbol">;</a> <a id="664" href="Data.List.Properties.html#3367" class="Function">map-compose</a><a id="675" class="Symbol">;</a> <a id="677" href="Data.List.Properties.html#2523" class="Function">map-idâ‚‚</a><a id="684" class="Symbol">)</a>
<a id="686" class="Keyword">open</a> <a id="691" class="Keyword">import</a> <a id="698" href="Data.List.Membership.Propositional.html" class="Module">Data.List.Membership.Propositional</a> <a id="733" class="Keyword">using</a> <a id="739" class="Symbol">(</a><a id="740" href="Data.List.Membership.Setoid.html#877" class="Function Operator">_âˆˆ_</a><a id="743" class="Symbol">;</a> <a id="745" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a><a id="753" class="Symbol">)</a>
<a id="755" class="Keyword">open</a> <a id="760" class="Keyword">import</a> <a id="767" href="Data.List.Relation.Unary.Any.html" class="Module">Data.List.Relation.Unary.Any</a> <a id="796" class="Keyword">using</a> <a id="802" class="Symbol">(</a><a id="803" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a><a id="806" class="Symbol">;</a> <a id="808" href="Data.List.Relation.Unary.Any.html#1115" class="InductiveConstructor">here</a><a id="812" class="Symbol">;</a> <a id="814" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a><a id="819" class="Symbol">)</a>
<a id="821" class="Keyword">open</a> <a id="826" class="Keyword">import</a> <a id="833" href="Data.List.Relation.Pointwise.html" class="Module">Data.List.Relation.Pointwise</a> <a id="862" class="Keyword">using</a> <a id="868" class="Symbol">(</a><a id="869" href="Data.List.Relation.Binary.Pointwise.html#977" class="Datatype">Pointwise</a><a id="878" class="Symbol">;</a> <a id="880" href="Data.List.Relation.Binary.Pointwise.html#10989" class="Function">Pointwise-â‰¡â‡’â‰¡</a><a id="893" class="Symbol">)</a>

<a id="896" class="Keyword">open</a> <a id="901" class="Keyword">import</a> <a id="908" href="Relation.Binary.html" class="Module">Relation.Binary</a> <a id="924" class="Keyword">using</a> <a id="930" class="Symbol">(</a><a id="931" href="Relation.Binary.Core.html#5557" class="Function">Decidable</a><a id="940" class="Symbol">)</a>
<a id="942" class="Keyword">open</a> <a id="947" class="Keyword">import</a> <a id="954" href="Relation.Nullary.Decidable.html" class="Module">Relation.Nullary.Decidable</a> <a id="981" class="Keyword">using</a> <a id="987" class="Symbol">(</a><a id="988" href="Relation.Nullary.Decidable.html#1328" class="Function">toWitness</a><a id="997" class="Symbol">)</a>

<a id="1000" class="Keyword">import</a> <a id="1007" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="1045" class="Symbol">as</a> <a id="1048" class="Module">Eq</a>
<a id="1051" class="Keyword">open</a> <a id="1056" href="Relation.Binary.PropositionalEquality.html" class="Module">Eq</a> <a id="1059" class="Keyword">using</a> <a id="1065" class="Symbol">(</a><a id="1066" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_â‰¡_</a><a id="1069" class="Symbol">;</a> <a id="1071" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="1075" class="Symbol">;</a> <a id="1077" href="Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a><a id="1082" class="Symbol">;</a> <a id="1084" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a><a id="1087" class="Symbol">;</a> <a id="1089" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a><a id="1093" class="Symbol">)</a>
<a id="1095" class="Keyword">open</a> <a id="1100" href="Relation.Binary.PropositionalEquality.Core.html#2499" class="Module">Eq.â‰¡-Reasoning</a> <a id="1115" class="Keyword">using</a> <a id="1121" class="Symbol">(</a><a id="1122" href="Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin_</a><a id="1128" class="Symbol">;</a> <a id="1130" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">_â‰¡âŸ¨âŸ©_</a><a id="1135" class="Symbol">;</a> <a id="1137" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">_â‰¡âŸ¨_âŸ©_</a><a id="1143" class="Symbol">;</a> <a id="1145" href="Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">_âˆ</a><a id="1147" class="Symbol">)</a>

<a id="1150" class="Keyword">open</a> <a id="1155" class="Keyword">import</a> <a id="1162" href="UTxO.Types.html" class="Module">UTxO.Types</a>
<a id="1173" class="Keyword">open</a> <a id="1178" class="Keyword">import</a> <a id="1185" href="Hashing.Base.html" class="Module">Hashing.Base</a>
<a id="1198" class="Keyword">open</a> <a id="1203" class="Keyword">import</a> <a id="1210" href="Hashing.Types.html" class="Module">Hashing.Types</a>
<a id="1224" class="Keyword">open</a> <a id="1229" class="Keyword">import</a> <a id="1236" href="Hashing.MetaHash.html" class="Module">Hashing.MetaHash</a>

<a id="1254" class="Keyword">module</a> <a id="1261" href="UTxO.Weakening.html" class="Module">UTxO.Weakening</a>
  <a id="1278" class="Symbol">(</a><a id="1279" href="UTxO.Weakening.html#1279" class="Bound">ğ”¸</a> <a id="1281" class="Symbol">:</a> <a id="1283" class="PrimitiveType">Set</a><a id="1286" class="Symbol">)</a> <a id="1288" class="Symbol">(</a><a id="1289" href="UTxO.Weakening.html#1289" class="Bound Operator">_â™¯áµƒ</a> <a id="1293" class="Symbol">:</a> <a id="1295" href="Hashing.Base.html#621" class="Function">Hash</a> <a id="1300" href="UTxO.Weakening.html#1279" class="Bound">ğ”¸</a><a id="1301" class="Symbol">)</a> <a id="1303" class="Symbol">(</a><a id="1304" href="UTxO.Weakening.html#1304" class="Bound Operator">_â‰Ÿáµƒ_</a> <a id="1309" class="Symbol">:</a> <a id="1311" href="Relation.Binary.Core.html#5557" class="Function">Decidable</a> <a id="1321" class="Symbol">{</a><a id="1322" class="Argument">A</a> <a id="1324" class="Symbol">=</a> <a id="1326" href="UTxO.Weakening.html#1279" class="Bound">ğ”¸</a><a id="1327" class="Symbol">}</a> <a id="1329" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_â‰¡_</a><a id="1332" class="Symbol">)</a> <a id="1334" class="Comment">-- smaller address space</a>
  <a id="1361" class="Symbol">(</a><a id="1362" href="UTxO.Weakening.html#1362" class="Bound">ğ”¹</a> <a id="1364" class="Symbol">:</a> <a id="1366" class="PrimitiveType">Set</a><a id="1369" class="Symbol">)</a> <a id="1371" class="Symbol">(</a><a id="1372" href="UTxO.Weakening.html#1372" class="Bound Operator">_â™¯áµ‡</a> <a id="1376" class="Symbol">:</a> <a id="1378" href="Hashing.Base.html#621" class="Function">Hash</a> <a id="1383" href="UTxO.Weakening.html#1362" class="Bound">ğ”¹</a><a id="1384" class="Symbol">)</a> <a id="1386" class="Symbol">(</a><a id="1387" href="UTxO.Weakening.html#1387" class="Bound Operator">_â‰Ÿáµ‡_</a> <a id="1392" class="Symbol">:</a> <a id="1394" href="Relation.Binary.Core.html#5557" class="Function">Decidable</a> <a id="1404" class="Symbol">{</a><a id="1405" class="Argument">A</a> <a id="1407" class="Symbol">=</a> <a id="1409" href="UTxO.Weakening.html#1362" class="Bound">ğ”¹</a><a id="1410" class="Symbol">}</a> <a id="1412" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_â‰¡_</a><a id="1415" class="Symbol">)</a> <a id="1417" class="Comment">-- larger address space</a>
  <a id="1443" class="Symbol">(</a><a id="1444" href="UTxO.Weakening.html#1444" class="Bound">Aâ†ªB</a> <a id="1448" class="Symbol">:</a> <a id="1450" href="UTxO.Weakening.html#1279" class="Bound">ğ”¸</a> <a id="1452" href="Hashing.Base.html#921" class="Record Operator">,</a> <a id="1454" href="UTxO.Weakening.html#1289" class="Bound Operator">_â™¯áµƒ</a> <a id="1458" href="Hashing.Base.html#921" class="Record Operator">â†ª</a> <a id="1460" href="UTxO.Weakening.html#1362" class="Bound">ğ”¹</a> <a id="1462" href="Hashing.Base.html#921" class="Record Operator">,</a> <a id="1464" href="UTxO.Weakening.html#1372" class="Bound Operator">_â™¯áµ‡</a><a id="1467" class="Symbol">)</a>
  <a id="1471" class="Keyword">where</a>

<a id="1478" class="Keyword">import</a> <a id="1485" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>      <a id="1504" href="UTxO.Weakening.html#1279" class="Bound">ğ”¸</a> <a id="1506" href="UTxO.Weakening.html#1289" class="Bound Operator">_â™¯áµƒ</a> <a id="1510" href="UTxO.Weakening.html#1304" class="Bound Operator">_â‰Ÿáµƒ_</a> <a id="1515" class="Symbol">as</a> <a id="A"></a><a id="1518" href="UTxO.Weakening.html#1518" class="Module">A</a>
<a id="1520" class="Keyword">open</a> <a id="1525" class="Keyword">import</a> <a id="1532" href="UTxO.Validity.html" class="Module">UTxO.Validity</a> <a id="1546" href="UTxO.Weakening.html#1362" class="Bound">ğ”¹</a> <a id="1548" href="UTxO.Weakening.html#1372" class="Bound Operator">_â™¯áµ‡</a> <a id="1552" href="UTxO.Weakening.html#1387" class="Bound Operator">_â‰Ÿáµ‡_</a> <a id="1557" class="Symbol">as</a> <a id="B"></a><a id="1560" href="UTxO.Weakening.html#1560" class="Module">B</a>

<a id="1563" class="Comment">-- Weakening operations.</a>
<a id="weakenTxOutput"></a><a id="1588" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="1603" class="Symbol">:</a> <a id="1605" href="UTxO.Ledger.html#514" class="Record">A.TxOutput</a> <a id="1616" class="Symbol">â†’</a> <a id="1618" href="UTxO.Ledger.html#514" class="Record">B.TxOutput</a>
<a id="1629" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="1644" class="Keyword">record</a> <a id="1651" class="Symbol">{</a> <a id="1653" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="1659" class="Symbol">=</a> <a id="1661" href="UTxO.Weakening.html#1661" class="Bound">v</a> <a id="1663" class="Symbol">;</a> <a id="1665" href="UTxO.Ledger.html#609" class="Field">dataScript</a> <a id="1676" class="Symbol">=</a> <a id="1678" href="UTxO.Weakening.html#1678" class="Bound">ds</a> <a id="1681" class="Symbol">;</a> <a id="1683" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="1691" class="Symbol">=</a> <a id="1693" href="UTxO.Weakening.html#1693" class="Bound">addr</a> <a id="1698" class="Symbol">}</a>
             <a id="1713" class="Symbol">=</a> <a id="1715" class="Keyword">record</a> <a id="1722" class="Symbol">{</a> <a id="1724" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="1730" class="Symbol">=</a> <a id="1732" href="UTxO.Weakening.html#1661" class="Bound">v</a> <a id="1734" class="Symbol">;</a> <a id="1736" href="UTxO.Ledger.html#609" class="Field">dataScript</a> <a id="1747" class="Symbol">=</a> <a id="1749" href="UTxO.Weakening.html#1678" class="Bound">ds</a> <a id="1752" class="Symbol">;</a> <a id="1754" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="1762" class="Symbol">=</a> <a id="1764" href="UTxO.Weakening.html#1444" class="Bound">Aâ†ªB</a> <a id="1768" href="Hashing.Base.html#1127" class="Function Operator">âŸ¨$âŸ©</a> <a id="1772" href="UTxO.Weakening.html#1693" class="Bound">addr</a><a id="1776" class="Symbol">}</a>

<a id="weakenTx"></a><a id="1779" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="1788" class="Symbol">:</a> <a id="1790" href="UTxO.Ledger.html#668" class="Record">A.Tx</a> <a id="1795" class="Symbol">â†’</a> <a id="1797" href="UTxO.Ledger.html#668" class="Record">B.Tx</a>
<a id="1802" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="1811" class="Keyword">record</a> <a id="1818" class="Symbol">{</a> <a id="1820" href="UTxO.Ledger.html#695" class="Field">inputs</a>  <a id="1828" class="Symbol">=</a> <a id="1830" href="UTxO.Weakening.html#1830" class="Bound">inputs</a>
                <a id="1853" class="Symbol">;</a> <a id="1855" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="1863" class="Symbol">=</a> <a id="1865" href="UTxO.Weakening.html#1865" class="Bound">outputs</a>
                <a id="1889" class="Symbol">;</a> <a id="1891" href="UTxO.Ledger.html#772" class="Field">forge</a>   <a id="1899" class="Symbol">=</a> <a id="1901" href="UTxO.Weakening.html#1901" class="Bound">forge</a>
                <a id="1923" class="Symbol">;</a> <a id="1925" href="UTxO.Ledger.html#792" class="Field">fee</a>     <a id="1933" class="Symbol">=</a> <a id="1935" href="UTxO.Weakening.html#1935" class="Bound">fee</a> <a id="1939" class="Symbol">}</a>
       <a id="1948" class="Symbol">=</a> <a id="1950" class="Keyword">record</a> <a id="1957" class="Symbol">{</a> <a id="1959" href="UTxO.Ledger.html#695" class="Field">inputs</a>  <a id="1967" class="Symbol">=</a> <a id="1969" href="UTxO.Weakening.html#1830" class="Bound">inputs</a>
                <a id="1992" class="Symbol">;</a> <a id="1994" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="2002" class="Symbol">=</a> <a id="2004" href="Data.List.Base.html#1304" class="Function">map</a> <a id="2008" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="2023" href="UTxO.Weakening.html#1865" class="Bound">outputs</a>
                <a id="2047" class="Symbol">;</a> <a id="2049" href="UTxO.Ledger.html#772" class="Field">forge</a>   <a id="2057" class="Symbol">=</a> <a id="2059" href="UTxO.Weakening.html#1901" class="Bound">forge</a>
                <a id="2081" class="Symbol">;</a> <a id="2083" href="UTxO.Ledger.html#792" class="Field">fee</a>     <a id="2091" class="Symbol">=</a> <a id="2093" href="UTxO.Weakening.html#1935" class="Bound">fee</a> <a id="2097" class="Symbol">}</a>

<a id="weakenLedger"></a><a id="2100" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="2113" class="Symbol">:</a> <a id="2115" href="UTxO.Ledger.html#825" class="Function">A.Ledger</a> <a id="2124" class="Symbol">â†’</a> <a id="2126" href="UTxO.Ledger.html#825" class="Function">B.Ledger</a>
<a id="2135" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="2148" class="Symbol">=</a> <a id="2150" href="Data.List.Base.html#1304" class="Function">map</a> <a id="2154" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a>

<a id="2164" class="Comment">-- Hashes should be preserved.</a>
<a id="weakenTxOutput-preservesâ™¯"></a><a id="2195" href="UTxO.Weakening.html#2195" class="Function">weakenTxOutput-preservesâ™¯</a> <a id="2221" class="Symbol">:</a> <a id="2223" class="Symbol">âˆ€</a> <a id="2225" class="Symbol">(</a><a id="2226" href="UTxO.Weakening.html#2226" class="Bound">o</a> <a id="2228" class="Symbol">:</a> <a id="2230" href="UTxO.Ledger.html#514" class="Record">A.TxOutput</a><a id="2240" class="Symbol">)</a> <a id="2242" class="Symbol">â†’</a> <a id="2244" class="Symbol">(</a><a id="2245" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="2253" class="Symbol">(</a><a id="2254" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="2269" href="UTxO.Weakening.html#2226" class="Bound">o</a><a id="2270" class="Symbol">))</a> <a id="2273" href="UTxO.Weakening.html#1372" class="Bound Operator">â™¯áµ‡</a> <a id="2276" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="2278" class="Symbol">(</a><a id="2279" href="UTxO.Ledger.html#567" class="Field">A.address</a> <a id="2289" href="UTxO.Weakening.html#2226" class="Bound">o</a><a id="2290" class="Symbol">)</a> <a id="2292" href="UTxO.Weakening.html#1289" class="Bound Operator">â™¯áµƒ</a>
<a id="2295" href="UTxO.Weakening.html#2195" class="Function">weakenTxOutput-preservesâ™¯</a> <a id="2321" href="UTxO.Weakening.html#2321" class="Bound">o</a> <a id="2323" class="Keyword">rewrite</a> <a id="2331" class="Symbol">(</a><a id="2332" href="Hashing.Base.html#1050" class="Field">preservesâ™¯</a> <a id="2343" href="UTxO.Weakening.html#1444" class="Bound">Aâ†ªB</a> <a id="2347" class="Symbol">(</a><a id="2348" href="UTxO.Ledger.html#567" class="Field">A.address</a> <a id="2358" href="UTxO.Weakening.html#2321" class="Bound">o</a><a id="2359" class="Symbol">))</a> <a id="2362" class="Symbol">=</a> <a id="2364" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

<a id="mapWeakenTxOutput-preservesâ™¯"></a><a id="2370" href="UTxO.Weakening.html#2370" class="Function">mapWeakenTxOutput-preservesâ™¯</a> <a id="2399" class="Symbol">:</a> <a id="2401" class="Symbol">âˆ€</a> <a id="2403" class="Symbol">(</a><a id="2404" href="UTxO.Weakening.html#2404" class="Bound">os</a> <a id="2407" class="Symbol">:</a> <a id="2409" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="2414" href="UTxO.Ledger.html#514" class="Record">A.TxOutput</a><a id="2424" class="Symbol">)</a> <a id="2426" class="Symbol">â†’</a> <a id="2428" href="Data.List.Base.html#1304" class="Function">map</a> <a id="2432" href="Hashing.UTxO.html#547" class="Function Operator">_â™¯â‚’</a> <a id="2436" class="Symbol">(</a><a id="2437" href="Data.List.Base.html#1304" class="Function">map</a> <a id="2441" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="2456" href="UTxO.Weakening.html#2404" class="Bound">os</a><a id="2458" class="Symbol">)</a> <a id="2460" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="2462" href="Data.List.Base.html#1304" class="Function">map</a> <a id="2466" href="Hashing.UTxO.html#547" class="Function Operator">A._â™¯â‚’</a> <a id="2472" href="UTxO.Weakening.html#2404" class="Bound">os</a>
<a id="2475" href="UTxO.Weakening.html#2370" class="Function">mapWeakenTxOutput-preservesâ™¯</a> <a id="2504" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a> <a id="2507" class="Symbol">=</a> <a id="2509" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
<a id="2514" href="UTxO.Weakening.html#2370" class="Function">mapWeakenTxOutput-preservesâ™¯</a> <a id="2543" class="Symbol">(</a><a id="2544" href="UTxO.Weakening.html#2544" class="Bound">o</a> <a id="2546" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">âˆ·</a> <a id="2548" href="UTxO.Weakening.html#2548" class="Bound">os</a><a id="2550" class="Symbol">)</a>
  <a id="2554" class="Keyword">rewrite</a> <a id="2562" href="UTxO.Weakening.html#2370" class="Function">mapWeakenTxOutput-preservesâ™¯</a> <a id="2591" href="UTxO.Weakening.html#2548" class="Bound">os</a> <a id="2594" class="Symbol">|</a> <a id="2596" href="UTxO.Weakening.html#2195" class="Function">weakenTxOutput-preservesâ™¯</a> <a id="2622" href="UTxO.Weakening.html#2544" class="Bound">o</a> <a id="2624" class="Symbol">=</a> <a id="2626" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

<a id="weakenTx-preservesâ™¯"></a><a id="2632" href="UTxO.Weakening.html#2632" class="Function">weakenTx-preservesâ™¯</a> <a id="2652" class="Symbol">:</a> <a id="2654" class="Symbol">âˆ€</a> <a id="2656" class="Symbol">(</a><a id="2657" href="UTxO.Weakening.html#2657" class="Bound">tx</a> <a id="2660" class="Symbol">:</a> <a id="2662" href="UTxO.Ledger.html#668" class="Record">A.Tx</a><a id="2666" class="Symbol">)</a> <a id="2668" class="Symbol">â†’</a> <a id="2670" class="Symbol">(</a><a id="2671" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="2680" href="UTxO.Weakening.html#2657" class="Bound">tx</a><a id="2682" class="Symbol">)</a> <a id="2684" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a> <a id="2688" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="2690" href="UTxO.Weakening.html#2657" class="Bound">tx</a> <a id="2693" href="Hashing.UTxO.html#657" class="Function Operator">A.â™¯â‚œâ‚“</a>
<a id="2699" href="UTxO.Weakening.html#2632" class="Function">weakenTx-preservesâ™¯</a> <a id="2719" href="UTxO.Weakening.html#2719" class="Bound">tx</a> <a id="2722" class="Keyword">rewrite</a> <a id="2730" href="UTxO.Weakening.html#2370" class="Function">mapWeakenTxOutput-preservesâ™¯</a> <a id="2759" class="Symbol">(</a><a id="2760" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="2770" href="UTxO.Weakening.html#2719" class="Bound">tx</a><a id="2772" class="Symbol">)</a> <a id="2774" class="Symbol">=</a> <a id="2776" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

<a id="weakening"></a><a id="2782" href="UTxO.Weakening.html#2782" class="Function">weakening</a> <a id="2792" class="Symbol">:</a> <a id="2794" class="Symbol">âˆ€</a> <a id="2796" class="Symbol">{</a><a id="2797" href="UTxO.Weakening.html#2797" class="Bound">tx</a> <a id="2800" class="Symbol">:</a> <a id="2802" href="UTxO.Ledger.html#668" class="Record">A.Tx</a><a id="2806" class="Symbol">}</a> <a id="2808" class="Symbol">{</a><a id="2809" href="UTxO.Weakening.html#2809" class="Bound">l</a> <a id="2811" class="Symbol">:</a> <a id="2813" href="UTxO.Ledger.html#825" class="Function">A.Ledger</a><a id="2821" class="Symbol">}</a>

          <a id="2834" class="Symbol">â†’</a> <a id="2836" href="UTxO.Validity.html#649" class="Record">A.IsValidTx</a> <a id="2848" href="UTxO.Weakening.html#2797" class="Bound">tx</a> <a id="2851" href="UTxO.Weakening.html#2809" class="Bound">l</a>
            <a id="2865" class="Comment">------------------------------------------------</a>
          <a id="2924" class="Symbol">â†’</a> <a id="2926" href="UTxO.Validity.html#649" class="Record">B.IsValidTx</a> <a id="2938" class="Symbol">(</a><a id="2939" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="2948" href="UTxO.Weakening.html#2797" class="Bound">tx</a><a id="2950" class="Symbol">)</a> <a id="2952" class="Symbol">(</a><a id="2953" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="2966" href="UTxO.Weakening.html#2809" class="Bound">l</a><a id="2967" class="Symbol">)</a>

<a id="2970" href="UTxO.Weakening.html#2782" class="Function">weakening</a> <a id="2980" class="Symbol">{</a><a id="2981" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="2983" class="Symbol">}</a> <a id="2985" class="Symbol">{</a><a id="2986" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="2987" class="Symbol">}</a>
    <a id="2993" class="Keyword">record</a>
      <a id="3006" class="Symbol">{</a> <a id="3008" href="UTxO.Validity.html#708" class="Field">validTxRefs</a>          <a id="3029" class="Symbol">=</a> <a id="3031" href="UTxO.Weakening.html#3031" class="Bound">vtx</a>
      <a id="3041" class="Symbol">;</a> <a id="3043" href="UTxO.Validity.html#802" class="Field">validOutputIndices</a>   <a id="3064" class="Symbol">=</a> <a id="3066" href="UTxO.Weakening.html#3066" class="Bound">voi</a>
      <a id="3076" class="Symbol">;</a> <a id="3078" href="UTxO.Validity.html#958" class="Field">validOutputRefs</a>      <a id="3099" class="Symbol">=</a> <a id="3101" href="UTxO.Weakening.html#3101" class="Bound">vor</a>
      <a id="3111" class="Symbol">;</a> <a id="3113" href="UTxO.Validity.html#1054" class="Field">validDataScriptTypes</a> <a id="3134" class="Symbol">=</a> <a id="3136" href="UTxO.Weakening.html#3136" class="Bound">vds</a>
      <a id="3146" class="Symbol">;</a> <a id="3148" href="UTxO.Validity.html#1307" class="Field">preservesValues</a>      <a id="3169" class="Symbol">=</a> <a id="3171" href="UTxO.Weakening.html#3171" class="Bound">pv</a>
      <a id="3180" class="Symbol">;</a> <a id="3182" href="UTxO.Validity.html#1530" class="Field">noDoubleSpending</a>     <a id="3203" class="Symbol">=</a> <a id="3205" href="UTxO.Weakening.html#3205" class="Bound">nds</a>
      <a id="3215" class="Symbol">;</a> <a id="3217" href="UTxO.Validity.html#1600" class="Field">allInputsValidate</a>    <a id="3238" class="Symbol">=</a> <a id="3240" href="UTxO.Weakening.html#3240" class="Bound">aiv</a>
      <a id="3250" class="Symbol">;</a> <a id="3252" href="UTxO.Validity.html#1898" class="Field">validateValidHashes</a>  <a id="3273" class="Symbol">=</a> <a id="3275" href="UTxO.Weakening.html#3275" class="Bound">vvh</a>
      <a id="3285" class="Symbol">;</a> <a id="3287" href="UTxO.Validity.html#2131" class="Field">forging</a>              <a id="3308" class="Symbol">=</a> <a id="3310" href="UTxO.Weakening.html#3310" class="Bound">frg</a>
      <a id="3320" class="Symbol">}</a>
  <a id="3324" class="Symbol">=</a> <a id="3326" class="Keyword">record</a>
      <a id="3339" class="Symbol">{</a> <a id="3341" href="UTxO.Validity.html#708" class="Field">validTxRefs</a>          <a id="3362" class="Symbol">=</a> <a id="3364" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a>
      <a id="3375" class="Symbol">;</a> <a id="3377" href="UTxO.Validity.html#802" class="Field">validOutputIndices</a>   <a id="3398" class="Symbol">=</a> <a id="3400" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a>
      <a id="3411" class="Symbol">;</a> <a id="3413" href="UTxO.Validity.html#958" class="Field">validOutputRefs</a>      <a id="3434" class="Symbol">=</a> <a id="3436" href="UTxO.Weakening.html#6034" class="Function">vorâ€²</a>
      <a id="3447" class="Symbol">;</a> <a id="3449" href="UTxO.Validity.html#1054" class="Field">validDataScriptTypes</a> <a id="3470" class="Symbol">=</a> <a id="3472" href="UTxO.Weakening.html#11389" class="Function">vdsâ€²</a>
      <a id="3483" class="Symbol">;</a> <a id="3485" href="UTxO.Validity.html#1307" class="Field">preservesValues</a>      <a id="3506" class="Symbol">=</a> <a id="3508" href="UTxO.Weakening.html#11099" class="Function">pvâ€²</a>
      <a id="3518" class="Symbol">;</a> <a id="3520" href="UTxO.Validity.html#1530" class="Field">noDoubleSpending</a>     <a id="3541" class="Symbol">=</a> <a id="3543" href="UTxO.Weakening.html#3205" class="Bound">nds</a>
      <a id="3553" class="Symbol">;</a> <a id="3555" href="UTxO.Validity.html#1600" class="Field">allInputsValidate</a>    <a id="3576" class="Symbol">=</a> <a id="3578" href="UTxO.Weakening.html#15922" class="Function">aivâ€²</a>
      <a id="3589" class="Symbol">;</a> <a id="3591" href="UTxO.Validity.html#1898" class="Field">validateValidHashes</a>  <a id="3612" class="Symbol">=</a> <a id="3614" href="UTxO.Weakening.html#16463" class="Function">vvhâ€²</a>
      <a id="3625" class="Symbol">;</a> <a id="3627" href="UTxO.Validity.html#2131" class="Field">forging</a>              <a id="3648" class="Symbol">=</a> <a id="3650" href="UTxO.Weakening.html#16905" class="Function">frgâ€²</a>
      <a id="3661" class="Symbol">}</a>
  <a id="3665" class="Keyword">where</a>
    <a id="3675" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="3679" class="Symbol">=</a> <a id="3681" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="3690" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
    <a id="3697" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a>  <a id="3701" class="Symbol">=</a> <a id="3703" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="3716" href="UTxO.Weakening.html#2986" class="Bound">l</a>

    <a id="3723" class="Comment">----------------------------------------------------------</a>

    <a id="3787" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="3795" class="Symbol">:</a> <a id="3797" class="Symbol">âˆ€</a> <a id="3799" class="Symbol">{</a><a id="3800" href="UTxO.Weakening.html#3800" class="Bound">xs</a> <a id="3803" href="UTxO.Weakening.html#3803" class="Bound">i</a><a id="3804" class="Symbol">}</a>
      <a id="3812" class="Symbol">â†’</a> <a id="3814" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a> <a id="3818" class="Symbol">(Î»</a> <a id="3821" href="UTxO.Weakening.html#3821" class="Bound">t</a> <a id="3823" class="Symbol">â†’</a> <a id="3825" href="UTxO.Weakening.html#3821" class="Bound">t</a> <a id="3827" href="Hashing.UTxO.html#657" class="Function Operator">A.â™¯â‚œâ‚“</a> <a id="3833" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="3835" href="UTxO.Types.html#1931" class="Field">id</a> <a id="3838" class="Symbol">(</a><a id="3839" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="3849" href="UTxO.Weakening.html#3803" class="Bound">i</a><a id="3850" class="Symbol">))</a> <a id="3853" href="UTxO.Weakening.html#3800" class="Bound">xs</a>
      <a id="3862" class="Symbol">â†’</a> <a id="3864" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a> <a id="3868" class="Symbol">(Î»</a> <a id="3871" href="UTxO.Weakening.html#3871" class="Bound">t</a> <a id="3873" class="Symbol">â†’</a> <a id="3875" href="UTxO.Weakening.html#3871" class="Bound">t</a> <a id="3877" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a>   <a id="3883" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="3885" href="UTxO.Types.html#1931" class="Field">id</a> <a id="3888" class="Symbol">(</a><a id="3889" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="3899" href="UTxO.Weakening.html#3803" class="Bound">i</a><a id="3900" class="Symbol">))</a> <a id="3903" class="Symbol">(</a><a id="3904" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="3917" href="UTxO.Weakening.html#3800" class="Bound">xs</a><a id="3919" class="Symbol">)</a>
    <a id="3925" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="3933" class="Symbol">{</a><a id="3934" href="UTxO.Weakening.html#3934" class="Bound">x</a> <a id="3936" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">âˆ·</a> <a id="3938" href="UTxO.Weakening.html#3938" class="Bound">xs</a><a id="3940" class="Symbol">}</a> <a id="3942" class="Symbol">{</a><a id="3943" href="UTxO.Weakening.html#3943" class="Bound">i</a><a id="3944" class="Symbol">}</a> <a id="3946" class="Symbol">(</a><a id="3947" href="Data.List.Relation.Unary.Any.html#1115" class="InductiveConstructor">here</a> <a id="3952" href="UTxO.Weakening.html#3952" class="Bound">px</a><a id="3954" class="Symbol">)</a> <a id="3956" class="Symbol">=</a> <a id="3958" href="Data.List.Relation.Unary.Any.html#1115" class="InductiveConstructor">here</a> <a id="3963" class="Symbol">(</a><a id="3964" href="Relation.Binary.PropositionalEquality.Core.html#984" class="Function">trans</a> <a id="3970" class="Symbol">(</a><a id="3971" href="UTxO.Weakening.html#2632" class="Function">weakenTx-preservesâ™¯</a> <a id="3991" href="UTxO.Weakening.html#3934" class="Bound">x</a><a id="3992" class="Symbol">)</a> <a id="3994" href="UTxO.Weakening.html#3952" class="Bound">px</a><a id="3996" class="Symbol">)</a>
    <a id="4002" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="4010" class="Symbol">{</a><a id="4011" href="UTxO.Weakening.html#4011" class="Bound">x</a> <a id="4013" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">âˆ·</a> <a id="4015" href="UTxO.Weakening.html#4015" class="Bound">xs</a><a id="4017" class="Symbol">}</a> <a id="4019" class="Symbol">{</a><a id="4020" href="UTxO.Weakening.html#4020" class="Bound">i</a><a id="4021" class="Symbol">}</a> <a id="4023" class="Symbol">(</a><a id="4024" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a> <a id="4030" href="UTxO.Weakening.html#4030" class="Bound">p</a><a id="4031" class="Symbol">)</a> <a id="4033" class="Symbol">=</a> <a id="4035" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a> <a id="4041" class="Symbol">(</a><a id="4042" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="4050" class="Symbol">{</a><a id="4051" href="UTxO.Weakening.html#4015" class="Bound">xs</a><a id="4053" class="Symbol">}</a> <a id="4055" class="Symbol">{</a><a id="4056" href="UTxO.Weakening.html#4020" class="Bound">i</a><a id="4057" class="Symbol">}</a> <a id="4059" href="UTxO.Weakening.html#4030" class="Bound">p</a><a id="4060" class="Symbol">)</a>

    <a id="4067" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="4072" class="Symbol">:</a> <a id="4074" class="Symbol">âˆ€</a> <a id="4076" href="UTxO.Weakening.html#4076" class="Bound">i</a> <a id="4078" class="Symbol">â†’</a> <a id="4080" href="UTxO.Weakening.html#4076" class="Bound">i</a> <a id="4082" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="4084" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="4091" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="4095" class="Symbol">â†’</a> <a id="4097" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a> <a id="4101" class="Symbol">(Î»</a> <a id="4104" href="UTxO.Weakening.html#4104" class="Bound">tx</a> <a id="4107" class="Symbol">â†’</a> <a id="4109" href="UTxO.Weakening.html#4104" class="Bound">tx</a> <a id="4112" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a> <a id="4116" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="4118" href="UTxO.Types.html#1931" class="Field">id</a> <a id="4121" class="Symbol">(</a><a id="4122" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4132" href="UTxO.Weakening.html#4076" class="Bound">i</a><a id="4133" class="Symbol">))</a> <a id="4136" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a>
    <a id="4143" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="4148" href="UTxO.Weakening.html#4148" class="Bound">i</a> <a id="4150" href="UTxO.Weakening.html#4150" class="Bound">iâˆˆ</a> <a id="4153" class="Symbol">=</a> <a id="4155" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="4163" class="Symbol">{</a><a id="4164" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="4165" class="Symbol">}</a> <a id="4167" class="Symbol">{</a><a id="4168" href="UTxO.Weakening.html#4148" class="Bound">i</a><a id="4169" class="Symbol">}</a> <a id="4171" class="Symbol">(</a><a id="4172" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="4176" href="UTxO.Weakening.html#4148" class="Bound">i</a> <a id="4178" href="UTxO.Weakening.html#4150" class="Bound">iâˆˆ</a><a id="4180" class="Symbol">)</a>

    <a id="4187" class="Comment">----------------------------------------------------------------------------------------</a>

    <a id="4281" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="4290" class="Symbol">:</a> <a id="4292" class="Symbol">âˆ€</a> <a id="4294" class="Symbol">{</a><a id="4295" href="UTxO.Weakening.html#4295" class="Bound">t</a><a id="4296" class="Symbol">}</a> <a id="4298" class="Symbol">â†’</a> <a id="4300" href="Data.List.Base.html#4104" class="Function">length</a> <a id="4307" class="Symbol">(</a><a id="4308" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="4316" class="Symbol">(</a><a id="4317" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="4326" href="UTxO.Weakening.html#4295" class="Bound">t</a><a id="4327" class="Symbol">))</a>
                     <a id="4351" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="4353" href="Data.List.Base.html#4104" class="Function">length</a> <a id="4360" class="Symbol">(</a><a id="4361" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="4371" href="UTxO.Weakening.html#4295" class="Bound">t</a><a id="4372" class="Symbol">)</a>
    <a id="4378" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="4387" class="Symbol">{</a><a id="4388" href="UTxO.Weakening.html#4388" class="Bound">t</a><a id="4389" class="Symbol">}</a> <a id="4391" class="Symbol">=</a> <a id="4393" href="Data.List.Properties.html#3222" class="Function">length-map</a> <a id="4404" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="4419" class="Symbol">(</a><a id="4420" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="4430" href="UTxO.Weakening.html#4388" class="Bound">t</a><a id="4431" class="Symbol">)</a>

    <a id="4438" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="4454" class="Symbol">:</a> <a id="4456" class="Symbol">âˆ€</a> <a id="4458" class="Symbol">{</a><a id="4459" href="UTxO.Weakening.html#4459" class="Bound">xs</a> <a id="4462" href="UTxO.Weakening.html#4462" class="Bound">i</a> <a id="4464" href="UTxO.Weakening.html#4464" class="Bound">vâ‚€</a><a id="4466" class="Symbol">}</a>
      <a id="4474" class="Symbol">â†’</a> <a id="4476" href="UTxO.TxUtilities.html#1652" class="Function">lookupTx</a> <a id="4485" class="Symbol">(</a><a id="4486" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="4499" href="UTxO.Weakening.html#4459" class="Bound">xs</a><a id="4501" class="Symbol">)</a> <a id="4503" class="Symbol">(</a><a id="4504" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4514" href="UTxO.Weakening.html#4462" class="Bound">i</a><a id="4515" class="Symbol">)</a> <a id="4517" class="Symbol">(</a><a id="4518" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="4526" class="Symbol">{</a><a id="4527" href="UTxO.Weakening.html#4459" class="Bound">xs</a><a id="4529" class="Symbol">}</a> <a id="4531" class="Symbol">{</a><a id="4532" href="UTxO.Weakening.html#4462" class="Bound">i</a><a id="4533" class="Symbol">}</a> <a id="4535" href="UTxO.Weakening.html#4464" class="Bound">vâ‚€</a><a id="4537" class="Symbol">)</a>
      <a id="4545" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="4547" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="4556" class="Symbol">(</a><a id="4557" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="4568" href="UTxO.Weakening.html#4459" class="Bound">xs</a> <a id="4571" class="Symbol">(</a><a id="4572" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4582" href="UTxO.Weakening.html#4462" class="Bound">i</a><a id="4583" class="Symbol">)</a> <a id="4585" href="UTxO.Weakening.html#4464" class="Bound">vâ‚€</a><a id="4587" class="Symbol">)</a>
    <a id="4593" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="4609" class="Symbol">{</a><a id="4610" class="Argument">vâ‚€</a> <a id="4613" class="Symbol">=</a> <a id="4615" class="Symbol">(</a><a id="4616" href="Data.List.Relation.Unary.Any.html#1115" class="InductiveConstructor">here</a> <a id="4621" href="UTxO.Weakening.html#4621" class="Bound">px</a><a id="4623" class="Symbol">)}</a>  <a id="4627" class="Symbol">=</a> <a id="4629" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
    <a id="4638" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="4654" class="Symbol">{</a><a id="4655" class="Argument">vâ‚€</a> <a id="4658" class="Symbol">=</a> <a id="4660" class="Symbol">(</a><a id="4661" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a> <a id="4667" href="UTxO.Weakening.html#4667" class="Bound">vâ‚€</a><a id="4669" class="Symbol">)}</a> <a id="4672" class="Symbol">=</a> <a id="4674" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="4690" class="Symbol">{</a><a id="4691" class="Argument">vâ‚€</a> <a id="4694" class="Symbol">=</a> <a id="4696" href="UTxO.Weakening.html#4667" class="Bound">vâ‚€</a><a id="4698" class="Symbol">}</a>

    <a id="4705" href="UTxO.Weakening.html#4705" class="Function">weakenâ‚</a> <a id="4713" class="Symbol">:</a> <a id="4715" class="Symbol">âˆ€</a> <a id="4717" class="Symbol">{</a><a id="4718" href="UTxO.Weakening.html#4718" class="Bound">xs</a> <a id="4721" href="UTxO.Weakening.html#4721" class="Bound">i</a> <a id="4723" href="UTxO.Weakening.html#4723" class="Bound">vâ‚€</a><a id="4725" class="Symbol">}</a>
      <a id="4733" class="Symbol">â†’</a> <a id="4735" href="UTxO.Types.html#1950" class="Field">index</a> <a id="4741" class="Symbol">(</a><a id="4742" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4752" href="UTxO.Weakening.html#4721" class="Bound">i</a><a id="4753" class="Symbol">)</a> <a id="4755" href="Data.Nat.Base.html#1076" class="Function Operator">&lt;</a> <a id="4757" href="Data.List.Base.html#4104" class="Function">length</a> <a id="4764" class="Symbol">(</a><a id="4765" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="4775" class="Symbol">(</a><a id="4776" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="4787" href="UTxO.Weakening.html#4718" class="Bound">xs</a> <a id="4790" class="Symbol">(</a><a id="4791" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4801" href="UTxO.Weakening.html#4721" class="Bound">i</a><a id="4802" class="Symbol">)</a> <a id="4804" href="UTxO.Weakening.html#4723" class="Bound">vâ‚€</a><a id="4806" class="Symbol">))</a>
      <a id="4815" class="Symbol">â†’</a> <a id="4817" href="UTxO.Types.html#1950" class="Field">index</a> <a id="4823" class="Symbol">(</a><a id="4824" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4834" href="UTxO.Weakening.html#4721" class="Bound">i</a><a id="4835" class="Symbol">)</a> <a id="4837" href="Data.Nat.Base.html#1076" class="Function Operator">&lt;</a> <a id="4839" href="Data.List.Base.html#4104" class="Function">length</a> <a id="4846" class="Symbol">(</a><a id="4847" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="4855" class="Symbol">(</a><a id="4856" href="UTxO.TxUtilities.html#1652" class="Function">lookupTx</a> <a id="4865" class="Symbol">(</a><a id="4866" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="4879" href="UTxO.Weakening.html#4718" class="Bound">xs</a><a id="4881" class="Symbol">)</a> <a id="4883" class="Symbol">(</a><a id="4884" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="4894" href="UTxO.Weakening.html#4721" class="Bound">i</a><a id="4895" class="Symbol">)</a> <a id="4897" class="Symbol">(</a><a id="4898" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="4906" class="Symbol">{</a><a id="4907" href="UTxO.Weakening.html#4718" class="Bound">xs</a><a id="4909" class="Symbol">}</a> <a id="4911" class="Symbol">{</a><a id="4912" href="UTxO.Weakening.html#4721" class="Bound">i</a><a id="4913" class="Symbol">}</a> <a id="4915" href="UTxO.Weakening.html#4723" class="Bound">vâ‚€</a><a id="4917" class="Symbol">)))</a>
    <a id="4925" href="UTxO.Weakening.html#4705" class="Function">weakenâ‚</a> <a id="4933" class="Symbol">{</a><a id="4934" href="UTxO.Weakening.html#4934" class="Bound">xs</a><a id="4936" class="Symbol">}</a> <a id="4938" class="Symbol">{</a><a id="4939" href="UTxO.Weakening.html#4939" class="Bound">i</a><a id="4940" class="Symbol">}</a> <a id="4942" class="Symbol">{</a><a id="4943" href="UTxO.Weakening.html#4943" class="Bound">vâ‚€</a><a id="4945" class="Symbol">}</a> <a id="4947" href="UTxO.Weakening.html#4947" class="Bound">p</a>
      <a id="4955" class="Keyword">rewrite</a> <a id="4963" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="4979" class="Symbol">{</a><a id="4980" href="UTxO.Weakening.html#4934" class="Bound">xs</a><a id="4982" class="Symbol">}</a> <a id="4984" class="Symbol">{</a><a id="4985" href="UTxO.Weakening.html#4939" class="Bound">i</a><a id="4986" class="Symbol">}</a> <a id="4988" class="Symbol">{</a><a id="4989" href="UTxO.Weakening.html#4943" class="Bound">vâ‚€</a><a id="4991" class="Symbol">}</a>
            <a id="5005" class="Symbol">|</a> <a id="5007" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="5016" class="Symbol">{</a><a id="5017" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="5028" href="UTxO.Weakening.html#4934" class="Bound">xs</a> <a id="5031" class="Symbol">(</a><a id="5032" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="5042" href="UTxO.Weakening.html#4939" class="Bound">i</a><a id="5043" class="Symbol">)</a> <a id="5045" href="UTxO.Weakening.html#4943" class="Bound">vâ‚€</a><a id="5047" class="Symbol">}</a>
            <a id="5061" class="Symbol">=</a> <a id="5063" href="UTxO.Weakening.html#4947" class="Bound">p</a>

    <a id="5070" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="5075" class="Symbol">:</a> <a id="5077" class="Symbol">âˆ€</a> <a id="5079" href="UTxO.Weakening.html#5079" class="Bound">i</a> <a id="5081" class="Symbol">â†’</a> <a id="5083" class="Symbol">(</a><a id="5084" href="UTxO.Weakening.html#5084" class="Bound">iâˆˆ</a> <a id="5087" class="Symbol">:</a> <a id="5089" href="UTxO.Weakening.html#5079" class="Bound">i</a> <a id="5091" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="5093" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="5100" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="5103" class="Symbol">)</a> <a id="5105" class="Symbol">â†’</a>
      <a id="5113" href="UTxO.Types.html#1950" class="Field">index</a> <a id="5119" class="Symbol">(</a><a id="5120" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="5130" href="UTxO.Weakening.html#5079" class="Bound">i</a><a id="5131" class="Symbol">)</a> <a id="5133" href="Data.Nat.Base.html#1076" class="Function Operator">&lt;</a> <a id="5135" href="Data.List.Base.html#4104" class="Function">length</a> <a id="5142" class="Symbol">(</a><a id="5143" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="5151" class="Symbol">(</a><a id="5152" href="UTxO.TxUtilities.html#1652" class="Function">lookupTx</a> <a id="5161" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="5164" class="Symbol">(</a><a id="5165" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="5175" href="UTxO.Weakening.html#5079" class="Bound">i</a><a id="5176" class="Symbol">)</a> <a id="5178" class="Symbol">(</a><a id="5179" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="5184" href="UTxO.Weakening.html#5079" class="Bound">i</a> <a id="5186" href="UTxO.Weakening.html#5084" class="Bound">iâˆˆ</a><a id="5188" class="Symbol">)))</a>
    <a id="5196" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="5201" href="UTxO.Weakening.html#5201" class="Bound">i</a> <a id="5203" href="UTxO.Weakening.html#5203" class="Bound">iâˆˆ</a> <a id="5206" class="Symbol">=</a> <a id="5208" href="UTxO.Weakening.html#4705" class="Function">weakenâ‚</a> <a id="5216" class="Symbol">{</a><a id="5217" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="5218" class="Symbol">}</a> <a id="5220" class="Symbol">{</a><a id="5221" href="UTxO.Weakening.html#5201" class="Bound">i</a><a id="5222" class="Symbol">}</a> <a id="5224" class="Symbol">{</a><a id="5225" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="5229" href="UTxO.Weakening.html#5201" class="Bound">i</a> <a id="5231" href="UTxO.Weakening.html#5203" class="Bound">iâˆˆ</a><a id="5233" class="Symbol">}</a> <a id="5235" class="Symbol">(</a><a id="5236" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="5240" href="UTxO.Weakening.html#5201" class="Bound">i</a> <a id="5242" href="UTxO.Weakening.html#5203" class="Bound">iâˆˆ</a><a id="5244" class="Symbol">)</a>

    <a id="5251" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="5341" href="UTxO.Weakening.html#5341" class="Function">weakenIndices</a> <a id="5355" class="Symbol">:</a> <a id="5357" class="Symbol">âˆ€</a> <a id="5359" class="Symbol">{</a><a id="5360" href="UTxO.Weakening.html#5360" class="Bound">x</a><a id="5361" class="Symbol">}</a>
      <a id="5369" class="Symbol">â†’</a> <a id="5371" href="Utilities.Lists.html#2039" class="Function">indices</a> <a id="5379" class="Symbol">(</a><a id="5380" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="5388" class="Symbol">(</a><a id="5389" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="5398" href="UTxO.Weakening.html#5360" class="Bound">x</a><a id="5399" class="Symbol">))</a>
      <a id="5408" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="5410" href="Utilities.Lists.html#2039" class="Function">indices</a> <a id="5418" class="Symbol">(</a><a id="5419" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="5429" href="UTxO.Weakening.html#5360" class="Bound">x</a><a id="5430" class="Symbol">)</a>
    <a id="5436" href="UTxO.Weakening.html#5341" class="Function">weakenIndices</a> <a id="5450" class="Symbol">{</a><a id="5451" href="UTxO.Weakening.html#5451" class="Bound">x</a><a id="5452" class="Symbol">}</a> <a id="5454" class="Keyword">rewrite</a> <a id="5462" href="Data.List.Properties.html#3222" class="Function">length-map</a> <a id="5473" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="5488" class="Symbol">(</a><a id="5489" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="5499" href="UTxO.Weakening.html#5451" class="Bound">x</a><a id="5500" class="Symbol">)</a> <a id="5502" class="Symbol">=</a> <a id="5504" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="5514" href="UTxO.Weakening.html#5514" class="Function">weakenUnspentOutputsTx</a> <a id="5537" class="Symbol">:</a> <a id="5539" class="Symbol">âˆ€</a> <a id="5541" class="Symbol">{</a><a id="5542" href="UTxO.Weakening.html#5542" class="Bound">x</a><a id="5543" class="Symbol">}</a>
      <a id="5551" class="Symbol">â†’</a> <a id="5553" href="UTxO.TxUtilities.html#1225" class="Function">unspentOutputsTx</a> <a id="5570" class="Symbol">(</a><a id="5571" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="5580" href="UTxO.Weakening.html#5542" class="Bound">x</a><a id="5581" class="Symbol">)</a>
      <a id="5589" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="5591" href="UTxO.TxUtilities.html#1225" class="Function">A.unspentOutputsTx</a> <a id="5610" href="UTxO.Weakening.html#5542" class="Bound">x</a>
    <a id="5616" href="UTxO.Weakening.html#5514" class="Function">weakenUnspentOutputsTx</a> <a id="5639" class="Symbol">{</a><a id="5640" href="UTxO.Weakening.html#5640" class="Bound">x</a><a id="5641" class="Symbol">}</a> <a id="5643" class="Keyword">rewrite</a> <a id="5651" href="UTxO.Weakening.html#5341" class="Function">weakenIndices</a> <a id="5665" class="Symbol">{</a><a id="5666" href="UTxO.Weakening.html#5640" class="Bound">x</a><a id="5667" class="Symbol">}</a> <a id="5669" class="Symbol">|</a> <a id="5671" href="UTxO.Weakening.html#2632" class="Function">weakenTx-preservesâ™¯</a> <a id="5691" href="UTxO.Weakening.html#5640" class="Bound">x</a> <a id="5693" class="Symbol">=</a> <a id="5695" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="5705" href="UTxO.Weakening.html#5705" class="Function">weakenUnspentOutputs</a> <a id="5726" class="Symbol">:</a> <a id="5728" class="Symbol">âˆ€</a> <a id="5730" class="Symbol">{</a><a id="5731" href="UTxO.Weakening.html#5731" class="Bound">xs</a><a id="5733" class="Symbol">}</a>
      <a id="5741" class="Symbol">â†’</a> <a id="5743" href="UTxO.TxUtilities.html#1457" class="Function">unspentOutputs</a> <a id="5758" class="Symbol">(</a><a id="5759" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="5772" href="UTxO.Weakening.html#5731" class="Bound">xs</a><a id="5774" class="Symbol">)</a>
      <a id="5782" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="5784" href="UTxO.TxUtilities.html#1457" class="Function">A.unspentOutputs</a> <a id="5801" href="UTxO.Weakening.html#5731" class="Bound">xs</a>
    <a id="5808" href="UTxO.Weakening.html#5705" class="Function">weakenUnspentOutputs</a> <a id="5829" class="Symbol">{</a><a id="5830" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a><a id="5832" class="Symbol">}</a>     <a id="5838" class="Symbol">=</a> <a id="5840" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>
    <a id="5849" href="UTxO.Weakening.html#5705" class="Function">weakenUnspentOutputs</a> <a id="5870" class="Symbol">{</a><a id="5871" href="UTxO.Weakening.html#5871" class="Bound">x</a> <a id="5873" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">âˆ·</a> <a id="5875" href="UTxO.Weakening.html#5875" class="Bound">xs</a><a id="5877" class="Symbol">}</a> <a id="5879" class="Keyword">rewrite</a> <a id="5887" href="UTxO.Weakening.html#5705" class="Function">weakenUnspentOutputs</a> <a id="5908" class="Symbol">{</a><a id="5909" href="UTxO.Weakening.html#5875" class="Bound">xs</a><a id="5911" class="Symbol">}</a>
                                        <a id="5953" class="Symbol">|</a> <a id="5955" href="UTxO.Weakening.html#5514" class="Function">weakenUnspentOutputsTx</a> <a id="5978" class="Symbol">{</a><a id="5979" href="UTxO.Weakening.html#5871" class="Bound">x</a><a id="5980" class="Symbol">}</a>
                                        <a id="6022" class="Symbol">=</a> <a id="6024" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="6034" href="UTxO.Weakening.html#6034" class="Function">vorâ€²</a> <a id="6039" class="Symbol">:</a> <a id="6041" class="Symbol">âˆ€</a> <a id="6043" href="UTxO.Weakening.html#6043" class="Bound">i</a> <a id="6045" class="Symbol">â†’</a> <a id="6047" href="UTxO.Weakening.html#6043" class="Bound">i</a> <a id="6049" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="6051" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="6058" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="6062" class="Symbol">â†’</a> <a id="6064" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6074" href="UTxO.Weakening.html#6043" class="Bound">i</a> <a id="6076" href="Data.Set%2527.html#3218" class="Function Operator">SETâ‚’.âˆˆâ€²</a> <a id="6084" href="UTxO.TxUtilities.html#1457" class="Function">unspentOutputs</a> <a id="6099" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a>
    <a id="6106" href="UTxO.Weakening.html#6034" class="Function">vorâ€²</a> <a id="6111" href="UTxO.Weakening.html#6111" class="Bound">i</a> <a id="6113" href="UTxO.Weakening.html#6113" class="Bound">iâˆˆ</a> <a id="6116" class="Keyword">rewrite</a> <a id="6124" href="UTxO.Weakening.html#5705" class="Function">weakenUnspentOutputs</a> <a id="6145" class="Symbol">{</a><a id="6146" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="6147" class="Symbol">}</a> <a id="6149" class="Symbol">=</a> <a id="6151" href="UTxO.Weakening.html#3101" class="Bound">vor</a> <a id="6155" href="UTxO.Weakening.html#6111" class="Bound">i</a> <a id="6157" href="UTxO.Weakening.html#6113" class="Bound">iâˆˆ</a>

    <a id="6165" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="6255" href="UTxO.Weakening.html#6255" class="Function">mapValueâ‰¡</a> <a id="6265" class="Symbol">:</a> <a id="6267" class="Symbol">(</a><a id="6268" href="Data.List.Base.html#1304" class="Function">map</a> <a id="6272" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="6278" href="Function.html#1085" class="Function Operator">âˆ˜</a> <a id="6280" href="Data.List.Base.html#1304" class="Function">map</a> <a id="6284" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a><a id="6298" class="Symbol">)</a> <a id="6300" class="Symbol">(</a><a id="6301" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="6311" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="6313" class="Symbol">)</a>
              <a id="6329" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="6331" href="Data.List.Base.html#1304" class="Function">map</a> <a id="6335" href="UTxO.Ledger.html#547" class="Field">A.value</a> <a id="6343" class="Symbol">(</a><a id="6344" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="6354" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="6356" class="Symbol">)</a>
    <a id="6362" href="UTxO.Weakening.html#6255" class="Function">mapValueâ‰¡</a>
      <a id="6378" class="Keyword">rewrite</a> <a id="6386" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="6390" class="Symbol">(</a><a id="6391" href="Data.List.Properties.html#3367" class="Function">map-compose</a> <a id="6403" class="Symbol">{</a><a id="6404" class="Argument">g</a> <a id="6406" class="Symbol">=</a> <a id="6408" href="UTxO.Ledger.html#547" class="Field">value</a><a id="6413" class="Symbol">}</a> <a id="6415" class="Symbol">{</a><a id="6416" class="Argument">f</a> <a id="6418" class="Symbol">=</a> <a id="6420" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a><a id="6434" class="Symbol">}</a> <a id="6436" class="Symbol">(</a><a id="6437" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="6447" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="6449" class="Symbol">))</a>
            <a id="6464" class="Symbol">=</a> <a id="6466" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="6476" href="UTxO.Weakening.html#6476" class="Function">Î£valueâ‰¡</a> <a id="6484" class="Symbol">:</a> <a id="6486" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="6491" class="Symbol">(</a><a id="6492" href="Data.List.Base.html#1304" class="Function">map</a> <a id="6496" href="UTxO.Ledger.html#547" class="Field">A.value</a> <a id="6504" class="Symbol">(</a><a id="6505" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="6515" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="6517" class="Symbol">))</a> <a id="6520" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="6522" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="6527" class="Symbol">(</a><a id="6528" href="Data.List.Base.html#1304" class="Function">map</a> <a id="6532" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="6538" class="Symbol">(</a><a id="6539" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="6547" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="6550" class="Symbol">))</a>
    <a id="6557" href="UTxO.Weakening.html#6476" class="Function">Î£valueâ‰¡</a> <a id="6565" class="Keyword">rewrite</a> <a id="6573" href="UTxO.Weakening.html#6255" class="Function">mapValueâ‰¡</a> <a id="6583" class="Symbol">=</a> <a id="6585" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="6595" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="6615" class="Symbol">:</a> <a id="6617" class="Symbol">âˆ€</a> <a id="6619" class="Symbol">{</a><a id="6620" href="UTxO.Weakening.html#6620" class="Bound">xs</a> <a id="6623" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6624" class="Symbol">}</a>
      <a id="6632" class="Symbol">â†’</a> <a id="6634" class="Symbol">(</a><a id="6635" href="UTxO.Weakening.html#6635" class="Bound">vâ‚€</a> <a id="6638" class="Symbol">:</a> <a id="6640" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a> <a id="6644" class="Symbol">(Î»</a> <a id="6647" href="UTxO.Weakening.html#6647" class="Bound">tx</a> <a id="6650" class="Symbol">â†’</a> <a id="6652" href="UTxO.Weakening.html#6647" class="Bound">tx</a> <a id="6655" href="Hashing.UTxO.html#657" class="Function Operator">A.â™¯â‚œâ‚“</a> <a id="6661" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="6663" href="UTxO.Types.html#1931" class="Field">id</a> <a id="6666" class="Symbol">(</a><a id="6667" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6677" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6678" class="Symbol">))</a> <a id="6681" href="UTxO.Weakening.html#6620" class="Bound">xs</a><a id="6683" class="Symbol">)</a>
      <a id="6691" class="Symbol">â†’</a> <a id="6693" class="Symbol">(</a><a id="6694" href="UTxO.Weakening.html#6694" class="Bound">vâ‚</a> <a id="6697" class="Symbol">:</a> <a id="6699" href="UTxO.Types.html#1950" class="Field">index</a> <a id="6705" class="Symbol">(</a><a id="6706" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6716" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6717" class="Symbol">)</a> <a id="6719" href="Data.Nat.Base.html#1076" class="Function Operator">&lt;</a> <a id="6721" href="Data.List.Base.html#4104" class="Function">length</a> <a id="6728" class="Symbol">(</a><a id="6729" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="6739" class="Symbol">(</a><a id="6740" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="6751" href="UTxO.Weakening.html#6620" class="Bound">xs</a> <a id="6754" class="Symbol">(</a><a id="6755" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6765" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6766" class="Symbol">)</a> <a id="6768" href="UTxO.Weakening.html#6635" class="Bound">vâ‚€</a><a id="6770" class="Symbol">)))</a>
      <a id="6780" class="Symbol">â†’</a> <a id="6782" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="6795" class="Symbol">(</a><a id="6796" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="6809" href="UTxO.Weakening.html#6620" class="Bound">xs</a><a id="6811" class="Symbol">)</a> <a id="6813" class="Symbol">(</a><a id="6814" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6824" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6825" class="Symbol">)</a> <a id="6827" class="Symbol">(</a><a id="6828" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="6836" class="Symbol">{</a><a id="6837" href="UTxO.Weakening.html#6620" class="Bound">xs</a><a id="6839" class="Symbol">}</a> <a id="6841" class="Symbol">{</a><a id="6842" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6843" class="Symbol">}</a> <a id="6845" href="UTxO.Weakening.html#6635" class="Bound">vâ‚€</a><a id="6847" class="Symbol">)</a> <a id="6849" class="Symbol">(</a><a id="6850" href="UTxO.Weakening.html#4705" class="Function">weakenâ‚</a> <a id="6858" class="Symbol">{</a><a id="6859" href="UTxO.Weakening.html#6620" class="Bound">xs</a><a id="6861" class="Symbol">}</a> <a id="6863" class="Symbol">{</a><a id="6864" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6865" class="Symbol">}</a> <a id="6867" class="Symbol">{</a><a id="6868" href="UTxO.Weakening.html#6635" class="Bound">vâ‚€</a><a id="6870" class="Symbol">}</a> <a id="6872" href="UTxO.Weakening.html#6694" class="Bound">vâ‚</a><a id="6874" class="Symbol">)</a>
      <a id="6882" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="6884" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="6899" class="Symbol">(</a><a id="6900" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="6915" href="UTxO.Weakening.html#6620" class="Bound">xs</a> <a id="6918" class="Symbol">(</a><a id="6919" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="6929" href="UTxO.Weakening.html#6623" class="Bound">i</a><a id="6930" class="Symbol">)</a> <a id="6932" href="UTxO.Weakening.html#6635" class="Bound">vâ‚€</a> <a id="6935" href="UTxO.Weakening.html#6694" class="Bound">vâ‚</a><a id="6937" class="Symbol">)</a>
    <a id="6943" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="6963" class="Symbol">{</a><a id="6964" href="UTxO.Weakening.html#6964" class="Bound">xs</a><a id="6966" class="Symbol">}</a> <a id="6968" class="Symbol">{</a><a id="6969" href="UTxO.Weakening.html#6969" class="Bound">i</a><a id="6970" class="Symbol">}</a> <a id="6972" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a> <a id="6975" href="UTxO.Weakening.html#6975" class="Bound">vâ‚</a> <a id="6978" class="Symbol">=</a>
      <a id="6986" href="Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
        <a id="7000" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="7013" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a> <a id="7017" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7022" href="UTxO.Weakening.html#7720" class="Function">vâ‚€â€²</a> <a id="7026" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a>
      <a id="7036" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="7048" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="7056" class="Symbol">(</a><a id="7057" href="UTxO.TxUtilities.html#1652" class="Function">lookupTx</a> <a id="7066" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a> <a id="7070" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7075" href="UTxO.Weakening.html#7720" class="Function">vâ‚€â€²</a><a id="7078" class="Symbol">)</a>
          <a id="7090" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a>
        <a id="7100" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a>
      <a id="7113" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="7116" href="UTxO.Weakening.html#8694" class="Function">hâ‚</a> <a id="7119" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
        <a id="7129" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="7137" class="Symbol">(</a><a id="7138" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="7147" class="Symbol">(</a><a id="7148" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="7159" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7162" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7167" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="7169" class="Symbol">))</a>
          <a id="7182" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a>
        <a id="7192" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a>
      <a id="7205" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="7217" href="Data.List.Base.html#1304" class="Function">map</a> <a id="7221" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="7236" class="Symbol">(</a><a id="7237" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="7247" class="Symbol">(</a><a id="7248" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="7259" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7262" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7267" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="7269" class="Symbol">))</a>
          <a id="7282" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a>
        <a id="7292" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a>
      <a id="7305" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="7308" href="UTxO.Weakening.html#9280" class="Function">hâ‚‚</a> <a id="7311" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
        <a id="7321" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="7336" class="Symbol">(</a><a id="7337" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="7347" class="Symbol">(</a><a id="7348" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="7359" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7362" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7367" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="7369" class="Symbol">)</a> <a id="7371" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="7373" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="7379" class="Symbol">)</a>
      <a id="7387" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="7399" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="7414" class="Symbol">(</a><a id="7415" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="7430" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7433" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7438" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a> <a id="7441" href="UTxO.Weakening.html#6975" class="Bound">vâ‚</a><a id="7443" class="Symbol">)</a>
      <a id="7451" href="Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">âˆ</a>
      <a id="7459" class="Keyword">where</a>
        <a id="7473" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7478" class="Symbol">:</a> <a id="7480" href="UTxO.Types.html#1868" class="Record">TxOutputRef</a>
        <a id="7500" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7505" class="Symbol">=</a> <a id="7507" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="7517" href="UTxO.Weakening.html#6969" class="Bound">i</a>

        <a id="7528" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a> <a id="7532" class="Symbol">:</a> <a id="7534" href="UTxO.Ledger.html#668" class="Record">A.Tx</a>
        <a id="7547" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a> <a id="7551" class="Symbol">=</a> <a id="7553" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="7564" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7567" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7572" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a>

        <a id="7584" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a> <a id="7588" class="Symbol">:</a> <a id="7590" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="7595" href="UTxO.Ledger.html#668" class="Record">Tx</a>
        <a id="7606" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a> <a id="7610" class="Symbol">=</a> <a id="7612" href="UTxO.Weakening.html#2100" class="Function">weakenLedger</a> <a id="7625" href="UTxO.Weakening.html#6964" class="Bound">xs</a>

        <a id="7637" href="UTxO.Weakening.html#7637" class="Function">outsâ‚€</a> <a id="7643" class="Symbol">:</a> <a id="7645" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="7650" href="UTxO.Ledger.html#514" class="Record">A.TxOutput</a>
        <a id="7669" href="UTxO.Weakening.html#7637" class="Function">outsâ‚€</a> <a id="7675" class="Symbol">=</a> <a id="7677" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="7687" class="Symbol">(</a><a id="7688" href="UTxO.TxUtilities.html#1652" class="Function">A.lookupTx</a> <a id="7699" href="UTxO.Weakening.html#6964" class="Bound">xs</a> <a id="7702" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7707" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="7709" class="Symbol">)</a>

        <a id="7720" href="UTxO.Weakening.html#7720" class="Function">vâ‚€â€²</a> <a id="7724" class="Symbol">:</a> <a id="7726" href="Data.List.Relation.Unary.Any.html#1052" class="Datatype">Any</a> <a id="7730" class="Symbol">(Î»</a> <a id="7733" href="UTxO.Weakening.html#7733" class="Bound">tx</a> <a id="7736" class="Symbol">â†’</a> <a id="7738" href="UTxO.Weakening.html#7733" class="Bound">tx</a> <a id="7741" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a> <a id="7745" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="7747" href="UTxO.Types.html#1931" class="Field">id</a> <a id="7750" href="UTxO.Weakening.html#7473" class="Function">refi</a><a id="7754" class="Symbol">)</a> <a id="7756" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a>
        <a id="7768" href="UTxO.Weakening.html#7720" class="Function">vâ‚€â€²</a> <a id="7772" class="Symbol">=</a> <a id="7774" href="UTxO.Weakening.html#3787" class="Function">weakenâ‚€</a> <a id="7782" class="Symbol">{</a><a id="7783" href="UTxO.Weakening.html#6964" class="Bound">xs</a><a id="7785" class="Symbol">}</a> <a id="7787" class="Symbol">{</a><a id="7788" href="UTxO.Weakening.html#6969" class="Bound">i</a><a id="7789" class="Symbol">}</a> <a id="7791" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a>

        <a id="7803" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="7809" class="Symbol">:</a> <a id="7811" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="7816" href="UTxO.Ledger.html#514" class="Record">TxOutput</a>
        <a id="7833" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="7839" class="Symbol">=</a> <a id="7841" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="7849" class="Symbol">(</a><a id="7850" href="UTxO.TxUtilities.html#1652" class="Function">lookupTx</a> <a id="7859" href="UTxO.Weakening.html#7584" class="Function">xsâ€²</a> <a id="7863" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7868" href="UTxO.Weakening.html#7720" class="Function">vâ‚€â€²</a><a id="7871" class="Symbol">)</a>

        <a id="7882" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a> <a id="7886" class="Symbol">:</a> <a id="7888" href="UTxO.Types.html#1950" class="Field">index</a> <a id="7894" href="UTxO.Weakening.html#7473" class="Function">refi</a> <a id="7899" href="Data.Nat.Base.html#1076" class="Function Operator">&lt;</a> <a id="7901" href="Data.List.Base.html#4104" class="Function">length</a> <a id="7908" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a>
        <a id="7922" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a> <a id="7926" class="Symbol">=</a> <a id="7928" href="UTxO.Weakening.html#4705" class="Function">weakenâ‚</a> <a id="7936" class="Symbol">{</a><a id="7937" href="UTxO.Weakening.html#6964" class="Bound">xs</a><a id="7939" class="Symbol">}</a> <a id="7941" class="Symbol">{</a><a id="7942" href="UTxO.Weakening.html#6969" class="Bound">i</a><a id="7943" class="Symbol">}</a> <a id="7945" class="Symbol">{</a><a id="7946" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="7948" class="Symbol">}</a> <a id="7950" href="UTxO.Weakening.html#6975" class="Bound">vâ‚</a>

        <a id="7962" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="7968" class="Symbol">:</a> <a id="7970" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="7975" href="UTxO.Ledger.html#514" class="Record">TxOutput</a>
        <a id="7992" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="7998" class="Symbol">=</a> <a id="8000" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="8008" class="Symbol">(</a><a id="8009" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="8018" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a><a id="8021" class="Symbol">)</a>

        <a id="8032" href="UTxO.Weakening.html#8032" class="Function">outsâ‰¡</a> <a id="8038" class="Symbol">:</a> <a id="8040" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="8046" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="8048" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a>
        <a id="8062" href="UTxO.Weakening.html#8032" class="Function">outsâ‰¡</a> <a id="8068" class="Keyword">rewrite</a> <a id="8076" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="8092" class="Symbol">{</a><a id="8093" href="UTxO.Weakening.html#6964" class="Bound">xs</a><a id="8095" class="Symbol">}</a> <a id="8097" class="Symbol">{</a><a id="8098" href="UTxO.Weakening.html#6969" class="Bound">i</a><a id="8099" class="Symbol">}</a> <a id="8101" class="Symbol">{</a><a id="8102" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="8104" class="Symbol">}</a> <a id="8106" class="Symbol">=</a> <a id="8108" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

        <a id="8122" href="UTxO.Weakening.html#8122" class="Function">lenâ‰¡</a> <a id="8127" class="Symbol">:</a> <a id="8129" href="Data.List.Base.html#4104" class="Function">length</a> <a id="8136" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="8142" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="8144" href="Data.List.Base.html#4104" class="Function">length</a> <a id="8151" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a>
        <a id="8165" href="UTxO.Weakening.html#8122" class="Function">lenâ‰¡</a> <a id="8170" class="Symbol">=</a> <a id="8172" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="8177" href="Data.List.Base.html#4104" class="Function">length</a> <a id="8184" href="UTxO.Weakening.html#8032" class="Function">outsâ‰¡</a>

        <a id="8199" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a> <a id="8206" class="Symbol">:</a> <a id="8208" href="Utilities.Lists.html#1080" class="Function">Index</a> <a id="8214" href="UTxO.Weakening.html#7637" class="Function">outsâ‚€</a>
        <a id="8228" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a> <a id="8235" class="Symbol">=</a> <a id="8237" href="Data.Fin.Base.html#1798" class="Function">fromâ„•â‰¤</a> <a id="8244" class="Symbol">{</a><a id="8245" href="UTxO.Types.html#1950" class="Field">index</a> <a id="8251" href="UTxO.Weakening.html#7473" class="Function">refi</a><a id="8255" class="Symbol">}</a> <a id="8257" href="UTxO.Weakening.html#6975" class="Bound">vâ‚</a>

        <a id="8269" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a> <a id="8276" class="Symbol">:</a> <a id="8278" href="Utilities.Lists.html#1080" class="Function">Index</a> <a id="8284" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a>
        <a id="8298" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a> <a id="8305" class="Symbol">=</a> <a id="8307" href="Data.Fin.Base.html#1798" class="Function">fromâ„•â‰¤</a> <a id="8314" class="Symbol">{</a><a id="8315" href="UTxO.Types.html#1950" class="Field">index</a> <a id="8321" href="UTxO.Weakening.html#7473" class="Function">refi</a><a id="8325" class="Symbol">}</a> <a id="8327" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a>

        <a id="8340" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a> <a id="8347" class="Symbol">:</a> <a id="8349" href="Utilities.Lists.html#1080" class="Function">Index</a> <a id="8355" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a>
        <a id="8369" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a> <a id="8376" class="Symbol">=</a> <a id="8378" href="Utilities.Lists.html#2116" class="Function">cast</a> <a id="8383" href="UTxO.Weakening.html#8122" class="Function">lenâ‰¡</a> <a id="8388" class="Symbol">(</a><a id="8389" href="Data.Fin.Base.html#1798" class="Function">fromâ„•â‰¤</a> <a id="8396" class="Symbol">{</a><a id="8397" href="UTxO.Types.html#1950" class="Field">index</a> <a id="8403" href="UTxO.Weakening.html#7473" class="Function">refi</a><a id="8407" class="Symbol">}</a> <a id="8409" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a><a id="8412" class="Symbol">)</a>

        <a id="8423" href="UTxO.Weakening.html#8423" class="Function">hh</a> <a id="8426" class="Symbol">:</a> <a id="8428" href="Data.Fin.Base.html#1077" class="Function">toâ„•</a> <a id="8432" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a> <a id="8439" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="8441" href="Data.Fin.Base.html#1077" class="Function">toâ„•</a> <a id="8445" class="Symbol">(</a><a id="8446" href="Utilities.Lists.html#2116" class="Function">cast</a> <a id="8451" class="Symbol">(</a><a id="8452" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="8456" class="Symbol">(</a><a id="8457" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="8466" class="Symbol">{</a><a id="8467" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a><a id="8470" class="Symbol">}))</a> <a id="8474" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="8480" class="Symbol">)</a>
        <a id="8490" href="UTxO.Weakening.html#8423" class="Function">hh</a> <a id="8493" class="Keyword">rewrite</a> <a id="8501" href="Utilities.Lists.html#2454" class="Function">toâ„•-cast</a> <a id="8510" class="Symbol">{</a><a id="8511" class="Argument">fm</a> <a id="8514" class="Symbol">=</a> <a id="8516" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a><a id="8522" class="Symbol">}</a> <a id="8524" href="UTxO.Weakening.html#8122" class="Function">lenâ‰¡</a>
                 <a id="8546" class="Symbol">|</a> <a id="8548" href="Utilities.Lists.html#2454" class="Function">toâ„•-cast</a> <a id="8557" class="Symbol">{</a><a id="8558" class="Argument">fm</a> <a id="8561" class="Symbol">=</a> <a id="8563" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="8569" class="Symbol">}</a> <a id="8571" class="Symbol">(</a><a id="8572" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="8576" class="Symbol">(</a><a id="8577" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="8586" class="Symbol">{</a><a id="8587" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a><a id="8590" class="Symbol">}))</a>
                 <a id="8611" class="Symbol">|</a> <a id="8613" href="Data.Fin.Properties.html#4084" class="Function">toâ„•-fromâ„•â‰¤</a> <a id="8624" href="UTxO.Weakening.html#7882" class="Function">vâ‚â€²</a>
                 <a id="8645" class="Symbol">|</a> <a id="8647" href="Data.Fin.Properties.html#4084" class="Function">toâ„•-fromâ„•â‰¤</a> <a id="8658" href="UTxO.Weakening.html#6975" class="Bound">vâ‚</a>
                 <a id="8678" class="Symbol">=</a> <a id="8680" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

        <a id="8694" href="UTxO.Weakening.html#8694" class="Function">hâ‚</a> <a id="8697" class="Symbol">:</a> <a id="8699" class="Symbol">(</a><a id="8700" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="8706" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="8708" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a><a id="8714" class="Symbol">)</a> <a id="8716" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="8718" class="Symbol">(</a><a id="8719" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="8725" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="8727" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a><a id="8733" class="Symbol">)</a>
        <a id="8743" href="UTxO.Weakening.html#8694" class="Function">hâ‚</a> <a id="8746" class="Symbol">=</a> <a id="8748" href="Utilities.Lists.html#3330" class="Function">â‰â†’â€¼</a> <a id="8752" class="Symbol">{</a><a id="8753" class="Argument">xs</a> <a id="8756" class="Symbol">=</a> <a id="8758" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a><a id="8763" class="Symbol">}</a> <a id="8765" class="Symbol">{</a><a id="8766" class="Argument">ys</a> <a id="8769" class="Symbol">=</a> <a id="8771" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a><a id="8776" class="Symbol">}</a> <a id="8778" class="Symbol">{</a><a id="8779" class="Argument">ix</a> <a id="8782" class="Symbol">=</a> <a id="8784" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a><a id="8790" class="Symbol">}</a> <a id="8792" href="UTxO.Weakening.html#8122" class="Function">lenâ‰¡</a> <a id="8797" href="UTxO.Weakening.html#8817" class="Function">hâ‚â€²</a>
          <a id="8811" class="Keyword">where</a> <a id="8817" href="UTxO.Weakening.html#8817" class="Function">hâ‚â€²</a> <a id="8821" class="Symbol">:</a> <a id="8823" class="Symbol">(</a><a id="8824" href="UTxO.Weakening.html#7803" class="Function">outsâ‚</a> <a id="8830" href="Utilities.Lists.html#1249" class="Function Operator">â‰</a> <a id="8832" href="Data.Fin.Base.html#1077" class="Function">toâ„•</a> <a id="8836" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a><a id="8842" class="Symbol">)</a> <a id="8844" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="8846" class="Symbol">(</a><a id="8847" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="8853" href="Utilities.Lists.html#1249" class="Function Operator">â‰</a> <a id="8855" href="Data.Fin.Base.html#1077" class="Function">toâ„•</a> <a id="8859" href="UTxO.Weakening.html#8269" class="Function">indexâ‚</a><a id="8865" class="Symbol">)</a>
                <a id="8883" href="UTxO.Weakening.html#8817" class="Function">hâ‚â€²</a> <a id="8887" class="Keyword">rewrite</a> <a id="8895" href="UTxO.Weakening.html#4438" class="Function">lookupTxWeakens</a> <a id="8911" class="Symbol">{</a><a id="8912" href="UTxO.Weakening.html#6964" class="Bound">xs</a><a id="8914" class="Symbol">}</a> <a id="8916" class="Symbol">{</a><a id="8917" href="UTxO.Weakening.html#6969" class="Bound">i</a><a id="8918" class="Symbol">}</a> <a id="8920" class="Symbol">{</a><a id="8921" href="UTxO.Weakening.html#6972" class="Bound">vâ‚€</a><a id="8923" class="Symbol">}</a> <a id="8925" class="Symbol">=</a> <a id="8927" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

        <a id="8941" href="UTxO.Weakening.html#8941" class="Function">outputsâ€¼</a> <a id="8950" class="Symbol">:</a> <a id="8952" class="Symbol">âˆ€</a> <a id="8954" class="Symbol">{</a><a id="8955" href="UTxO.Weakening.html#8955" class="Bound">t</a><a id="8956" class="Symbol">}</a> <a id="8958" class="Symbol">{</a><a id="8959" href="UTxO.Weakening.html#8959" class="Bound">x</a> <a id="8961" class="Symbol">:</a> <a id="8963" href="Utilities.Lists.html#1080" class="Function">Index</a> <a id="8969" class="Symbol">(</a><a id="8970" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="8980" href="UTxO.Weakening.html#8955" class="Bound">t</a><a id="8981" class="Symbol">)}</a>
             <a id="8997" class="Symbol">â†’</a> <a id="8999" class="Symbol">(</a><a id="9000" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="9008" class="Symbol">(</a><a id="9009" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="9018" href="UTxO.Weakening.html#8955" class="Bound">t</a><a id="9019" class="Symbol">)</a> <a id="9021" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9023" href="Utilities.Lists.html#2116" class="Function">cast</a> <a id="9028" class="Symbol">(</a><a id="9029" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="9033" class="Symbol">(</a><a id="9034" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="9043" class="Symbol">{</a><a id="9044" href="UTxO.Weakening.html#8955" class="Bound">t</a><a id="9045" class="Symbol">}))</a> <a id="9049" href="UTxO.Weakening.html#8959" class="Bound">x</a><a id="9050" class="Symbol">)</a>
             <a id="9065" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="9067" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="9082" class="Symbol">(</a><a id="9083" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="9093" href="UTxO.Weakening.html#8955" class="Bound">t</a> <a id="9095" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9097" href="UTxO.Weakening.html#8959" class="Bound">x</a><a id="9098" class="Symbol">)</a>
        <a id="9108" href="UTxO.Weakening.html#8941" class="Function">outputsâ€¼</a> <a id="9117" class="Symbol">{</a><a id="9118" href="UTxO.Weakening.html#9118" class="Bound">t</a><a id="9119" class="Symbol">}</a> <a id="9121" class="Symbol">{</a><a id="9122" href="UTxO.Weakening.html#9122" class="Bound">x</a><a id="9123" class="Symbol">}</a> <a id="9125" class="Keyword">rewrite</a> <a id="9133" href="Utilities.Lists.html#2758" class="Function">â€¼-map</a> <a id="9139" class="Symbol">{</a><a id="9140" class="Argument">f</a> <a id="9142" class="Symbol">=</a> <a id="9144" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a><a id="9158" class="Symbol">}</a> <a id="9160" class="Symbol">{</a><a id="9161" class="Argument">xs</a> <a id="9164" class="Symbol">=</a> <a id="9166" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="9176" href="UTxO.Weakening.html#9118" class="Bound">t</a><a id="9177" class="Symbol">}</a> <a id="9179" class="Symbol">{</a><a id="9180" class="Argument">i</a> <a id="9182" class="Symbol">=</a> <a id="9184" href="UTxO.Weakening.html#9122" class="Bound">x</a><a id="9185" class="Symbol">}</a>
                               <a id="9218" class="Symbol">|</a> <a id="9220" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="9229" class="Symbol">{</a><a id="9230" href="UTxO.Weakening.html#9118" class="Bound">t</a><a id="9231" class="Symbol">}</a>
                               <a id="9264" class="Symbol">=</a> <a id="9266" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

        <a id="9280" href="UTxO.Weakening.html#9280" class="Function">hâ‚‚</a> <a id="9283" class="Symbol">:</a> <a id="9285" class="Symbol">(</a><a id="9286" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="9292" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9294" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a><a id="9300" class="Symbol">)</a> <a id="9302" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="9304" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="9319" class="Symbol">(</a><a id="9320" href="UTxO.Weakening.html#7637" class="Function">outsâ‚€</a> <a id="9326" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9328" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="9334" class="Symbol">)</a>
        <a id="9344" href="UTxO.Weakening.html#9280" class="Function">hâ‚‚</a> <a id="9347" class="Symbol">=</a>
          <a id="9359" href="Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
            <a id="9377" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="9383" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9385" href="UTxO.Weakening.html#8340" class="Function">indexâ‚‚</a>
          <a id="9402" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="9405" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="9410" class="Symbol">(</a><a id="9411" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="9417" href="Utilities.Lists.html#1168" class="Function Operator">â€¼_</a><a id="9419" class="Symbol">)</a> <a id="9421" class="Symbol">(</a><a id="9422" href="Data.Fin.Properties.html#2448" class="Function">toâ„•-injective</a> <a id="9436" href="UTxO.Weakening.html#8423" class="Function">hh</a><a id="9438" class="Symbol">)</a> <a id="9440" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
            <a id="9454" href="UTxO.Weakening.html#7962" class="Function">outsâ‚‚</a> <a id="9460" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9462" href="Utilities.Lists.html#2116" class="Function">cast</a> <a id="9467" class="Symbol">(</a><a id="9468" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="9472" class="Symbol">(</a><a id="9473" href="UTxO.Weakening.html#4281" class="Function">outputsâ‰¡</a> <a id="9482" class="Symbol">{</a><a id="9483" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a><a id="9486" class="Symbol">}))</a> <a id="9490" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a>
          <a id="9507" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="9510" href="UTxO.Weakening.html#8941" class="Function">outputsâ€¼</a> <a id="9519" class="Symbol">{</a><a id="9520" class="Argument">t</a> <a id="9522" class="Symbol">=</a> <a id="9524" href="UTxO.Weakening.html#7528" class="Function">txâ‚€</a><a id="9527" class="Symbol">}</a> <a id="9529" class="Symbol">{</a><a id="9530" class="Argument">x</a> <a id="9532" class="Symbol">=</a> <a id="9534" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="9540" class="Symbol">}</a> <a id="9542" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
            <a id="9556" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="9571" class="Symbol">(</a><a id="9572" href="UTxO.Weakening.html#7637" class="Function">outsâ‚€</a> <a id="9578" href="Utilities.Lists.html#1168" class="Function Operator">â€¼</a> <a id="9580" href="UTxO.Weakening.html#8199" class="Function">indexâ‚€</a><a id="9586" class="Symbol">)</a>
          <a id="9598" href="Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">âˆ</a>

    <a id="9605" href="UTxO.Weakening.html#9605" class="Function">lookupValueâ‰¡</a> <a id="9618" class="Symbol">:</a> <a id="9620" class="Symbol">âˆ€</a> <a id="9622" class="Symbol">{</a><a id="9623" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9625" href="UTxO.Weakening.html#9625" class="Bound">iâˆˆ</a><a id="9627" class="Symbol">}</a> <a id="9629" class="Symbol">â†’</a>
        <a id="9639" href="UTxO.TxUtilities.html#2126" class="Function">A.lookupValue</a> <a id="9653" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="9655" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9657" class="Symbol">(</a><a id="9658" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="9662" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9664" href="UTxO.Weakening.html#9625" class="Bound">iâˆˆ</a><a id="9666" class="Symbol">)</a> <a id="9668" class="Symbol">(</a><a id="9669" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="9673" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9675" href="UTxO.Weakening.html#9625" class="Bound">iâˆˆ</a><a id="9677" class="Symbol">)</a>
      <a id="9685" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="9687" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="9699" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="9702" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9704" class="Symbol">(</a><a id="9705" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="9710" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9712" href="UTxO.Weakening.html#9625" class="Bound">iâˆˆ</a><a id="9714" class="Symbol">)</a> <a id="9716" class="Symbol">(</a><a id="9717" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="9722" href="UTxO.Weakening.html#9623" class="Bound">i</a> <a id="9724" href="UTxO.Weakening.html#9625" class="Bound">iâˆˆ</a><a id="9726" class="Symbol">)</a>
    <a id="9732" href="UTxO.Weakening.html#9605" class="Function">lookupValueâ‰¡</a> <a id="9745" class="Symbol">{</a><a id="9746" href="UTxO.Weakening.html#9746" class="Bound">i</a><a id="9747" class="Symbol">}</a> <a id="9749" class="Symbol">{</a><a id="9750" href="UTxO.Weakening.html#9750" class="Bound">iâˆˆ</a><a id="9752" class="Symbol">}</a>
      <a id="9760" class="Keyword">rewrite</a> <a id="9768" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="9788" class="Symbol">{</a><a id="9789" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="9790" class="Symbol">}</a> <a id="9792" class="Symbol">{</a><a id="9793" href="UTxO.Weakening.html#9746" class="Bound">i</a><a id="9794" class="Symbol">}</a> <a id="9796" class="Symbol">(</a><a id="9797" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="9801" href="UTxO.Weakening.html#9746" class="Bound">i</a> <a id="9803" href="UTxO.Weakening.html#9750" class="Bound">iâˆˆ</a><a id="9805" class="Symbol">)</a> <a id="9807" class="Symbol">(</a><a id="9808" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="9812" href="UTxO.Weakening.html#9746" class="Bound">i</a> <a id="9814" href="UTxO.Weakening.html#9750" class="Bound">iâˆˆ</a><a id="9816" class="Symbol">)</a>
            <a id="9830" class="Symbol">=</a> <a id="9832" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>


    <a id="9843" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a> <a id="9853" class="Symbol">:</a> <a id="9855" class="Symbol">âˆ€</a> <a id="9857" class="Symbol">{</a><a id="9858" href="UTxO.Weakening.html#9858" class="Bound">A</a> <a id="9860" class="Symbol">:</a> <a id="9862" class="PrimitiveType">Set</a><a id="9865" class="Symbol">}</a> <a id="9867" class="Symbol">{</a><a id="9868" href="UTxO.Weakening.html#9868" class="Bound">xs</a> <a id="9871" class="Symbol">:</a> <a id="9873" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="9878" href="UTxO.Types.html#1992" class="Record">TxInput</a><a id="9885" class="Symbol">}</a>
      <a id="9893" class="Symbol">â†’</a> <a id="9895" class="Symbol">(</a><a id="9896" href="UTxO.Weakening.html#9896" class="Bound">f</a> <a id="9898" class="Symbol">:</a> <a id="9900" class="Symbol">âˆ€</a> <a id="9902" class="Symbol">{</a><a id="9903" href="UTxO.Weakening.html#9903" class="Bound">i</a><a id="9904" class="Symbol">}</a> <a id="9906" class="Symbol">â†’</a> <a id="9908" href="UTxO.Weakening.html#9903" class="Bound">i</a> <a id="9910" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="9912" href="UTxO.Weakening.html#9868" class="Bound">xs</a> <a id="9915" class="Symbol">â†’</a> <a id="9917" href="UTxO.Weakening.html#9858" class="Bound">A</a><a id="9918" class="Symbol">)</a>
      <a id="9926" class="Symbol">â†’</a> <a id="9928" class="Symbol">(</a><a id="9929" href="UTxO.Weakening.html#9929" class="Bound">g</a> <a id="9931" class="Symbol">:</a> <a id="9933" class="Symbol">âˆ€</a> <a id="9935" class="Symbol">{</a><a id="9936" href="UTxO.Weakening.html#9936" class="Bound">i</a><a id="9937" class="Symbol">}</a> <a id="9939" class="Symbol">â†’</a> <a id="9941" href="UTxO.Weakening.html#9936" class="Bound">i</a> <a id="9943" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="9945" href="UTxO.Weakening.html#9868" class="Bound">xs</a> <a id="9948" class="Symbol">â†’</a> <a id="9950" href="UTxO.Weakening.html#9858" class="Bound">A</a><a id="9951" class="Symbol">)</a>
      <a id="9959" class="Symbol">â†’</a> <a id="9961" class="Symbol">(âˆ€</a> <a id="9964" class="Symbol">{</a><a id="9965" href="UTxO.Weakening.html#9965" class="Bound">i</a><a id="9966" class="Symbol">}</a> <a id="9968" class="Symbol">â†’</a> <a id="9970" class="Symbol">(</a><a id="9971" href="UTxO.Weakening.html#9971" class="Bound">iâˆˆ</a> <a id="9974" class="Symbol">:</a> <a id="9976" href="UTxO.Weakening.html#9965" class="Bound">i</a> <a id="9978" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="9980" href="UTxO.Weakening.html#9868" class="Bound">xs</a><a id="9982" class="Symbol">)</a> <a id="9984" class="Symbol">â†’</a> <a id="9986" href="UTxO.Weakening.html#9896" class="Bound">f</a> <a id="9988" href="UTxO.Weakening.html#9971" class="Bound">iâˆˆ</a> <a id="9991" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="9993" href="UTxO.Weakening.html#9929" class="Bound">g</a> <a id="9995" href="UTxO.Weakening.html#9971" class="Bound">iâˆˆ</a><a id="9997" class="Symbol">)</a>
      <a id="10005" class="Symbol">â†’</a> <a id="10007" href="Data.List.Relation.Binary.Pointwise.html#977" class="Datatype">Pointwise</a> <a id="10017" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_â‰¡_</a> <a id="10021" class="Symbol">(</a><a id="10022" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10031" href="UTxO.Weakening.html#9868" class="Bound">xs</a> <a id="10034" href="UTxO.Weakening.html#9896" class="Bound">f</a><a id="10035" class="Symbol">)</a> <a id="10037" class="Symbol">(</a><a id="10038" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10047" href="UTxO.Weakening.html#9868" class="Bound">xs</a> <a id="10050" href="UTxO.Weakening.html#9929" class="Bound">g</a><a id="10051" class="Symbol">)</a>
    <a id="10057" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a> <a id="10067" class="Symbol">{</a><a id="10068" class="Argument">xs</a> <a id="10071" class="Symbol">=</a> <a id="10073" href="Agda.Builtin.List.html#158" class="InductiveConstructor">[]</a><a id="10075" class="Symbol">}</a>     <a id="10081" href="UTxO.Weakening.html#10081" class="Bound">f</a> <a id="10083" href="UTxO.Weakening.html#10083" class="Bound">g</a> <a id="10085" href="UTxO.Weakening.html#10085" class="Bound">cong</a> <a id="10090" class="Symbol">=</a> <a id="10092" href="Data.List.Relation.Binary.Pointwise.html#1090" class="InductiveConstructor">Pointwise.[]</a>
    <a id="10109" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a> <a id="10119" class="Symbol">{</a><a id="10120" class="Argument">xs</a> <a id="10123" class="Symbol">=</a> <a id="10125" href="UTxO.Weakening.html#10125" class="Bound">x</a> <a id="10127" href="Agda.Builtin.List.html#173" class="InductiveConstructor Operator">âˆ·</a> <a id="10129" href="UTxO.Weakening.html#10129" class="Bound">xs</a><a id="10131" class="Symbol">}</a> <a id="10133" href="UTxO.Weakening.html#10133" class="Bound">f</a> <a id="10135" href="UTxO.Weakening.html#10135" class="Bound">g</a> <a id="10137" href="UTxO.Weakening.html#10137" class="Bound">cong</a> <a id="10142" class="Symbol">=</a>
      <a id="10150" href="UTxO.Weakening.html#10137" class="Bound">cong</a> <a id="10155" class="Symbol">(</a><a id="10156" href="Data.List.Relation.Unary.Any.html#1115" class="InductiveConstructor">here</a> <a id="10161" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="10165" class="Symbol">)</a>
        <a id="10175" href="Data.List.Relation.Binary.Pointwise.html#1118" class="InductiveConstructor Operator">Pointwise.âˆ·</a>
      <a id="10193" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a> <a id="10203" class="Symbol">(</a><a id="10204" href="UTxO.Weakening.html#10133" class="Bound">f</a> <a id="10206" href="Function.html#1085" class="Function Operator">âˆ˜</a> <a id="10208" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a><a id="10213" class="Symbol">)</a> <a id="10215" class="Symbol">(</a><a id="10216" href="UTxO.Weakening.html#10135" class="Bound">g</a> <a id="10218" href="Function.html#1085" class="Function Operator">âˆ˜</a> <a id="10220" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a><a id="10225" class="Symbol">)</a> <a id="10227" class="Symbol">Î»</a> <a id="10229" class="Symbol">{</a><a id="10230" href="UTxO.Weakening.html#10230" class="Bound">i</a><a id="10231" class="Symbol">}</a> <a id="10233" href="UTxO.Weakening.html#10233" class="Bound">iâˆˆ</a> <a id="10236" class="Symbol">â†’</a> <a id="10238" href="UTxO.Weakening.html#10137" class="Bound">cong</a> <a id="10243" class="Symbol">(</a><a id="10244" href="Data.List.Relation.Unary.Any.html#1168" class="InductiveConstructor">there</a> <a id="10250" href="UTxO.Weakening.html#10233" class="Bound">iâˆˆ</a><a id="10252" class="Symbol">)</a>

    <a id="10259" href="UTxO.Weakening.html#10259" class="Function">mapLookupValueâ‰¡</a> <a id="10275" class="Symbol">:</a>
        <a id="10285" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10294" class="Symbol">(</a><a id="10295" href="UTxO.Ledger.html#695" class="Field">A.inputs</a> <a id="10304" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="10306" class="Symbol">)</a> <a id="10308" class="Symbol">(Î»</a> <a id="10311" class="Symbol">{</a><a id="10312" href="UTxO.Weakening.html#10312" class="Bound">i</a><a id="10313" class="Symbol">}</a> <a id="10315" href="UTxO.Weakening.html#10315" class="Bound">iâˆˆ</a> <a id="10318" class="Symbol">â†’</a> <a id="10320" href="UTxO.TxUtilities.html#2126" class="Function">A.lookupValue</a> <a id="10334" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="10336" href="UTxO.Weakening.html#10312" class="Bound">i</a> <a id="10338" class="Symbol">(</a><a id="10339" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="10343" href="UTxO.Weakening.html#10312" class="Bound">i</a> <a id="10345" href="UTxO.Weakening.html#10315" class="Bound">iâˆˆ</a><a id="10347" class="Symbol">)</a> <a id="10349" class="Symbol">(</a><a id="10350" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="10354" href="UTxO.Weakening.html#10312" class="Bound">i</a> <a id="10356" href="UTxO.Weakening.html#10315" class="Bound">iâˆˆ</a><a id="10358" class="Symbol">))</a>
      <a id="10367" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="10369" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10378" class="Symbol">(</a><a id="10379" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="10386" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="10389" class="Symbol">)</a> <a id="10391" class="Symbol">(Î»</a> <a id="10394" class="Symbol">{</a><a id="10395" href="UTxO.Weakening.html#10395" class="Bound">i</a><a id="10396" class="Symbol">}</a> <a id="10398" href="UTxO.Weakening.html#10398" class="Bound">iâˆˆ</a> <a id="10401" class="Symbol">â†’</a> <a id="10403" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="10415" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="10418" href="UTxO.Weakening.html#10395" class="Bound">i</a> <a id="10420" class="Symbol">(</a><a id="10421" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="10426" href="UTxO.Weakening.html#10395" class="Bound">i</a> <a id="10428" href="UTxO.Weakening.html#10398" class="Bound">iâˆˆ</a><a id="10430" class="Symbol">)</a> <a id="10432" class="Symbol">(</a><a id="10433" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="10438" href="UTxO.Weakening.html#10395" class="Bound">i</a> <a id="10440" href="UTxO.Weakening.html#10398" class="Bound">iâˆˆ</a><a id="10442" class="Symbol">))</a>
    <a id="10449" href="UTxO.Weakening.html#10259" class="Function">mapLookupValueâ‰¡</a> <a id="10465" class="Symbol">=</a>
      <a id="10473" href="Data.List.Relation.Binary.Pointwise.html#10989" class="Function">Pointwise-â‰¡â‡’â‰¡</a> <a id="10487" class="Symbol">(</a><a id="10488" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a>
        <a id="10506" class="Symbol">(Î»</a> <a id="10509" class="Symbol">{</a><a id="10510" href="UTxO.Weakening.html#10510" class="Bound">i</a><a id="10511" class="Symbol">}</a> <a id="10513" href="UTxO.Weakening.html#10513" class="Bound">iâˆˆ</a> <a id="10516" class="Symbol">â†’</a> <a id="10518" href="UTxO.TxUtilities.html#2126" class="Function">A.lookupValue</a> <a id="10532" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="10534" href="UTxO.Weakening.html#10510" class="Bound">i</a> <a id="10536" class="Symbol">(</a><a id="10537" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="10541" href="UTxO.Weakening.html#10510" class="Bound">i</a> <a id="10543" href="UTxO.Weakening.html#10513" class="Bound">iâˆˆ</a><a id="10545" class="Symbol">)</a> <a id="10547" class="Symbol">(</a><a id="10548" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="10552" href="UTxO.Weakening.html#10510" class="Bound">i</a> <a id="10554" href="UTxO.Weakening.html#10513" class="Bound">iâˆˆ</a><a id="10556" class="Symbol">))</a>
        <a id="10567" class="Symbol">(Î»</a> <a id="10570" class="Symbol">{</a><a id="10571" href="UTxO.Weakening.html#10571" class="Bound">i</a><a id="10572" class="Symbol">}</a> <a id="10574" href="UTxO.Weakening.html#10574" class="Bound">iâˆˆ</a> <a id="10577" class="Symbol">â†’</a> <a id="10579" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="10591" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="10594" href="UTxO.Weakening.html#10571" class="Bound">i</a> <a id="10596" class="Symbol">(</a><a id="10597" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="10602" href="UTxO.Weakening.html#10571" class="Bound">i</a> <a id="10604" href="UTxO.Weakening.html#10574" class="Bound">iâˆˆ</a><a id="10606" class="Symbol">)</a> <a id="10608" class="Symbol">(</a><a id="10609" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="10614" href="UTxO.Weakening.html#10571" class="Bound">i</a> <a id="10616" href="UTxO.Weakening.html#10574" class="Bound">iâˆˆ</a><a id="10618" class="Symbol">))</a>
        <a id="10629" class="Symbol">(Î»</a> <a id="10632" class="Symbol">{</a><a id="10633" href="UTxO.Weakening.html#10633" class="Bound">i</a><a id="10634" class="Symbol">}</a> <a id="10636" href="UTxO.Weakening.html#10636" class="Bound">iâˆˆ</a> <a id="10639" class="Symbol">â†’</a> <a id="10641" href="UTxO.Weakening.html#9605" class="Function">lookupValueâ‰¡</a> <a id="10654" class="Symbol">{</a><a id="10655" href="UTxO.Weakening.html#10633" class="Bound">i</a><a id="10656" class="Symbol">}</a> <a id="10658" class="Symbol">{</a><a id="10659" href="UTxO.Weakening.html#10636" class="Bound">iâˆˆ</a><a id="10661" class="Symbol">}))</a>

    <a id="10670" href="UTxO.Weakening.html#10670" class="Function">pvâ‚</a> <a id="10674" class="Symbol">:</a>
      <a id="10682" href="UTxO.Ledger.html#772" class="Field">forge</a> <a id="10688" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="10692" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="10695" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="10700" class="Symbol">(</a><a id="10701" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10710" class="Symbol">(</a><a id="10711" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="10718" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="10721" class="Symbol">)</a> <a id="10723" class="Symbol">Î»</a> <a id="10725" class="Symbol">{</a><a id="10726" href="UTxO.Weakening.html#10726" class="Bound">i</a><a id="10727" class="Symbol">}</a> <a id="10729" href="UTxO.Weakening.html#10729" class="Bound">iâˆˆ</a> <a id="10732" class="Symbol">â†’</a> <a id="10734" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="10746" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="10749" href="UTxO.Weakening.html#10726" class="Bound">i</a> <a id="10751" class="Symbol">(</a><a id="10752" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="10757" href="UTxO.Weakening.html#10726" class="Bound">i</a> <a id="10759" href="UTxO.Weakening.html#10729" class="Bound">iâˆˆ</a><a id="10761" class="Symbol">)</a> <a id="10763" class="Symbol">(</a><a id="10764" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="10769" href="UTxO.Weakening.html#10726" class="Bound">i</a> <a id="10771" href="UTxO.Weakening.html#10729" class="Bound">iâˆˆ</a><a id="10773" class="Symbol">))</a>
        <a id="10784" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a>
      <a id="10792" href="UTxO.Ledger.html#772" class="Field">A.forge</a> <a id="10800" href="UTxO.Weakening.html#2981" class="Bound">tx</a> <a id="10803" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="10806" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="10811" class="Symbol">(</a><a id="10812" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="10821" class="Symbol">(</a><a id="10822" href="UTxO.Ledger.html#695" class="Field">A.inputs</a> <a id="10831" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="10833" class="Symbol">)</a> <a id="10835" class="Symbol">Î»</a> <a id="10837" class="Symbol">{</a><a id="10838" href="UTxO.Weakening.html#10838" class="Bound">i</a><a id="10839" class="Symbol">}</a> <a id="10841" href="UTxO.Weakening.html#10841" class="Bound">iâˆˆ</a> <a id="10844" class="Symbol">â†’</a> <a id="10846" href="UTxO.TxUtilities.html#2126" class="Function">A.lookupValue</a> <a id="10860" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="10862" href="UTxO.Weakening.html#10838" class="Bound">i</a> <a id="10864" class="Symbol">(</a><a id="10865" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="10869" href="UTxO.Weakening.html#10838" class="Bound">i</a> <a id="10871" href="UTxO.Weakening.html#10841" class="Bound">iâˆˆ</a><a id="10873" class="Symbol">)</a> <a id="10875" class="Symbol">(</a><a id="10876" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="10880" href="UTxO.Weakening.html#10838" class="Bound">i</a> <a id="10882" href="UTxO.Weakening.html#10841" class="Bound">iâˆˆ</a><a id="10884" class="Symbol">))</a>
    <a id="10891" href="UTxO.Weakening.html#10670" class="Function">pvâ‚</a> <a id="10895" class="Keyword">rewrite</a> <a id="10903" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="10907" class="Symbol">(</a><a id="10908" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="10913" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="10918" href="UTxO.Weakening.html#10259" class="Function">mapLookupValueâ‰¡</a><a id="10933" class="Symbol">)</a> <a id="10935" class="Symbol">=</a> <a id="10937" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="10947" href="UTxO.Weakening.html#10947" class="Function">pvâ‚‚</a> <a id="10951" class="Symbol">:</a>
      <a id="10959" href="UTxO.Ledger.html#792" class="Field">fee</a> <a id="10963" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="10967" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="10970" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="10975" class="Symbol">(</a><a id="10976" href="Data.List.Base.html#1304" class="Function">map</a> <a id="10980" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="10986" class="Symbol">(</a><a id="10987" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="10995" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="10998" class="Symbol">))</a>
        <a id="11009" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a>
      <a id="11017" href="UTxO.Ledger.html#792" class="Field">A.fee</a> <a id="11023" href="UTxO.Weakening.html#2981" class="Bound">tx</a> <a id="11026" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="11029" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="11034" class="Symbol">(</a><a id="11035" href="Data.List.Base.html#1304" class="Function">map</a> <a id="11039" href="UTxO.Ledger.html#547" class="Field">A.value</a> <a id="11047" class="Symbol">(</a><a id="11048" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="11058" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="11060" class="Symbol">))</a>
    <a id="11067" href="UTxO.Weakening.html#10947" class="Function">pvâ‚‚</a> <a id="11071" class="Keyword">rewrite</a> <a id="11079" href="UTxO.Weakening.html#6476" class="Function">Î£valueâ‰¡</a> <a id="11087" class="Symbol">=</a> <a id="11089" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="11099" href="UTxO.Weakening.html#11099" class="Function">pvâ€²</a> <a id="11103" class="Symbol">:</a>
      <a id="11111" href="UTxO.Ledger.html#772" class="Field">forge</a> <a id="11117" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="11121" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="11124" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="11129" class="Symbol">(</a><a id="11130" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="11139" class="Symbol">(</a><a id="11140" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="11147" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="11150" class="Symbol">)</a> <a id="11152" class="Symbol">Î»</a> <a id="11154" class="Symbol">{</a><a id="11155" href="UTxO.Weakening.html#11155" class="Bound">i</a><a id="11156" class="Symbol">}</a> <a id="11158" href="UTxO.Weakening.html#11158" class="Bound">iâˆˆ</a> <a id="11161" class="Symbol">â†’</a> <a id="11163" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="11175" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="11178" href="UTxO.Weakening.html#11155" class="Bound">i</a> <a id="11180" class="Symbol">(</a><a id="11181" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="11186" href="UTxO.Weakening.html#11155" class="Bound">i</a> <a id="11188" href="UTxO.Weakening.html#11158" class="Bound">iâˆˆ</a><a id="11190" class="Symbol">)</a> <a id="11192" class="Symbol">(</a><a id="11193" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="11198" href="UTxO.Weakening.html#11155" class="Bound">i</a> <a id="11200" href="UTxO.Weakening.html#11158" class="Bound">iâˆˆ</a><a id="11202" class="Symbol">))</a>
        <a id="11213" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a>
      <a id="11221" href="UTxO.Ledger.html#792" class="Field">fee</a> <a id="11225" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="11229" href="Utilities.Currency.html#957" class="Function Operator">+á¶œ</a> <a id="11232" href="Utilities.Currency.html#1167" class="Function">sumá¶œ</a> <a id="11237" class="Symbol">(</a><a id="11238" href="Data.List.Base.html#1304" class="Function">map</a> <a id="11242" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="11248" class="Symbol">(</a><a id="11249" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="11257" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="11260" class="Symbol">))</a>
    <a id="11267" href="UTxO.Weakening.html#11099" class="Function">pvâ€²</a> <a id="11271" class="Keyword">rewrite</a> <a id="11279" href="UTxO.Weakening.html#10670" class="Function">pvâ‚</a> <a id="11283" class="Symbol">|</a> <a id="11285" href="UTxO.Weakening.html#10947" class="Function">pvâ‚‚</a> <a id="11289" class="Symbol">=</a> <a id="11291" href="UTxO.Weakening.html#3171" class="Bound">pv</a>

    <a id="11299" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="11389" href="UTxO.Weakening.html#11389" class="Function">vdsâ€²</a> <a id="11394" class="Symbol">:</a> <a id="11396" class="Symbol">âˆ€</a> <a id="11398" href="UTxO.Weakening.html#11398" class="Bound">i</a> <a id="11400" class="Symbol">â†’</a> <a id="11402" class="Symbol">(</a><a id="11403" href="UTxO.Weakening.html#11403" class="Bound">iâˆˆ</a> <a id="11406" class="Symbol">:</a> <a id="11408" href="UTxO.Weakening.html#11398" class="Bound">i</a> <a id="11410" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="11412" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="11419" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="11422" class="Symbol">)</a> <a id="11424" class="Symbol">â†’</a>
      <a id="11432" href="UTxO.Types.html#2122" class="Field">D</a> <a id="11434" href="UTxO.Weakening.html#11398" class="Bound">i</a> <a id="11436" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="11438" href="UTxO.Ledger.html#590" class="Field">Data</a> <a id="11443" class="Symbol">(</a><a id="11444" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="11457" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="11460" class="Symbol">(</a><a id="11461" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="11471" href="UTxO.Weakening.html#11398" class="Bound">i</a><a id="11472" class="Symbol">)</a> <a id="11474" class="Symbol">(</a><a id="11475" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="11480" href="UTxO.Weakening.html#11398" class="Bound">i</a> <a id="11482" href="UTxO.Weakening.html#11403" class="Bound">iâˆˆ</a><a id="11484" class="Symbol">)</a> <a id="11486" class="Symbol">(</a><a id="11487" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="11492" href="UTxO.Weakening.html#11398" class="Bound">i</a> <a id="11494" href="UTxO.Weakening.html#11403" class="Bound">iâˆˆ</a><a id="11496" class="Symbol">))</a>
    <a id="11503" href="UTxO.Weakening.html#11389" class="Function">vdsâ€²</a> <a id="11508" href="UTxO.Weakening.html#11508" class="Bound">i</a> <a id="11510" href="UTxO.Weakening.html#11510" class="Bound">iâˆˆ</a> <a id="11513" class="Keyword">rewrite</a> <a id="11521" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="11541" class="Symbol">{</a><a id="11542" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="11543" class="Symbol">}</a> <a id="11545" class="Symbol">{</a><a id="11546" href="UTxO.Weakening.html#11508" class="Bound">i</a><a id="11547" class="Symbol">}</a> <a id="11549" class="Symbol">(</a><a id="11550" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="11554" href="UTxO.Weakening.html#11508" class="Bound">i</a> <a id="11556" href="UTxO.Weakening.html#11510" class="Bound">iâˆˆ</a><a id="11558" class="Symbol">)</a> <a id="11560" class="Symbol">(</a><a id="11561" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="11565" href="UTxO.Weakening.html#11508" class="Bound">i</a> <a id="11567" href="UTxO.Weakening.html#11510" class="Bound">iâˆˆ</a><a id="11569" class="Symbol">)</a> <a id="11571" class="Symbol">=</a> <a id="11573" href="UTxO.Weakening.html#3136" class="Bound">vds</a> <a id="11577" href="UTxO.Weakening.html#11508" class="Bound">i</a> <a id="11579" href="UTxO.Weakening.html#11510" class="Bound">iâˆˆ</a>

    <a id="11587" href="UTxO.Weakening.html#11587" class="Function">vdsâ€³</a> <a id="11592" class="Symbol">:</a> <a id="11594" class="Symbol">âˆ€</a> <a id="11596" href="UTxO.Weakening.html#11596" class="Bound">i</a> <a id="11598" class="Symbol">â†’</a> <a id="11600" class="Symbol">(</a><a id="11601" href="UTxO.Weakening.html#11601" class="Bound">iâˆˆ</a> <a id="11604" class="Symbol">:</a> <a id="11606" href="UTxO.Weakening.html#11596" class="Bound">i</a> <a id="11608" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="11610" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="11617" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="11620" class="Symbol">)</a> <a id="11622" class="Symbol">â†’</a>
      <a id="11630" href="UTxO.Types.html#2122" class="Field">D</a> <a id="11632" href="UTxO.Weakening.html#11596" class="Bound">i</a> <a id="11634" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="11636" href="UTxO.Ledger.html#590" class="Field">Data</a> <a id="11641" class="Symbol">(</a><a id="11642" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="11657" class="Symbol">(</a><a id="11658" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="11673" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="11675" class="Symbol">(</a><a id="11676" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="11686" href="UTxO.Weakening.html#11596" class="Bound">i</a><a id="11687" class="Symbol">)</a> <a id="11689" class="Symbol">(</a><a id="11690" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="11694" href="UTxO.Weakening.html#11596" class="Bound">i</a> <a id="11696" href="UTxO.Weakening.html#11601" class="Bound">iâˆˆ</a><a id="11698" class="Symbol">)</a> <a id="11700" class="Symbol">(</a><a id="11701" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="11705" href="UTxO.Weakening.html#11596" class="Bound">i</a> <a id="11707" href="UTxO.Weakening.html#11601" class="Bound">iâˆˆ</a><a id="11709" class="Symbol">)))</a>
    <a id="11717" href="UTxO.Weakening.html#11587" class="Function">vdsâ€³</a> <a id="11722" href="UTxO.Weakening.html#11722" class="Bound">i</a> <a id="11724" href="UTxO.Weakening.html#11724" class="Bound">iâˆˆ</a> <a id="11727" class="Symbol">=</a> <a id="11729" href="UTxO.Weakening.html#3136" class="Bound">vds</a> <a id="11733" href="UTxO.Weakening.html#11722" class="Bound">i</a> <a id="11735" href="UTxO.Weakening.html#11724" class="Bound">iâˆˆ</a>

    <a id="11743" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="11833" href="UTxO.Weakening.html#11833" class="Function">valueâ‰¡</a> <a id="11840" class="Symbol">:</a> <a id="11842" class="Symbol">âˆ€</a> <a id="11844" class="Symbol">{</a><a id="11845" href="UTxO.Weakening.html#11845" class="Bound">o</a><a id="11846" class="Symbol">}</a> <a id="11848" class="Symbol">â†’</a> <a id="11850" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="11856" class="Symbol">(</a><a id="11857" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="11872" href="UTxO.Weakening.html#11845" class="Bound">o</a><a id="11873" class="Symbol">)</a> <a id="11875" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="11877" href="UTxO.Ledger.html#547" class="Field">A.value</a> <a id="11885" href="UTxO.Weakening.html#11845" class="Bound">o</a>
    <a id="11891" href="UTxO.Weakening.html#11833" class="Function">valueâ‰¡</a> <a id="11898" class="Symbol">=</a> <a id="11900" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="11910" href="UTxO.Weakening.html#11910" class="Function">dataScriptâ‰¡</a> <a id="11922" class="Symbol">:</a> <a id="11924" class="Symbol">âˆ€</a> <a id="11926" class="Symbol">{</a><a id="11927" href="UTxO.Weakening.html#11927" class="Bound">o</a><a id="11928" class="Symbol">}</a> <a id="11930" class="Symbol">â†’</a> <a id="11932" href="UTxO.Ledger.html#609" class="Field">dataScript</a> <a id="11943" class="Symbol">(</a><a id="11944" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="11959" href="UTxO.Weakening.html#11927" class="Bound">o</a><a id="11960" class="Symbol">)</a> <a id="11962" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="11964" href="UTxO.Ledger.html#609" class="Field">A.dataScript</a> <a id="11977" href="UTxO.Weakening.html#11927" class="Bound">o</a>
    <a id="11983" href="UTxO.Weakening.html#11910" class="Function">dataScriptâ‰¡</a> <a id="11995" class="Symbol">=</a> <a id="11997" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="12007" href="UTxO.Weakening.html#12007" class="Function">mapPendingâ‰¡</a> <a id="12019" class="Symbol">:</a> <a id="12021" class="Symbol">(</a><a id="12022" href="Data.List.Base.html#1304" class="Function">map</a> <a id="12026" href="UTxO.TxUtilities.html#2659" class="Function">mkPendingTxOut</a> <a id="12041" href="Function.html#1085" class="Function Operator">âˆ˜</a> <a id="12043" href="Data.List.Base.html#1304" class="Function">map</a> <a id="12047" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a><a id="12061" class="Symbol">)</a> <a id="12063" class="Symbol">(</a><a id="12064" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="12074" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="12076" class="Symbol">)</a>
              <a id="12092" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="12094" href="Data.List.Base.html#1304" class="Function">map</a> <a id="12098" href="UTxO.TxUtilities.html#2659" class="Function">A.mkPendingTxOut</a> <a id="12115" class="Symbol">(</a><a id="12116" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="12126" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="12128" class="Symbol">)</a>
    <a id="12134" href="UTxO.Weakening.html#12007" class="Function">mapPendingâ‰¡</a>
      <a id="12152" class="Keyword">rewrite</a> <a id="12160" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="12164" class="Symbol">(</a><a id="12165" href="Data.List.Properties.html#3367" class="Function">map-compose</a> <a id="12177" class="Symbol">{</a><a id="12178" class="Argument">g</a> <a id="12180" class="Symbol">=</a> <a id="12182" href="UTxO.TxUtilities.html#2659" class="Function">mkPendingTxOut</a><a id="12196" class="Symbol">}</a> <a id="12198" class="Symbol">{</a><a id="12199" class="Argument">f</a> <a id="12201" class="Symbol">=</a> <a id="12203" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a><a id="12217" class="Symbol">}</a> <a id="12219" class="Symbol">(</a><a id="12220" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="12230" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="12232" class="Symbol">))</a>
            <a id="12247" class="Symbol">=</a> <a id="12249" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="12259" href="UTxO.Weakening.html#12259" class="Function">pendingOutâ‰¡</a> <a id="12271" class="Symbol">:</a> <a id="12273" href="Data.List.Base.html#1304" class="Function">map</a> <a id="12277" href="UTxO.TxUtilities.html#2659" class="Function">mkPendingTxOut</a> <a id="12292" class="Symbol">(</a><a id="12293" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="12301" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="12304" class="Symbol">)</a>
                <a id="12322" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="12324" href="Data.List.Base.html#1304" class="Function">map</a> <a id="12328" href="UTxO.TxUtilities.html#2659" class="Function">A.mkPendingTxOut</a> <a id="12345" class="Symbol">(</a><a id="12346" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="12356" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="12358" class="Symbol">)</a>
    <a id="12364" href="UTxO.Weakening.html#12259" class="Function">pendingOutâ‰¡</a> <a id="12376" class="Keyword">rewrite</a> <a id="12384" href="UTxO.Weakening.html#12007" class="Function">mapPendingâ‰¡</a>
                      <a id="12418" class="Symbol">=</a> <a id="12420" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>


    <a id="12431" href="UTxO.Weakening.html#12431" class="Function">mkPendingâ‰¡</a> <a id="12442" class="Symbol">:</a> <a id="12444" class="Symbol">âˆ€</a> <a id="12446" class="Symbol">{</a><a id="12447" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12449" href="UTxO.Weakening.html#12449" class="Bound">iâˆˆ</a><a id="12451" class="Symbol">}</a> <a id="12453" class="Symbol">â†’</a>
        <a id="12463" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="12479" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="12481" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12483" class="Symbol">(</a><a id="12484" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="12488" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12490" href="UTxO.Weakening.html#12449" class="Bound">iâˆˆ</a><a id="12492" class="Symbol">)</a> <a id="12494" class="Symbol">(</a><a id="12495" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="12499" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12501" href="UTxO.Weakening.html#12449" class="Bound">iâˆˆ</a><a id="12503" class="Symbol">)</a>
      <a id="12511" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="12513" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="12527" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="12530" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12532" class="Symbol">(</a><a id="12533" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="12538" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12540" href="UTxO.Weakening.html#12449" class="Bound">iâˆˆ</a><a id="12542" class="Symbol">)</a> <a id="12544" class="Symbol">(</a><a id="12545" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="12550" href="UTxO.Weakening.html#12447" class="Bound">i</a> <a id="12552" href="UTxO.Weakening.html#12449" class="Bound">iâˆˆ</a><a id="12554" class="Symbol">)</a>
    <a id="12560" href="UTxO.Weakening.html#12431" class="Function">mkPendingâ‰¡</a> <a id="12571" class="Symbol">{</a><a id="12572" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="12573" class="Symbol">}</a> <a id="12575" class="Symbol">{</a><a id="12576" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="12578" class="Symbol">}</a> <a id="12580" class="Symbol">=</a>
      <a id="12588" href="Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
        <a id="12602" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="12618" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="12620" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12622" class="Symbol">(</a><a id="12623" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="12627" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12629" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="12631" class="Symbol">)</a> <a id="12633" class="Symbol">(</a><a id="12634" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="12638" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12640" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="12642" class="Symbol">)</a>
      <a id="12650" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
       <a id="12661" class="Keyword">record</a> <a id="12668" class="Symbol">{</a> <a id="12670" href="UTxO.Types.html#1289" class="Field">value</a>         <a id="12684" class="Symbol">=</a> <a id="12686" href="UTxO.TxUtilities.html#2126" class="Function">A.lookupValue</a> <a id="12700" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="12702" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12704" class="Symbol">(</a><a id="12705" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="12709" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12711" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="12713" class="Symbol">)</a> <a id="12715" class="Symbol">(</a><a id="12716" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="12720" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="12722" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="12724" class="Symbol">)</a>
              <a id="12740" class="Symbol">;</a> <a id="12742" href="UTxO.Types.html#1315" class="Field">validatorHash</a> <a id="12756" class="Symbol">=</a> <a id="12758" class="Symbol">(</a><a id="12759" href="UTxO.Types.html#2217" class="Field">validator</a> <a id="12769" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="12770" class="Symbol">)</a> <a id="12772" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
              <a id="12788" class="Symbol">;</a> <a id="12790" href="UTxO.Types.html#1342" class="Field">redeemerHash</a>  <a id="12804" class="Symbol">=</a> <a id="12806" class="Symbol">(</a><a id="12807" href="UTxO.Types.html#2188" class="Field">redeemer</a> <a id="12816" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="12817" class="Symbol">)</a> <a id="12819" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
              <a id="12835" class="Symbol">}</a>
      <a id="12843" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="12846" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="12851" class="Symbol">(Î»</a> <a id="12854" href="UTxO.Weakening.html#12854" class="Bound">v</a> <a id="12856" class="Symbol">â†’</a> <a id="12858" class="Keyword">record</a> <a id="12865" class="Symbol">{</a> <a id="12867" href="UTxO.Types.html#1289" class="Field">value</a> <a id="12873" class="Symbol">=</a> <a id="12875" href="UTxO.Weakening.html#12854" class="Bound">v</a>
                            <a id="12905" class="Symbol">;</a> <a id="12907" href="UTxO.Types.html#1315" class="Field">validatorHash</a> <a id="12921" class="Symbol">=</a> <a id="12923" class="Symbol">(</a><a id="12924" href="UTxO.Types.html#2217" class="Field">validator</a> <a id="12934" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="12935" class="Symbol">)</a> <a id="12937" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
                            <a id="12967" class="Symbol">;</a> <a id="12969" href="UTxO.Types.html#1342" class="Field">redeemerHash</a>  <a id="12983" class="Symbol">=</a> <a id="12985" class="Symbol">(</a><a id="12986" href="UTxO.Types.html#2188" class="Field">redeemer</a> <a id="12995" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="12996" class="Symbol">)</a> <a id="12998" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
                            <a id="13028" class="Symbol">})</a> <a id="13031" class="Symbol">(</a><a id="13032" href="UTxO.Weakening.html#9605" class="Function">lookupValueâ‰¡</a> <a id="13045" class="Symbol">{</a><a id="13046" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="13047" class="Symbol">}</a> <a id="13049" class="Symbol">{</a><a id="13050" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="13052" class="Symbol">})</a> <a id="13055" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
       <a id="13064" class="Keyword">record</a> <a id="13071" class="Symbol">{</a> <a id="13073" href="UTxO.Types.html#1289" class="Field">value</a>         <a id="13087" class="Symbol">=</a> <a id="13089" href="UTxO.TxUtilities.html#2126" class="Function">lookupValue</a> <a id="13101" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="13104" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13106" class="Symbol">(</a><a id="13107" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="13112" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13114" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="13116" class="Symbol">)</a> <a id="13118" class="Symbol">(</a><a id="13119" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="13124" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13126" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="13128" class="Symbol">)</a>
              <a id="13144" class="Symbol">;</a> <a id="13146" href="UTxO.Types.html#1315" class="Field">validatorHash</a> <a id="13160" class="Symbol">=</a> <a id="13162" class="Symbol">(</a><a id="13163" href="UTxO.Types.html#2217" class="Field">validator</a> <a id="13173" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="13174" class="Symbol">)</a> <a id="13176" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
              <a id="13192" class="Symbol">;</a> <a id="13194" href="UTxO.Types.html#1342" class="Field">redeemerHash</a>  <a id="13208" class="Symbol">=</a> <a id="13210" class="Symbol">(</a><a id="13211" href="UTxO.Types.html#2188" class="Field">redeemer</a> <a id="13220" href="UTxO.Weakening.html#12572" class="Bound">i</a><a id="13221" class="Symbol">)</a> <a id="13223" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
              <a id="13239" class="Symbol">}</a>
      <a id="13247" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="13259" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="13273" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="13276" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13278" class="Symbol">(</a><a id="13279" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="13284" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13286" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="13288" class="Symbol">)</a> <a id="13290" class="Symbol">(</a><a id="13291" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="13296" href="UTxO.Weakening.html#12572" class="Bound">i</a> <a id="13298" href="UTxO.Weakening.html#12576" class="Bound">iâˆˆ</a><a id="13300" class="Symbol">)</a>
      <a id="13308" href="Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">âˆ</a>

    <a id="13315" href="UTxO.Weakening.html#13315" class="Function">pendingInâ‰¡</a> <a id="13326" class="Symbol">:</a> <a id="13328" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="13337" class="Symbol">(</a><a id="13338" href="UTxO.Ledger.html#695" class="Field">A.inputs</a> <a id="13347" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="13349" class="Symbol">)</a> <a id="13351" class="Symbol">(Î»</a> <a id="13354" class="Symbol">{</a><a id="13355" href="UTxO.Weakening.html#13355" class="Bound">i</a><a id="13356" class="Symbol">}</a> <a id="13358" href="UTxO.Weakening.html#13358" class="Bound">iâˆˆ</a> <a id="13361" class="Symbol">â†’</a> <a id="13363" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="13379" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="13381" href="UTxO.Weakening.html#13355" class="Bound">i</a> <a id="13383" class="Symbol">(</a><a id="13384" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="13388" href="UTxO.Weakening.html#13355" class="Bound">i</a> <a id="13390" href="UTxO.Weakening.html#13358" class="Bound">iâˆˆ</a><a id="13392" class="Symbol">)</a> <a id="13394" class="Symbol">(</a><a id="13395" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="13399" href="UTxO.Weakening.html#13355" class="Bound">i</a> <a id="13401" href="UTxO.Weakening.html#13358" class="Bound">iâˆˆ</a><a id="13403" class="Symbol">))</a>
               <a id="13421" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="13423" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="13432" class="Symbol">(</a><a id="13433" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="13440" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="13443" class="Symbol">)</a> <a id="13445" class="Symbol">(Î»</a> <a id="13448" class="Symbol">{</a><a id="13449" href="UTxO.Weakening.html#13449" class="Bound">i</a><a id="13450" class="Symbol">}</a> <a id="13452" href="UTxO.Weakening.html#13452" class="Bound">iâˆˆ</a> <a id="13455" class="Symbol">â†’</a> <a id="13457" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="13471" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="13474" href="UTxO.Weakening.html#13449" class="Bound">i</a> <a id="13476" class="Symbol">(</a><a id="13477" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="13482" href="UTxO.Weakening.html#13449" class="Bound">i</a> <a id="13484" href="UTxO.Weakening.html#13452" class="Bound">iâˆˆ</a><a id="13486" class="Symbol">)</a> <a id="13488" class="Symbol">(</a><a id="13489" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="13494" href="UTxO.Weakening.html#13449" class="Bound">i</a> <a id="13496" href="UTxO.Weakening.html#13452" class="Bound">iâˆˆ</a><a id="13498" class="Symbol">))</a>
    <a id="13505" href="UTxO.Weakening.html#13315" class="Function">pendingInâ‰¡</a> <a id="13516" class="Symbol">=</a>
      <a id="13524" href="Data.List.Relation.Binary.Pointwise.html#10989" class="Function">Pointwise-â‰¡â‡’â‰¡</a> <a id="13538" class="Symbol">(</a><a id="13539" href="UTxO.Weakening.html#9843" class="Function">mapâˆˆ-cong</a>
        <a id="13557" class="Symbol">(Î»</a> <a id="13560" class="Symbol">{</a><a id="13561" href="UTxO.Weakening.html#13561" class="Bound">i</a><a id="13562" class="Symbol">}</a> <a id="13564" href="UTxO.Weakening.html#13564" class="Bound">iâˆˆ</a> <a id="13567" class="Symbol">â†’</a> <a id="13569" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="13585" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="13587" href="UTxO.Weakening.html#13561" class="Bound">i</a> <a id="13589" class="Symbol">(</a><a id="13590" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="13594" href="UTxO.Weakening.html#13561" class="Bound">i</a> <a id="13596" href="UTxO.Weakening.html#13564" class="Bound">iâˆˆ</a><a id="13598" class="Symbol">)</a> <a id="13600" class="Symbol">(</a><a id="13601" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="13605" href="UTxO.Weakening.html#13561" class="Bound">i</a> <a id="13607" href="UTxO.Weakening.html#13564" class="Bound">iâˆˆ</a><a id="13609" class="Symbol">))</a>
        <a id="13620" class="Symbol">(Î»</a> <a id="13623" class="Symbol">{</a><a id="13624" href="UTxO.Weakening.html#13624" class="Bound">i</a><a id="13625" class="Symbol">}</a> <a id="13627" href="UTxO.Weakening.html#13627" class="Bound">iâˆˆ</a> <a id="13630" class="Symbol">â†’</a> <a id="13632" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="13646" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="13649" href="UTxO.Weakening.html#13624" class="Bound">i</a> <a id="13651" class="Symbol">(</a><a id="13652" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="13657" href="UTxO.Weakening.html#13624" class="Bound">i</a> <a id="13659" href="UTxO.Weakening.html#13627" class="Bound">iâˆˆ</a><a id="13661" class="Symbol">)</a> <a id="13663" class="Symbol">(</a><a id="13664" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="13669" href="UTxO.Weakening.html#13624" class="Bound">i</a> <a id="13671" href="UTxO.Weakening.html#13627" class="Bound">iâˆˆ</a><a id="13673" class="Symbol">))</a>
        <a id="13684" class="Symbol">(Î»</a> <a id="13687" class="Symbol">{</a><a id="13688" href="UTxO.Weakening.html#13688" class="Bound">i</a><a id="13689" class="Symbol">}</a> <a id="13691" href="UTxO.Weakening.html#13691" class="Bound">iâˆˆ</a> <a id="13694" class="Symbol">â†’</a> <a id="13696" href="UTxO.Weakening.html#12431" class="Function">mkPendingâ‰¡</a> <a id="13707" class="Symbol">{</a><a id="13708" href="UTxO.Weakening.html#13688" class="Bound">i</a><a id="13709" class="Symbol">}</a> <a id="13711" class="Symbol">{</a><a id="13712" href="UTxO.Weakening.html#13691" class="Bound">iâˆˆ</a><a id="13714" class="Symbol">}))</a>

    <a id="13723" href="UTxO.Weakening.html#13723" class="Function">ptx</a> <a id="13727" class="Symbol">:</a> <a id="13729" href="UTxO.Types.html#1530" class="Record">PendingTx</a>
    <a id="13743" href="UTxO.Weakening.html#13723" class="Function">ptx</a> <a id="13747" class="Symbol">=</a> <a id="13749" href="UTxO.TxUtilities.html#3400" class="Function">A.mkPendingTx</a> <a id="13763" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="13765" href="UTxO.Weakening.html#2981" class="Bound">tx</a> <a id="13768" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="13772" href="UTxO.Weakening.html#3066" class="Bound">voi</a>

    <a id="13781" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a> <a id="13786" class="Symbol">:</a> <a id="13788" href="UTxO.Types.html#1530" class="Record">PendingTx</a>
    <a id="13802" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a> <a id="13807" class="Symbol">=</a> <a id="13809" href="UTxO.TxUtilities.html#3400" class="Function">mkPendingTx</a> <a id="13821" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="13824" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="13828" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="13833" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a>

    <a id="13843" href="UTxO.Weakening.html#13843" class="Function">pendingTxâ‰¡</a> <a id="13854" class="Symbol">:</a> <a id="13856" href="UTxO.Weakening.html#13723" class="Function">ptx</a> <a id="13860" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="13862" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a>
    <a id="13871" href="UTxO.Weakening.html#13843" class="Function">pendingTxâ‰¡</a> <a id="13882" class="Symbol">=</a>
      <a id="13890" href="Relation.Binary.PropositionalEquality.Core.html#2597" class="Function Operator">begin</a>
        <a id="13904" href="UTxO.Weakening.html#13723" class="Function">ptx</a>
      <a id="13914" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="13926" class="Keyword">record</a> <a id="13933" class="Symbol">{</a> <a id="13935" href="UTxO.Types.html#1564" class="Field">txHash</a>  <a id="13943" class="Symbol">=</a> <a id="13945" href="UTxO.Weakening.html#2981" class="Bound">tx</a> <a id="13948" href="Hashing.UTxO.html#657" class="Function Operator">A.â™¯â‚œâ‚“</a>
               <a id="13969" class="Symbol">;</a> <a id="13971" href="UTxO.Types.html#1634" class="Field">inputs</a>  <a id="13979" class="Symbol">=</a> <a id="13981" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="13990" class="Symbol">(</a><a id="13991" href="UTxO.Ledger.html#695" class="Field">A.inputs</a> <a id="14000" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="14002" class="Symbol">)</a> <a id="14004" class="Symbol">Î»</a> <a id="14006" class="Symbol">{</a><a id="14007" href="UTxO.Weakening.html#14007" class="Bound">i</a><a id="14008" class="Symbol">}</a> <a id="14010" href="UTxO.Weakening.html#14010" class="Bound">iâˆˆ</a> <a id="14013" class="Symbol">â†’</a> <a id="14015" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="14031" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="14033" href="UTxO.Weakening.html#14007" class="Bound">i</a> <a id="14035" class="Symbol">(</a><a id="14036" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="14040" href="UTxO.Weakening.html#14007" class="Bound">i</a> <a id="14042" href="UTxO.Weakening.html#14010" class="Bound">iâˆˆ</a><a id="14044" class="Symbol">)</a> <a id="14046" class="Symbol">(</a><a id="14047" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="14051" href="UTxO.Weakening.html#14007" class="Bound">i</a> <a id="14053" href="UTxO.Weakening.html#14010" class="Bound">iâˆˆ</a><a id="14055" class="Symbol">)</a>
               <a id="14072" class="Symbol">;</a> <a id="14074" href="UTxO.Types.html#1668" class="Field">outputs</a> <a id="14082" class="Symbol">=</a> <a id="14084" href="Data.List.Base.html#1304" class="Function">map</a> <a id="14088" href="UTxO.TxUtilities.html#2659" class="Function">A.mkPendingTxOut</a> <a id="14105" class="Symbol">(</a><a id="14106" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="14116" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="14118" class="Symbol">)</a>
               <a id="14135" class="Symbol">;</a> <a id="14137" href="UTxO.Types.html#1703" class="Field">forge</a>   <a id="14145" class="Symbol">=</a> <a id="14147" href="UTxO.Ledger.html#772" class="Field">A.forge</a> <a id="14155" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
               <a id="14173" class="Symbol">;</a> <a id="14175" href="UTxO.Types.html#1723" class="Field">fee</a>     <a id="14183" class="Symbol">=</a> <a id="14185" href="UTxO.Ledger.html#792" class="Field">A.fee</a> <a id="14191" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
               <a id="14209" class="Symbol">}</a>
      <a id="14217" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">â‰¡âŸ¨</a> <a id="14220" href="UTxO.Weakening.html#14567" class="Function">helper</a> <a id="14227" href="Relation.Binary.PropositionalEquality.Core.html#2714" class="Function Operator">âŸ©</a>
        <a id="14237" class="Keyword">record</a> <a id="14244" class="Symbol">{</a> <a id="14246" href="UTxO.Types.html#1564" class="Field">txHash</a>  <a id="14254" class="Symbol">=</a> <a id="14256" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="14260" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a>
               <a id="14279" class="Symbol">;</a> <a id="14281" href="UTxO.Types.html#1634" class="Field">inputs</a>  <a id="14289" class="Symbol">=</a> <a id="14291" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="14300" class="Symbol">(</a><a id="14301" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="14308" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="14311" class="Symbol">)</a> <a id="14313" class="Symbol">Î»</a> <a id="14315" class="Symbol">{</a><a id="14316" href="UTxO.Weakening.html#14316" class="Bound">i</a><a id="14317" class="Symbol">}</a> <a id="14319" href="UTxO.Weakening.html#14319" class="Bound">iâˆˆ</a> <a id="14322" class="Symbol">â†’</a> <a id="14324" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="14338" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="14341" href="UTxO.Weakening.html#14316" class="Bound">i</a> <a id="14343" class="Symbol">(</a><a id="14344" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="14349" href="UTxO.Weakening.html#14316" class="Bound">i</a> <a id="14351" href="UTxO.Weakening.html#14319" class="Bound">iâˆˆ</a><a id="14353" class="Symbol">)</a> <a id="14355" class="Symbol">(</a><a id="14356" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="14361" href="UTxO.Weakening.html#14316" class="Bound">i</a> <a id="14363" href="UTxO.Weakening.html#14319" class="Bound">iâˆˆ</a><a id="14365" class="Symbol">)</a>
               <a id="14382" class="Symbol">;</a> <a id="14384" href="UTxO.Types.html#1668" class="Field">outputs</a> <a id="14392" class="Symbol">=</a> <a id="14394" href="Data.List.Base.html#1304" class="Function">map</a> <a id="14398" href="UTxO.TxUtilities.html#2659" class="Function">mkPendingTxOut</a> <a id="14413" class="Symbol">(</a><a id="14414" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="14422" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="14425" class="Symbol">)</a>
               <a id="14442" class="Symbol">;</a> <a id="14444" href="UTxO.Types.html#1703" class="Field">forge</a>   <a id="14452" class="Symbol">=</a> <a id="14454" href="UTxO.Ledger.html#772" class="Field">forge</a> <a id="14460" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a>
               <a id="14479" class="Symbol">;</a> <a id="14481" href="UTxO.Types.html#1723" class="Field">fee</a>     <a id="14489" class="Symbol">=</a> <a id="14491" href="UTxO.Ledger.html#792" class="Field">fee</a> <a id="14495" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a>
               <a id="14514" class="Symbol">}</a>
      <a id="14522" href="Relation.Binary.PropositionalEquality.Core.html#2655" class="Function Operator">â‰¡âŸ¨âŸ©</a>
        <a id="14534" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a>
      <a id="14545" href="Relation.Binary.PropositionalEquality.Core.html#2892" class="Function Operator">âˆ</a>
      <a id="14553" class="Keyword">where</a>
        <a id="14567" href="UTxO.Weakening.html#14567" class="Function">helper</a> <a id="14574" class="Symbol">:</a> <a id="14576" class="Keyword">record</a> <a id="14583" class="Symbol">{</a> <a id="14585" href="UTxO.Types.html#1564" class="Field">txHash</a>  <a id="14593" class="Symbol">=</a> <a id="14595" href="UTxO.Weakening.html#2981" class="Bound">tx</a> <a id="14598" href="Hashing.UTxO.html#657" class="Function Operator">A.â™¯â‚œâ‚“</a>
                        <a id="14628" class="Symbol">;</a> <a id="14630" href="UTxO.Types.html#1634" class="Field">inputs</a>  <a id="14638" class="Symbol">=</a> <a id="14640" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="14649" class="Symbol">(</a><a id="14650" href="UTxO.Ledger.html#695" class="Field">A.inputs</a> <a id="14659" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="14661" class="Symbol">)</a> <a id="14663" class="Symbol">Î»</a> <a id="14665" class="Symbol">{</a><a id="14666" href="UTxO.Weakening.html#14666" class="Bound">i</a><a id="14667" class="Symbol">}</a> <a id="14669" href="UTxO.Weakening.html#14669" class="Bound">iâˆˆ</a> <a id="14672" class="Symbol">â†’</a> <a id="14674" href="UTxO.TxUtilities.html#2880" class="Function">A.mkPendingTxIn</a> <a id="14690" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="14692" href="UTxO.Weakening.html#14666" class="Bound">i</a> <a id="14694" class="Symbol">(</a><a id="14695" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="14699" href="UTxO.Weakening.html#14666" class="Bound">i</a> <a id="14701" href="UTxO.Weakening.html#14669" class="Bound">iâˆˆ</a><a id="14703" class="Symbol">)</a> <a id="14705" class="Symbol">(</a><a id="14706" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="14710" href="UTxO.Weakening.html#14666" class="Bound">i</a> <a id="14712" href="UTxO.Weakening.html#14669" class="Bound">iâˆˆ</a><a id="14714" class="Symbol">)</a>
                        <a id="14740" class="Symbol">;</a> <a id="14742" href="UTxO.Types.html#1668" class="Field">outputs</a> <a id="14750" class="Symbol">=</a> <a id="14752" href="Data.List.Base.html#1304" class="Function">map</a> <a id="14756" href="UTxO.TxUtilities.html#2659" class="Function">A.mkPendingTxOut</a> <a id="14773" class="Symbol">(</a><a id="14774" href="UTxO.Ledger.html#744" class="Field">A.outputs</a> <a id="14784" href="UTxO.Weakening.html#2981" class="Bound">tx</a><a id="14786" class="Symbol">)</a>
                        <a id="14812" class="Symbol">;</a> <a id="14814" href="UTxO.Types.html#1703" class="Field">forge</a>   <a id="14822" class="Symbol">=</a> <a id="14824" href="UTxO.Ledger.html#772" class="Field">A.forge</a> <a id="14832" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
                        <a id="14859" class="Symbol">;</a> <a id="14861" href="UTxO.Types.html#1723" class="Field">fee</a>     <a id="14869" class="Symbol">=</a> <a id="14871" href="UTxO.Ledger.html#792" class="Field">A.fee</a> <a id="14877" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
                        <a id="14904" class="Symbol">}</a>
               <a id="14921" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="14923" class="Keyword">record</a> <a id="14930" class="Symbol">{</a> <a id="14932" href="UTxO.Types.html#1564" class="Field">txHash</a>  <a id="14940" class="Symbol">=</a> <a id="14942" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a> <a id="14946" href="Hashing.UTxO.html#657" class="Function Operator">â™¯â‚œâ‚“</a>
                        <a id="14974" class="Symbol">;</a> <a id="14976" href="UTxO.Types.html#1634" class="Field">inputs</a>  <a id="14984" class="Symbol">=</a> <a id="14986" href="Data.List.Membership.Setoid.html#1118" class="Function">mapWithâˆˆ</a> <a id="14995" class="Symbol">(</a><a id="14996" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="15003" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="15006" class="Symbol">)</a> <a id="15008" class="Symbol">Î»</a> <a id="15010" class="Symbol">{</a><a id="15011" href="UTxO.Weakening.html#15011" class="Bound">i</a><a id="15012" class="Symbol">}</a> <a id="15014" href="UTxO.Weakening.html#15014" class="Bound">iâˆˆ</a> <a id="15017" class="Symbol">â†’</a> <a id="15019" href="UTxO.TxUtilities.html#2880" class="Function">mkPendingTxIn</a> <a id="15033" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="15036" href="UTxO.Weakening.html#15011" class="Bound">i</a> <a id="15038" class="Symbol">(</a><a id="15039" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="15044" href="UTxO.Weakening.html#15011" class="Bound">i</a> <a id="15046" href="UTxO.Weakening.html#15014" class="Bound">iâˆˆ</a><a id="15048" class="Symbol">)</a> <a id="15050" class="Symbol">(</a><a id="15051" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="15056" href="UTxO.Weakening.html#15011" class="Bound">i</a> <a id="15058" href="UTxO.Weakening.html#15014" class="Bound">iâˆˆ</a><a id="15060" class="Symbol">)</a>
                        <a id="15086" class="Symbol">;</a> <a id="15088" href="UTxO.Types.html#1668" class="Field">outputs</a> <a id="15096" class="Symbol">=</a> <a id="15098" href="Data.List.Base.html#1304" class="Function">map</a> <a id="15102" href="UTxO.TxUtilities.html#2659" class="Function">mkPendingTxOut</a> <a id="15117" class="Symbol">(</a><a id="15118" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="15126" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="15129" class="Symbol">)</a>
                        <a id="15155" class="Symbol">;</a> <a id="15157" href="UTxO.Types.html#1703" class="Field">forge</a>   <a id="15165" class="Symbol">=</a> <a id="15167" href="UTxO.Ledger.html#772" class="Field">forge</a> <a id="15173" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a>
                        <a id="15201" class="Symbol">;</a> <a id="15203" href="UTxO.Types.html#1723" class="Field">fee</a>     <a id="15211" class="Symbol">=</a> <a id="15213" href="UTxO.Ledger.html#792" class="Field">fee</a> <a id="15217" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a>
                        <a id="15245" class="Symbol">}</a>
        <a id="15255" href="UTxO.Weakening.html#14567" class="Function">helper</a> <a id="15262" class="Keyword">rewrite</a> <a id="15270" href="UTxO.Weakening.html#2632" class="Function">weakenTx-preservesâ™¯</a> <a id="15290" href="UTxO.Weakening.html#2981" class="Bound">tx</a>
                     <a id="15314" class="Symbol">|</a> <a id="15316" href="UTxO.Weakening.html#12259" class="Function">pendingOutâ‰¡</a>
                     <a id="15349" class="Symbol">|</a> <a id="15351" href="UTxO.Weakening.html#13315" class="Function">pendingInâ‰¡</a>
                     <a id="15383" class="Symbol">=</a> <a id="15385" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="15395" href="UTxO.Weakening.html#15395" class="Function">stateâ‰¡</a> <a id="15402" class="Symbol">:</a> <a id="15404" href="UTxO.Types.html#987" class="Function">getState</a> <a id="15413" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="15416" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="15418" href="UTxO.Types.html#987" class="Function">getState</a> <a id="15427" href="UTxO.Weakening.html#2986" class="Bound">l</a>
    <a id="15433" href="UTxO.Weakening.html#15395" class="Function">stateâ‰¡</a> <a id="15440" class="Symbol">=</a> <a id="15442" href="Relation.Binary.PropositionalEquality.Core.html#1090" class="Function">cong</a> <a id="15447" class="Symbol">(Î»</a> <a id="15450" href="UTxO.Weakening.html#15450" class="Bound">x</a> <a id="15452" class="Symbol">â†’</a> <a id="15454" class="Keyword">record</a> <a id="15461" class="Symbol">{</a><a id="15462" href="UTxO.Types.html#957" class="Field">height</a> <a id="15469" class="Symbol">=</a> <a id="15471" href="UTxO.Weakening.html#15450" class="Bound">x</a><a id="15472" class="Symbol">})</a> <a id="15475" class="Symbol">(</a><a id="15476" href="Data.List.Properties.html#3222" class="Function">length-map</a> <a id="15487" href="UTxO.Weakening.html#1779" class="Function">weakenTx</a> <a id="15496" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="15497" class="Symbol">)</a>

    <a id="15504" href="UTxO.Weakening.html#15504" class="Function">weakenRunValidation</a> <a id="15524" class="Symbol">:</a> <a id="15526" class="Symbol">âˆ€</a> <a id="15528" class="Symbol">{</a><a id="15529" href="UTxO.Weakening.html#15529" class="Bound">i</a> <a id="15531" href="UTxO.Weakening.html#15531" class="Bound">iâˆˆ</a> <a id="15534" href="UTxO.Weakening.html#15534" class="Bound">o</a><a id="15535" class="Symbol">}</a> <a id="15537" class="Symbol">{</a><a id="15538" href="UTxO.Weakening.html#15538" class="Bound">v</a> <a id="15540" class="Symbol">:</a> <a id="15542" href="UTxO.Types.html#2122" class="Field">D</a> <a id="15544" href="UTxO.Weakening.html#15529" class="Bound">i</a> <a id="15546" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="15548" href="UTxO.Ledger.html#590" class="Field">A.Data</a> <a id="15555" href="UTxO.Weakening.html#15534" class="Bound">o</a><a id="15556" class="Symbol">}</a> <a id="15558" class="Symbol">{</a><a id="15559" href="UTxO.Weakening.html#15559" class="Bound">vâ€²</a> <a id="15562" class="Symbol">:</a> <a id="15564" href="UTxO.Types.html#2122" class="Field">D</a> <a id="15566" href="UTxO.Weakening.html#15529" class="Bound">i</a> <a id="15568" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="15570" href="UTxO.Ledger.html#590" class="Field">Data</a> <a id="15575" class="Symbol">(</a><a id="15576" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="15591" href="UTxO.Weakening.html#15534" class="Bound">o</a><a id="15592" class="Symbol">)}</a> <a id="15595" class="Symbol">â†’</a>
        <a id="15605" href="Data.Bool.Base.html#1240" class="Function">T</a> <a id="15607" class="Symbol">(</a><a id="15608" href="UTxO.Ledger.html#856" class="Function">runValidation</a>   <a id="15624" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a> <a id="15629" href="UTxO.Weakening.html#15529" class="Bound">i</a> <a id="15631" class="Symbol">(</a><a id="15632" href="UTxO.Weakening.html#1588" class="Function">weakenTxOutput</a> <a id="15647" href="UTxO.Weakening.html#15534" class="Bound">o</a><a id="15648" class="Symbol">)</a> <a id="15650" href="UTxO.Weakening.html#15559" class="Bound">vâ€²</a> <a id="15653" class="Symbol">(</a><a id="15654" href="UTxO.Types.html#987" class="Function">getState</a> <a id="15663" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a><a id="15665" class="Symbol">))</a>
      <a id="15674" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="15676" href="Data.Bool.Base.html#1240" class="Function">T</a> <a id="15678" class="Symbol">(</a><a id="15679" href="UTxO.Ledger.html#856" class="Function">A.runValidation</a> <a id="15695" href="UTxO.Weakening.html#13723" class="Function">ptx</a>  <a id="15700" href="UTxO.Weakening.html#15529" class="Bound">i</a> <a id="15702" href="UTxO.Weakening.html#15534" class="Bound">o</a>                  <a id="15721" href="UTxO.Weakening.html#15538" class="Bound">v</a>  <a id="15724" class="Symbol">(</a><a id="15725" href="UTxO.Types.html#987" class="Function">getState</a> <a id="15734" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="15735" class="Symbol">))</a>
    <a id="15742" href="UTxO.Weakening.html#15504" class="Function">weakenRunValidation</a> <a id="15762" class="Symbol">{_}</a> <a id="15766" class="Symbol">{_}</a> <a id="15770" class="Symbol">{</a><a id="15771" href="UTxO.Weakening.html#15771" class="Bound">o</a><a id="15772" class="Symbol">}</a> <a id="15774" class="Symbol">{</a><a id="15775" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="15779" class="Symbol">}</a> <a id="15781" class="Symbol">{</a><a id="15782" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="15786" class="Symbol">}</a>
      <a id="15794" class="Keyword">rewrite</a> <a id="15802" href="UTxO.Weakening.html#15395" class="Function">stateâ‰¡</a>
            <a id="15821" class="Symbol">|</a> <a id="15823" href="Relation.Binary.PropositionalEquality.Core.html#939" class="Function">sym</a> <a id="15827" href="UTxO.Weakening.html#13843" class="Function">pendingTxâ‰¡</a>
            <a id="15850" class="Symbol">|</a> <a id="15852" href="UTxO.Weakening.html#11833" class="Function">valueâ‰¡</a>      <a id="15864" class="Symbol">{</a><a id="15865" href="UTxO.Weakening.html#15771" class="Bound">o</a><a id="15866" class="Symbol">}</a>
            <a id="15880" class="Symbol">|</a> <a id="15882" href="UTxO.Weakening.html#11910" class="Function">dataScriptâ‰¡</a> <a id="15894" class="Symbol">{</a><a id="15895" href="UTxO.Weakening.html#15771" class="Bound">o</a><a id="15896" class="Symbol">}</a>
            <a id="15910" class="Symbol">=</a> <a id="15912" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a>

    <a id="15922" href="UTxO.Weakening.html#15922" class="Function">aivâ€²</a> <a id="15927" class="Symbol">:</a>
      <a id="15935" class="Symbol">âˆ€</a> <a id="15937" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="15939" class="Symbol">â†’</a> <a id="15941" class="Symbol">(</a><a id="15942" href="UTxO.Weakening.html#15942" class="Bound">iâˆˆ</a> <a id="15945" class="Symbol">:</a> <a id="15947" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="15949" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="15951" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="15958" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="15961" class="Symbol">)</a> <a id="15963" class="Symbol">â†’</a>
        <a id="15973" class="Keyword">let</a> <a id="15977" href="UTxO.Weakening.html#15977" class="Bound">out</a> <a id="15981" class="Symbol">=</a> <a id="15983" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="15996" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="15999" class="Symbol">(</a><a id="16000" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="16010" href="UTxO.Weakening.html#15937" class="Bound">i</a><a id="16011" class="Symbol">)</a> <a id="16013" class="Symbol">(</a><a id="16014" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="16019" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="16021" href="UTxO.Weakening.html#15942" class="Bound">iâˆˆ</a><a id="16023" class="Symbol">)</a> <a id="16025" class="Symbol">(</a><a id="16026" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="16031" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="16033" href="UTxO.Weakening.html#15942" class="Bound">iâˆˆ</a><a id="16035" class="Symbol">)</a>
        <a id="16045" class="Keyword">in</a> <a id="16048" href="Data.Bool.Base.html#1240" class="Function">T</a> <a id="16050" class="Symbol">(</a><a id="16051" href="UTxO.Ledger.html#856" class="Function">runValidation</a> <a id="16065" href="UTxO.Weakening.html#13781" class="Function">ptxâ€²</a> <a id="16070" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="16072" href="UTxO.Weakening.html#15977" class="Bound">out</a> <a id="16076" class="Symbol">(</a><a id="16077" href="UTxO.Weakening.html#11389" class="Function">vdsâ€²</a> <a id="16082" href="UTxO.Weakening.html#15937" class="Bound">i</a> <a id="16084" href="UTxO.Weakening.html#15942" class="Bound">iâˆˆ</a><a id="16086" class="Symbol">)</a> <a id="16088" class="Symbol">(</a><a id="16089" href="UTxO.Types.html#987" class="Function">getState</a> <a id="16098" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a><a id="16100" class="Symbol">))</a>
    <a id="16107" href="UTxO.Weakening.html#15922" class="Function">aivâ€²</a> <a id="16112" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16114" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a>
      <a id="16123" class="Keyword">rewrite</a> <a id="16131" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="16151" class="Symbol">{</a><a id="16152" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="16153" class="Symbol">}</a> <a id="16155" class="Symbol">{</a><a id="16156" href="UTxO.Weakening.html#16112" class="Bound">i</a><a id="16157" class="Symbol">}</a> <a id="16159" class="Symbol">(</a><a id="16160" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="16164" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16166" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16168" class="Symbol">)</a> <a id="16170" class="Symbol">(</a><a id="16171" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="16175" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16177" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16179" class="Symbol">)</a>
            <a id="16193" class="Symbol">|</a> <a id="16195" href="UTxO.Weakening.html#15504" class="Function">weakenRunValidation</a> <a id="16215" class="Symbol">{</a><a id="16216" href="UTxO.Weakening.html#16112" class="Bound">i</a><a id="16217" class="Symbol">}</a> <a id="16219" class="Symbol">{</a><a id="16220" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16222" class="Symbol">}</a> <a id="16224" class="Symbol">{</a><a id="16225" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="16240" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="16242" class="Symbol">(</a><a id="16243" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="16253" href="UTxO.Weakening.html#16112" class="Bound">i</a><a id="16254" class="Symbol">)</a> <a id="16256" class="Symbol">(</a><a id="16257" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="16261" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16263" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16265" class="Symbol">)</a> <a id="16267" class="Symbol">(</a><a id="16268" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="16272" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16274" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16276" class="Symbol">)}</a>
                                           <a id="16322" class="Symbol">{</a><a id="16323" href="UTxO.Weakening.html#3136" class="Bound">vds</a> <a id="16327" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16329" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16331" class="Symbol">}</a> <a id="16333" class="Symbol">{</a><a id="16334" href="UTxO.Weakening.html#11587" class="Function">vdsâ€³</a> <a id="16339" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16341" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a><a id="16343" class="Symbol">}</a>
            <a id="16357" class="Symbol">=</a> <a id="16359" href="UTxO.Weakening.html#3240" class="Bound">aiv</a> <a id="16363" href="UTxO.Weakening.html#16112" class="Bound">i</a> <a id="16365" href="UTxO.Weakening.html#16114" class="Bound">iâˆˆ</a>

    <a id="16373" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="16463" href="UTxO.Weakening.html#16463" class="Function">vvhâ€²</a> <a id="16468" class="Symbol">:</a> <a id="16470" class="Symbol">âˆ€</a> <a id="16472" href="UTxO.Weakening.html#16472" class="Bound">i</a> <a id="16474" class="Symbol">â†’</a> <a id="16476" class="Symbol">(</a><a id="16477" href="UTxO.Weakening.html#16477" class="Bound">iâˆˆ</a> <a id="16480" class="Symbol">:</a> <a id="16482" href="UTxO.Weakening.html#16472" class="Bound">i</a> <a id="16484" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="16486" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="16493" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="16496" class="Symbol">)</a> <a id="16498" class="Symbol">â†’</a>
      <a id="16506" class="Keyword">let</a> <a id="16510" href="UTxO.Weakening.html#16510" class="Bound">out</a> <a id="16514" class="Symbol">=</a> <a id="16516" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="16529" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="16532" class="Symbol">(</a><a id="16533" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="16543" href="UTxO.Weakening.html#16472" class="Bound">i</a><a id="16544" class="Symbol">)</a> <a id="16546" class="Symbol">(</a><a id="16547" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="16552" href="UTxO.Weakening.html#16472" class="Bound">i</a> <a id="16554" href="UTxO.Weakening.html#16477" class="Bound">iâˆˆ</a><a id="16556" class="Symbol">)</a> <a id="16558" class="Symbol">(</a><a id="16559" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="16564" href="UTxO.Weakening.html#16472" class="Bound">i</a> <a id="16566" href="UTxO.Weakening.html#16477" class="Bound">iâˆˆ</a><a id="16568" class="Symbol">)</a>
      <a id="16576" class="Keyword">in</a> <a id="16579" class="Symbol">(</a><a id="16580" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="16588" href="UTxO.Weakening.html#16510" class="Bound">out</a><a id="16591" class="Symbol">)</a> <a id="16593" href="UTxO.Weakening.html#1372" class="Bound Operator">â™¯áµ‡</a> <a id="16596" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="16598" class="Symbol">(</a><a id="16599" href="UTxO.Types.html#2217" class="Field">validator</a> <a id="16609" href="UTxO.Weakening.html#16472" class="Bound">i</a><a id="16610" class="Symbol">)</a> <a id="16612" href="Hashing.MetaHash.html#3540" class="Postulate Operator">â™¯</a>
    <a id="16618" href="UTxO.Weakening.html#16463" class="Function">vvhâ€²</a> <a id="16623" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16625" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a>
      <a id="16634" class="Keyword">rewrite</a> <a id="16642" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="16662" class="Symbol">{</a><a id="16663" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="16664" class="Symbol">}</a> <a id="16666" class="Symbol">{</a><a id="16667" href="UTxO.Weakening.html#16623" class="Bound">i</a><a id="16668" class="Symbol">}</a> <a id="16670" class="Symbol">(</a><a id="16671" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="16675" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16677" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a><a id="16679" class="Symbol">)</a> <a id="16681" class="Symbol">(</a><a id="16682" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="16686" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16688" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a><a id="16690" class="Symbol">)</a>
            <a id="16704" class="Symbol">|</a> <a id="16706" href="UTxO.Weakening.html#2195" class="Function">weakenTxOutput-preservesâ™¯</a> <a id="16732" class="Symbol">(</a><a id="16733" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="16748" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="16750" class="Symbol">(</a><a id="16751" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="16761" href="UTxO.Weakening.html#16623" class="Bound">i</a><a id="16762" class="Symbol">)</a> <a id="16764" class="Symbol">(</a><a id="16765" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="16769" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16771" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a><a id="16773" class="Symbol">)</a> <a id="16775" class="Symbol">(</a><a id="16776" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="16780" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16782" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a><a id="16784" class="Symbol">))</a>
            <a id="16799" class="Symbol">=</a> <a id="16801" href="UTxO.Weakening.html#3275" class="Bound">vvh</a> <a id="16805" href="UTxO.Weakening.html#16623" class="Bound">i</a> <a id="16807" href="UTxO.Weakening.html#16625" class="Bound">iâˆˆ</a>

    <a id="16815" class="Comment">------------------------------------------------------------------------------------</a>

    <a id="16905" href="UTxO.Weakening.html#16905" class="Function">frgâ€²</a> <a id="16910" class="Symbol">:</a> <a id="16912" class="Symbol">âˆ€</a> <a id="16914" href="UTxO.Weakening.html#16914" class="Bound">c</a> <a id="16916" class="Symbol">â†’</a> <a id="16918" href="UTxO.Weakening.html#16914" class="Bound">c</a> <a id="16920" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="16922" href="Utilities.Currency.html#1215" class="Function">keys</a> <a id="16927" class="Symbol">(</a><a id="16928" href="UTxO.Ledger.html#772" class="Field">forge</a> <a id="16934" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="16937" class="Symbol">)</a> <a id="16939" class="Symbol">â†’</a>
      <a id="16947" href="Data.Product.html#1783" class="Function">âˆƒ[</a> <a id="16950" href="UTxO.Weakening.html#16950" class="Bound">i</a> <a id="16952" href="Data.Product.html#1783" class="Function">]</a> <a id="16954" href="Data.Product.html#1364" class="Function">âˆƒ</a> <a id="16956" class="Symbol">Î»</a> <a id="16958" class="Symbol">(</a><a id="16959" href="UTxO.Weakening.html#16959" class="Bound">iâˆˆ</a> <a id="16962" class="Symbol">:</a> <a id="16964" href="UTxO.Weakening.html#16950" class="Bound">i</a> <a id="16966" href="Data.List.Membership.Setoid.html#877" class="Function Operator">âˆˆ</a> <a id="16968" href="UTxO.Ledger.html#695" class="Field">inputs</a> <a id="16975" href="UTxO.Weakening.html#3675" class="Function">txâ€²</a><a id="16978" class="Symbol">)</a> <a id="16980" class="Symbol">â†’</a>
        <a id="16990" class="Keyword">let</a> <a id="16994" href="UTxO.Weakening.html#16994" class="Bound">out</a> <a id="16998" class="Symbol">=</a> <a id="17000" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="17013" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="17016" class="Symbol">(</a><a id="17017" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="17027" href="UTxO.Weakening.html#16950" class="Bound">i</a><a id="17028" class="Symbol">)</a> <a id="17030" class="Symbol">(</a><a id="17031" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="17036" href="UTxO.Weakening.html#16950" class="Bound">i</a> <a id="17038" href="UTxO.Weakening.html#16959" class="Bound">iâˆˆ</a><a id="17040" class="Symbol">)</a> <a id="17042" class="Symbol">(</a><a id="17043" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="17048" href="UTxO.Weakening.html#16950" class="Bound">i</a> <a id="17050" href="UTxO.Weakening.html#16959" class="Bound">iâˆˆ</a><a id="17052" class="Symbol">)</a>
        <a id="17062" class="Keyword">in</a> <a id="17065" class="Symbol">(</a><a id="17066" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="17074" href="UTxO.Weakening.html#16994" class="Bound">out</a><a id="17077" class="Symbol">)</a> <a id="17079" href="UTxO.Weakening.html#1372" class="Bound Operator">â™¯áµ‡</a> <a id="17082" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="17084" href="UTxO.Weakening.html#16914" class="Bound">c</a>
    <a id="17090" href="UTxO.Weakening.html#16905" class="Function">frgâ€²</a> <a id="17095" href="UTxO.Weakening.html#17095" class="Bound">c</a> <a id="17097" href="UTxO.Weakening.html#17097" class="Bound">câˆˆ</a>
      <a id="17106" class="Keyword">with</a> <a id="17111" href="UTxO.Weakening.html#3310" class="Bound">frg</a> <a id="17115" href="UTxO.Weakening.html#17095" class="Bound">c</a> <a id="17117" href="UTxO.Weakening.html#17097" class="Bound">câˆˆ</a>
    <a id="17124" class="Symbol">...</a> <a id="17128" class="Symbol">|</a> <a id="17130" class="Symbol">(</a><a id="17131" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17133" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17135" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a> <a id="17138" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17140" href="UTxO.Weakening.html#17140" class="Bound">p</a><a id="17141" class="Symbol">)</a> <a id="17143" class="Symbol">=</a> <a id="17145" class="Symbol">(</a><a id="17146" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17148" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17150" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a> <a id="17153" href="Agda.Builtin.Sigma.html#209" class="InductiveConstructor Operator">,</a> <a id="17155" href="UTxO.Weakening.html#17183" class="Function">helper</a><a id="17161" class="Symbol">)</a>
      <a id="17169" class="Keyword">where</a>
        <a id="17183" href="UTxO.Weakening.html#17183" class="Function">helper</a> <a id="17190" class="Symbol">:</a> <a id="17192" class="Symbol">(</a><a id="17193" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="17201" class="Symbol">(</a><a id="17202" href="UTxO.TxUtilities.html#1808" class="Function">lookupOutput</a> <a id="17215" href="UTxO.Weakening.html#3697" class="Function">lâ€²</a> <a id="17218" class="Symbol">(</a><a id="17219" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="17229" href="UTxO.Weakening.html#17131" class="Bound">i</a><a id="17230" class="Symbol">)</a> <a id="17232" class="Symbol">(</a><a id="17233" href="UTxO.Weakening.html#4067" class="Function">vtxâ€²</a> <a id="17238" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17240" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17242" class="Symbol">)</a> <a id="17244" class="Symbol">(</a><a id="17245" href="UTxO.Weakening.html#5070" class="Function">voiâ€²</a> <a id="17250" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17252" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17254" class="Symbol">)))</a> <a id="17258" href="UTxO.Weakening.html#1372" class="Bound Operator">â™¯áµ‡</a> <a id="17261" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">â‰¡</a> <a id="17263" class="Bound">c</a>
        <a id="17273" href="UTxO.Weakening.html#17183" class="Function">helper</a>
          <a id="17290" class="Keyword">rewrite</a> <a id="17298" href="UTxO.Weakening.html#6595" class="Function">lookupOutputWeakens</a> <a id="17318" class="Symbol">{</a><a id="17319" href="UTxO.Weakening.html#2986" class="Bound">l</a><a id="17320" class="Symbol">}</a> <a id="17322" class="Symbol">{</a><a id="17323" href="UTxO.Weakening.html#17131" class="Bound">i</a><a id="17324" class="Symbol">}</a> <a id="17326" class="Symbol">(</a><a id="17327" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="17331" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17333" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17335" class="Symbol">)</a> <a id="17337" class="Symbol">(</a><a id="17338" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="17342" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17344" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17346" class="Symbol">)</a>
                <a id="17364" class="Symbol">|</a> <a id="17366" href="UTxO.Weakening.html#2195" class="Function">weakenTxOutput-preservesâ™¯</a> <a id="17392" class="Symbol">(</a><a id="17393" href="UTxO.TxUtilities.html#1808" class="Function">A.lookupOutput</a> <a id="17408" href="UTxO.Weakening.html#2986" class="Bound">l</a> <a id="17410" class="Symbol">(</a><a id="17411" href="UTxO.Types.html#2024" class="Field">outputRef</a> <a id="17421" href="UTxO.Weakening.html#17131" class="Bound">i</a><a id="17422" class="Symbol">)</a> <a id="17424" class="Symbol">(</a><a id="17425" href="UTxO.Weakening.html#3031" class="Bound">vtx</a> <a id="17429" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17431" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17433" class="Symbol">)</a> <a id="17435" class="Symbol">(</a><a id="17436" href="UTxO.Weakening.html#3066" class="Bound">voi</a> <a id="17440" href="UTxO.Weakening.html#17131" class="Bound">i</a> <a id="17442" href="UTxO.Weakening.html#17135" class="Bound">iâˆˆ</a><a id="17444" class="Symbol">))</a>
                <a id="17463" class="Symbol">=</a> <a id="17465" href="UTxO.Weakening.html#17140" class="Bound">p</a>
</pre></body></html>