<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.Ledger</title><link rel="stylesheet" href="Agda.css"></head><body><pre class="Agda"><a id="1" class="Comment">------------------------------------------------------------------------</a>
<a id="74" class="Comment">-- Transactions and ledgers.</a>
<a id="103" class="Comment">------------------------------------------------------------------------</a>

<a id="177" class="Keyword">open</a> <a id="182" class="Keyword">import</a> <a id="189" href="Data.Bool.html" class="Module">Data.Bool</a> <a id="199" class="Keyword">using</a> <a id="205" class="Symbol">(</a><a id="206" href="Agda.Builtin.Bool.html#135" class="Datatype">Bool</a><a id="210" class="Symbol">)</a>

<a id="213" class="Keyword">open</a> <a id="218" class="Keyword">import</a> <a id="225" href="Relation.Binary.html" class="Module">Relation.Binary</a>                       <a id="263" class="Keyword">using</a> <a id="269" class="Symbol">(</a><a id="270" href="Relation.Binary.Core.html#5557" class="Function">Decidable</a><a id="279" class="Symbol">)</a>
<a id="281" class="Keyword">open</a> <a id="286" class="Keyword">import</a> <a id="293" href="Relation.Binary.PropositionalEquality.html" class="Module">Relation.Binary.PropositionalEquality</a> <a id="331" class="Keyword">using</a> <a id="337" class="Symbol">(</a><a id="338" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_‚â°_</a><a id="341" class="Symbol">;</a> <a id="343" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a><a id="347" class="Symbol">)</a>

<a id="350" class="Keyword">open</a> <a id="355" class="Keyword">import</a> <a id="362" href="UTxO.Types.html" class="Module">UTxO.Types</a>
<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Hashing.Base.html" class="Module">Hashing.Base</a>

<a id="399" class="Keyword">module</a> <a id="406" href="UTxO.Ledger.html" class="Module">UTxO.Ledger</a>
  <a id="420" class="Symbol">(</a><a id="421" href="UTxO.Ledger.html#421" class="Bound">Address</a> <a id="429" class="Symbol">:</a> <a id="431" class="PrimitiveType">Set</a><a id="434" class="Symbol">)</a>
  <a id="438" class="Symbol">(</a><a id="439" href="UTxO.Ledger.html#439" class="Bound Operator">_‚ôØ‚Çê</a> <a id="443" class="Symbol">:</a> <a id="445" href="Hashing.Base.html#621" class="Function">Hash</a> <a id="450" href="UTxO.Ledger.html#421" class="Bound">Address</a><a id="457" class="Symbol">)</a>
  <a id="461" class="Symbol">(</a><a id="462" href="UTxO.Ledger.html#462" class="Bound Operator">_‚âü‚Çê_</a> <a id="467" class="Symbol">:</a> <a id="469" href="Relation.Binary.Core.html#5557" class="Function">Decidable</a> <a id="479" class="Symbol">{</a><a id="480" class="Argument">A</a> <a id="482" class="Symbol">=</a> <a id="484" href="UTxO.Ledger.html#421" class="Bound">Address</a><a id="491" class="Symbol">}</a> <a id="493" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">_‚â°_</a><a id="496" class="Symbol">)</a>
  <a id="500" class="Keyword">where</a>

<a id="507" class="Keyword">record</a> <a id="TxOutput"></a><a id="514" href="UTxO.Ledger.html#514" class="Record">TxOutput</a> <a id="523" class="Symbol">:</a> <a id="525" class="PrimitiveType">Set</a> <a id="529" class="Keyword">where</a>
  <a id="537" class="Keyword">field</a>
    <a id="TxOutput.value"></a><a id="547" href="UTxO.Ledger.html#547" class="Field">value</a>   <a id="555" class="Symbol">:</a> <a id="557" href="Data.Currency.html#831" class="Function">Value</a>
    <a id="TxOutput.address"></a><a id="567" href="UTxO.Ledger.html#567" class="Field">address</a> <a id="575" class="Symbol">:</a> <a id="577" href="UTxO.Ledger.html#421" class="Bound">Address</a>

    <a id="TxOutput.Data"></a><a id="590" href="UTxO.Ledger.html#590" class="Field">Data</a>       <a id="601" class="Symbol">:</a> <a id="603" href="Data.TYPE.html#439" class="Datatype">ùïå</a>
    <a id="TxOutput.dataScript"></a><a id="609" href="UTxO.Ledger.html#609" class="Field">dataScript</a> <a id="620" class="Symbol">:</a> <a id="622" href="UTxO.Types.html#922" class="Record">State</a> <a id="628" class="Symbol">‚Üí</a> <a id="630" href="Data.TYPE.html#558" class="Function">el</a> <a id="633" href="UTxO.Ledger.html#590" class="Field">Data</a>

<a id="639" class="Keyword">open</a> <a id="644" href="UTxO.Ledger.html#514" class="Module">TxOutput</a> <a id="653" class="Keyword">public</a>

<a id="661" class="Keyword">record</a> <a id="Tx"></a><a id="668" href="UTxO.Ledger.html#668" class="Record">Tx</a> <a id="671" class="Symbol">:</a> <a id="673" class="PrimitiveType">Set</a> <a id="677" class="Keyword">where</a>
  <a id="685" class="Keyword">field</a>
    <a id="Tx.inputs"></a><a id="695" href="UTxO.Ledger.html#695" class="Field">inputs</a>  <a id="703" class="Symbol">:</a> <a id="705" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="710" href="UTxO.Types.html#1987" class="Record">TxInput</a> <a id="718" class="Comment">-- T0D0: Set‚ü®TxInput‚ü©</a>
    <a id="Tx.outputs"></a><a id="744" href="UTxO.Ledger.html#744" class="Field">outputs</a> <a id="752" class="Symbol">:</a> <a id="754" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="759" href="UTxO.Ledger.html#514" class="Record">TxOutput</a>
    <a id="Tx.forge"></a><a id="772" href="UTxO.Ledger.html#772" class="Field">forge</a>   <a id="780" class="Symbol">:</a> <a id="782" href="Data.Currency.html#831" class="Function">Value</a>
    <a id="Tx.fee"></a><a id="792" href="UTxO.Ledger.html#792" class="Field">fee</a>     <a id="800" class="Symbol">:</a> <a id="802" href="Data.Currency.html#831" class="Function">Value</a>

<a id="809" class="Keyword">open</a> <a id="814" href="UTxO.Ledger.html#668" class="Module">Tx</a> <a id="817" class="Keyword">public</a>

<a id="Ledger"></a><a id="825" href="UTxO.Ledger.html#825" class="Function">Ledger</a> <a id="832" class="Symbol">:</a> <a id="834" class="PrimitiveType">Set</a>
<a id="838" href="UTxO.Ledger.html#825" class="Function">Ledger</a> <a id="845" class="Symbol">=</a> <a id="847" href="Agda.Builtin.List.html#121" class="Datatype">List</a> <a id="852" href="UTxO.Ledger.html#668" class="Record">Tx</a>

<a id="runValidation"></a><a id="856" href="UTxO.Ledger.html#856" class="Function">runValidation</a> <a id="870" class="Symbol">:</a> <a id="872" href="UTxO.Types.html#1525" class="Record">PendingTx</a> <a id="882" class="Symbol">‚Üí</a> <a id="884" class="Symbol">(</a><a id="885" href="UTxO.Ledger.html#885" class="Bound">i</a> <a id="887" class="Symbol">:</a> <a id="889" href="UTxO.Types.html#1987" class="Record">TxInput</a><a id="896" class="Symbol">)</a> <a id="898" class="Symbol">‚Üí</a> <a id="900" class="Symbol">(</a><a id="901" href="UTxO.Ledger.html#901" class="Bound">o</a> <a id="903" class="Symbol">:</a> <a id="905" href="UTxO.Ledger.html#514" class="Record">TxOutput</a><a id="913" class="Symbol">)</a> <a id="915" class="Symbol">‚Üí</a> <a id="917" href="UTxO.Types.html#2117" class="Field">D</a> <a id="919" href="UTxO.Ledger.html#885" class="Bound">i</a> <a id="921" href="Agda.Builtin.Equality.html#125" class="Datatype Operator">‚â°</a> <a id="923" href="UTxO.Ledger.html#590" class="Field">Data</a> <a id="928" href="UTxO.Ledger.html#901" class="Bound">o</a> <a id="930" class="Symbol">‚Üí</a> <a id="932" href="UTxO.Types.html#922" class="Record">State</a> <a id="938" class="Symbol">‚Üí</a> <a id="940" href="Agda.Builtin.Bool.html#135" class="Datatype">Bool</a>
<a id="945" href="UTxO.Ledger.html#856" class="Function">runValidation</a> <a id="959" href="UTxO.Ledger.html#959" class="Bound">ptx</a> <a id="963" href="UTxO.Ledger.html#963" class="Bound">i</a> <a id="965" href="UTxO.Ledger.html#965" class="Bound">o</a> <a id="967" href="Agda.Builtin.Equality.html#182" class="InductiveConstructor">refl</a> <a id="972" href="UTxO.Ledger.html#972" class="Bound">st</a> <a id="975" class="Symbol">=</a> <a id="977" href="UTxO.Types.html#2212" class="Field">validator</a> <a id="987" href="UTxO.Ledger.html#963" class="Bound">i</a> <a id="989" href="UTxO.Ledger.html#972" class="Bound">st</a> <a id="992" class="Symbol">(</a><a id="993" href="UTxO.Ledger.html#547" class="Field">value</a> <a id="999" href="UTxO.Ledger.html#965" class="Bound">o</a><a id="1000" class="Symbol">)</a> <a id="1002" href="UTxO.Ledger.html#959" class="Bound">ptx</a> <a id="1006" class="Symbol">(</a><a id="1007" href="UTxO.Types.html#2183" class="Field">redeemer</a> <a id="1016" href="UTxO.Ledger.html#963" class="Bound">i</a> <a id="1018" href="UTxO.Ledger.html#972" class="Bound">st</a><a id="1020" class="Symbol">)</a> <a id="1022" class="Symbol">(</a><a id="1023" href="UTxO.Ledger.html#609" class="Field">dataScript</a> <a id="1034" href="UTxO.Ledger.html#965" class="Bound">o</a> <a id="1036" href="UTxO.Ledger.html#972" class="Bound">st</a><a id="1038" class="Symbol">)</a>
</pre></body></html>