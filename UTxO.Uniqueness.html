<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>UTxO.Uniqueness</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-utxo/tree/master/UTxO/Uniqueness.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">module</a> <a id="8" href="UTxO.Uniqueness.html" class="Module">UTxO.Uniqueness</a> <a id="24" class="Keyword">where</a>

<a id="31" class="Keyword">open</a> <a id="36" class="Keyword">import</a> <a id="43" href="Data.List.Membership.Propositional.Properties.html" class="Module">Data.List.Membership.Propositional.Properties</a> <a id="89" class="Keyword">using</a> <a id="95" class="Symbol">(</a><a id="96" href="Data.List.Membership.Propositional.Properties.html#3491" class="Function">∈-map⁻</a><a id="102" class="Symbol">;</a> <a id="104" href="Data.List.Membership.Propositional.Properties.html#8622" class="Function">∈-filter⁻</a><a id="113" class="Symbol">)</a>
<a id="115" class="Keyword">open</a> <a id="120" class="Keyword">import</a> <a id="127" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html" class="Module">Data.List.Relation.Unary.Unique.Propositional.Properties</a> <a id="184" class="Keyword">using</a> <a id="190" class="Symbol">(</a><a id="191" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html#1790" class="Function">++⁺</a><a id="194" class="Symbol">;</a> <a id="196" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html#4951" class="Function">filter⁺</a><a id="203" class="Symbol">)</a>
<a id="205" class="Keyword">import</a> <a id="212" href="Data.List.Relation.Unary.AllPairs.html" class="Module">Data.List.Relation.Unary.AllPairs</a> <a id="246" class="Symbol">as</a> <a id="249" class="Module">AllPairs</a>

<a id="259" class="Keyword">open</a> <a id="264" class="Keyword">import</a> <a id="271" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="284" class="Keyword">open</a> <a id="289" class="Keyword">import</a> <a id="296" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="310" class="Keyword">open</a> <a id="315" class="Keyword">import</a> <a id="322" href="Prelude.Lists.Postulates.html" class="Module">Prelude.Lists.Postulates</a>
<a id="347" class="Keyword">open</a> <a id="352" class="Keyword">import</a> <a id="359" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="373" class="Keyword">open</a> <a id="378" class="Keyword">import</a> <a id="385" href="Prelude.Decidable.html" class="Module">Prelude.Decidable</a> <a id="403" class="Keyword">hiding</a> <a id="410" class="Symbol">(</a><a id="411" href="Prelude.Decidable.Instances.html#261" class="Function">DecEq⇒Dec</a><a id="420" class="Symbol">)</a>
<a id="422" class="Keyword">open</a> <a id="427" class="Keyword">import</a> <a id="434" href="Prelude.Null.html" class="Module">Prelude.Null</a>
<a id="447" class="Keyword">open</a> <a id="452" class="Keyword">import</a> <a id="459" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="472" class="Keyword">open</a> <a id="477" class="Keyword">import</a> <a id="484" href="Prelude.Membership.html" class="Module">Prelude.Membership</a> <a id="503" class="Keyword">using</a> <a id="509" class="Symbol">(</a><a id="510" href="Prelude.Membership.html#613" class="Function Operator">_∉?_</a><a id="514" class="Symbol">)</a>
<a id="516" class="Keyword">open</a> <a id="521" href="Prelude.Init.html#7133" class="Module">L.Mem</a>

<a id="528" class="Keyword">open</a> <a id="533" class="Keyword">import</a> <a id="540" href="UTxO.Hashing.Base.html" class="Module">UTxO.Hashing.Base</a>
<a id="558" class="Keyword">open</a> <a id="563" class="Keyword">import</a> <a id="570" href="UTxO.Hashing.Types.html" class="Module">UTxO.Hashing.Types</a>
<a id="589" class="Keyword">open</a> <a id="594" class="Keyword">import</a> <a id="601" href="UTxO.Value.html" class="Module">UTxO.Value</a>
<a id="612" class="Keyword">open</a> <a id="617" class="Keyword">import</a> <a id="624" href="UTxO.Types.html" class="Module">UTxO.Types</a> <a id="635" class="Keyword">hiding</a> <a id="642" class="Symbol">(</a><a id="643" href="UTxO.Types.html#925" class="InductiveConstructor">I</a><a id="644" class="Symbol">)</a>
<a id="646" class="Keyword">open</a> <a id="651" class="Keyword">import</a> <a id="658" href="UTxO.TxUtilities.html" class="Module">UTxO.TxUtilities</a>
<a id="675" class="Keyword">open</a> <a id="680" class="Keyword">import</a> <a id="687" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>

<a id="null?"></a><a id="702" href="UTxO.Uniqueness.html#702" class="Function">null?</a> <a id="708" class="Symbol">:</a> <a id="710" class="Symbol">∀</a> <a id="712" class="Symbol">{</a><a id="713" href="UTxO.Uniqueness.html#713" class="Bound">A</a> <a id="715" class="Symbol">:</a> <a id="717" href="Agda.Primitive.html#320" class="Primitive">Set</a> <a id="721" href="Prelude.Init.html#261" class="Generalizable">ℓ</a><a id="722" class="Symbol">}</a> <a id="724" class="Symbol">→</a> <a id="726" href="Relation.Unary.html#3545" class="Function">Decidable¹</a> <a id="737" class="Symbol">(</a><a id="738" href="Prelude.Null.html#263" class="Field">Null</a> <a id="743" class="Symbol">{</a><a id="744" class="Argument">A</a> <a id="746" class="Symbol">=</a> <a id="748" href="Agda.Builtin.List.html#130" class="Datatype">List</a> <a id="753" href="UTxO.Uniqueness.html#713" class="Bound">A</a><a id="754" class="Symbol">})</a>
<a id="757" href="UTxO.Uniqueness.html#702" class="Function">null?</a> <a id="763" class="Symbol">=</a> <a id="765" class="Symbol">λ</a> <a id="767" class="Keyword">where</a>
  <a id="775" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a> <a id="778" class="Symbol">→</a> <a id="780" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="784" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
  <a id="791" class="Symbol">(_</a> <a id="794" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="796" class="Symbol">_)</a> <a id="799" class="Symbol">→</a> <a id="801" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="804" class="Symbol">λ</a> <a id="806" class="Symbol">()</a>

<a id="810" class="Keyword">postulate</a>
  <a id="genesis"></a><a id="822" href="UTxO.Uniqueness.html#822" class="Postulate">genesis</a> <a id="830" class="Symbol">:</a> <a id="832" class="Symbol">∀</a> <a id="834" class="Symbol">{</a><a id="835" href="UTxO.Uniqueness.html#835" class="Bound">l</a><a id="836" class="Symbol">}</a> <a id="838" class="Symbol">→</a> <a id="840" href="UTxO.Validity.html#2261" class="Datatype">ValidLedger</a> <a id="852" href="UTxO.Uniqueness.html#835" class="Bound">l</a> <a id="854" class="Symbol">→</a> <a id="856" href="Prelude.Null.html#283" class="Function">¬Null</a> <a id="862" href="UTxO.Uniqueness.html#835" class="Bound">l</a> <a id="864" class="Symbol">→</a> <a id="866" href="Prelude.Lists.Count.html#275" class="Function">count</a> <a id="872" class="Symbol">(</a><a id="873" href="UTxO.Uniqueness.html#702" class="Function">null?</a> <a id="879" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="881" href="UTxO.Types.html#7595" class="Field">inputs</a><a id="887" class="Symbol">)</a> <a id="889" href="UTxO.Uniqueness.html#835" class="Bound">l</a> <a id="891" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="893" class="Number">1</a>

<a id="Unique-ledger"></a><a id="896" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="910" class="Symbol">:</a> <a id="912" class="Symbol">∀</a> <a id="914" class="Symbol">{</a><a id="915" href="UTxO.Uniqueness.html#915" class="Bound">l</a><a id="916" class="Symbol">}</a> <a id="918" class="Symbol">→</a> <a id="920" href="UTxO.Validity.html#2261" class="Datatype">ValidLedger</a> <a id="932" href="UTxO.Uniqueness.html#915" class="Bound">l</a> <a id="934" class="Symbol">→</a> <a id="936" href="Data.List.Relation.Unary.Unique.Setoid.html#728" class="Datatype">Unique</a> <a id="943" href="UTxO.Uniqueness.html#915" class="Bound">l</a>
<a id="945" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="959" class="Symbol">{</a><a id="960" class="DottedPattern Symbol">.</a><a id="961" href="Agda.Builtin.List.html#167" class="DottedPattern InductiveConstructor">[]</a><a id="963" class="Symbol">}</a>     <a id="969" href="UTxO.Validity.html#2297" class="InductiveConstructor">∙</a>                    <a id="990" class="Symbol">=</a> <a id="992" href="Data.List.Relation.Unary.AllPairs.Core.html#990" class="InductiveConstructor">[]</a>
<a id="995" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="1009" class="Symbol">{</a><a id="1010" class="DottedPattern Symbol">.</a><a id="1011" href="UTxO.Uniqueness.html#1029" class="DottedPattern Bound">tx</a> <a id="1014" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1016" href="UTxO.Uniqueness.html#1016" class="Bound">l</a><a id="1017" class="Symbol">}</a> <a id="1019" href="UTxO.Uniqueness.html#1019" class="Bound">vl₀</a><a id="1022" class="Symbol">@(</a><a id="1024" href="UTxO.Uniqueness.html#1024" class="Bound">vl</a> <a id="1027" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">⊕</a> <a id="1029" href="UTxO.Uniqueness.html#1029" class="Bound">tx</a> <a id="1032" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">∶-</a> <a id="1035" href="UTxO.Uniqueness.html#1035" class="Bound">vtx</a><a id="1038" class="Symbol">)</a>
  <a id="1042" class="Keyword">with</a> <a id="1047" href="UTxO.Uniqueness.html#702" class="Function">null?</a> <a id="1053" class="Symbol">(</a><a id="1054" href="UTxO.Types.html#7595" class="Field">inputs</a> <a id="1061" href="UTxO.Uniqueness.html#1029" class="Bound">tx</a><a id="1063" class="Symbol">)</a>
<a id="1065" class="Symbol">...</a> <a id="1069" class="Symbol">|</a> <a id="1071" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="1075" href="UTxO.Uniqueness.html#1075" class="Bound">px</a>
    <a id="1082" class="Symbol">=</a> <a id="1084" href="Prelude.Lists.Postulates.html#944" class="Postulate">count-single</a> <a id="1097" class="Symbol">(</a><a id="1098" href="UTxO.Uniqueness.html#702" class="Function">null?</a> <a id="1104" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1106" href="UTxO.Types.html#7595" class="Field">inputs</a><a id="1112" class="Symbol">)</a> <a id="1114" class="Symbol">(</a><a id="1115" href="UTxO.Uniqueness.html#822" class="Postulate">genesis</a> <a id="1123" class="Bound">vl₀</a> <a id="1127" class="Symbol">λ</a> <a id="1129" class="Symbol">())</a> <a id="1133" href="UTxO.Uniqueness.html#1075" class="Bound">px</a> <a id="1136" href="Data.List.Relation.Unary.AllPairs.Core.html#1010" class="InductiveConstructor Operator">∷</a> <a id="1138" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="1152" class="Bound">vl</a>
<a id="1155" class="Symbol">...</a> <a id="1159" class="Symbol">|</a> <a id="1161" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="1164" href="UTxO.Uniqueness.html#1164" class="Bound">¬px</a>
    <a id="1172" class="Symbol">=</a> <a id="1174" href="Data.List.Relation.Unary.All.Properties.html#3427" class="Function">L.All.¬Any⇒All¬</a> <a id="1190" class="Bound">l</a> <a id="1192" href="UTxO.Uniqueness.html#1231" class="Function">tx∉</a> <a id="1196" href="Data.List.Relation.Unary.AllPairs.Core.html#1010" class="InductiveConstructor Operator">∷</a> <a id="1198" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="1212" class="Bound">vl</a>
    <a id="1219" class="Keyword">where</a>
      <a id="1231" href="UTxO.Uniqueness.html#1231" class="Function">tx∉</a> <a id="1235" class="Symbol">:</a> <a id="1237" class="Bound">tx</a> <a id="1240" href="Data.List.Membership.Setoid.html#945" class="Function Operator">∉</a> <a id="1242" class="Bound">l</a>
      <a id="1250" href="UTxO.Uniqueness.html#1231" class="Function">tx∉</a> <a id="1254" href="UTxO.Uniqueness.html#1254" class="Bound">tx∈</a> <a id="1258" class="Keyword">with</a> <a id="1263" href="UTxO.Uniqueness.html#1263" class="Bound">x</a> <a id="1265" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1267" href="UTxO.Uniqueness.html#1267" class="Bound">x∈</a>        ← <a id="1279" href="Prelude.Lists.Empty.html#2149" class="Function">¬Null⇒∃x</a> <a id="1288" class="Symbol">(</a><a id="1289" href="Prelude.Lists.Empty.html#450" class="Function">map≢[]</a> <a id="1296" class="Symbol">{</a><a id="1297" class="Argument">f</a> <a id="1299" class="Symbol">=</a> <a id="1301" href="UTxO.Types.html#7448" class="Field">outputRef</a><a id="1310" class="Symbol">}</a> <a id="1312" href="UTxO.Uniqueness.html#1164" class="Bound">¬px</a><a id="1315" class="Symbol">)</a>
              <a id="1331" class="Keyword">with</a> <a id="1336" href="UTxO.Uniqueness.html#1336" class="Bound">l′</a> <a id="1339" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1341" href="UTxO.Uniqueness.html#1341" class="Bound">suf</a>      ← <a id="1352" href="Prelude.Lists.html#1536" class="Function">∈⇒Suffix</a> <a id="1361" href="UTxO.Uniqueness.html#1254" class="Bound">tx∈</a>
              <a id="1379" class="Keyword">with</a> <a id="1384" class="Symbol">_</a> <a id="1386" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">⊕</a> <a id="1388" class="Symbol">_</a> <a id="1390" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">∶-</a> <a id="1393" href="UTxO.Uniqueness.html#1393" class="Bound">vtx′</a> ← <a id="1400" href="UTxO.Validity.html#5268" class="Function">≼⇒valid</a> <a id="1408" class="Bound">vl</a> <a id="1411" href="UTxO.Uniqueness.html#1341" class="Bound">suf</a>
                 <a id="1432" class="Symbol">=</a> <a id="1434" href="UTxO.Validity.html#5736" class="Postulate">suf-utxo</a> <a id="1443" class="Bound">vl</a> <a id="1446" href="UTxO.Uniqueness.html#1341" class="Bound">suf</a> <a id="1450" class="Symbol">(</a><a id="1451" href="UTxO.Validity.html#1472" class="Field">validOutputRefs</a> <a id="1467" href="UTxO.Uniqueness.html#1393" class="Bound">vtx′</a> <a id="1472" href="UTxO.Uniqueness.html#1267" class="Bound">x∈</a><a id="1474" class="Symbol">)</a> <a id="1476" href="UTxO.Uniqueness.html#1267" class="Bound">x∈</a> <a id="1479" class="Symbol">(</a><a id="1480" href="UTxO.Validity.html#1472" class="Field">validOutputRefs</a> <a id="1496" class="Bound">vtx</a> <a id="1500" href="UTxO.Uniqueness.html#1267" class="Bound">x∈</a><a id="1502" class="Symbol">)</a>

<a id="u∈mkUtxo"></a><a id="1505" href="UTxO.Uniqueness.html#1505" class="Function">u∈mkUtxo</a> <a id="1514" class="Symbol">:</a> <a id="1516" class="Symbol">∀</a> <a id="1518" class="Symbol">{</a><a id="1519" href="UTxO.Uniqueness.html#1519" class="Bound">u</a> <a id="1521" href="UTxO.Uniqueness.html#1521" class="Bound">tx</a><a id="1523" class="Symbol">}</a>
  <a id="1527" class="Symbol">→</a> <a id="1529" href="UTxO.Uniqueness.html#1519" class="Bound">u</a> <a id="1531" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="1533" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="1542" class="Symbol">(</a><a id="1543" href="UTxO.Types.html#7700" class="Field">outputs</a> <a id="1551" href="UTxO.Uniqueness.html#1521" class="Bound">tx</a><a id="1553" class="Symbol">)</a> <a id="1555" class="Symbol">(</a><a id="1556" href="UTxO.TxUtilities.html#656" class="Function">mkUtxo</a> <a id="1563" href="UTxO.Uniqueness.html#1521" class="Bound">tx</a><a id="1565" class="Symbol">)</a>
  <a id="1569" class="Symbol">→</a> <a id="1571" href="UTxO.TxUtilities.html#623" class="Field">prevTx</a> <a id="1578" href="UTxO.Uniqueness.html#1519" class="Bound">u</a> <a id="1580" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1582" href="UTxO.Uniqueness.html#1521" class="Bound">tx</a>
<a id="1585" href="UTxO.Uniqueness.html#1505" class="Function">u∈mkUtxo</a> <a id="1594" class="Symbol">{</a><a id="1595" class="Argument">tx</a> <a id="1598" class="Symbol">=</a> <a id="1600" href="UTxO.Uniqueness.html#1600" class="Bound">tx</a><a id="1602" class="Symbol">}</a> <a id="1604" class="Symbol">=</a> <a id="1606" href="Prelude.Lists.Membership.html#4738" class="Function">mapWith∈-∀</a> <a id="1617" class="Symbol">{</a><a id="1618" class="Argument">P</a> <a id="1620" class="Symbol">=</a> <a id="1622" class="Symbol">(</a><a id="1623" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">_≡</a> <a id="1626" href="UTxO.Uniqueness.html#1600" class="Bound">tx</a><a id="1628" class="Symbol">)</a> <a id="1630" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1632" href="UTxO.TxUtilities.html#623" class="Field">prevTx</a><a id="1638" class="Symbol">}</a> <a id="1640" class="Symbol">λ</a> <a id="1642" href="UTxO.Uniqueness.html#1642" class="Bound">_</a> <a id="1644" class="Symbol">→</a> <a id="1646" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>

<a id="Unique-utxo"></a><a id="1652" href="UTxO.Uniqueness.html#1652" class="Function">Unique-utxo</a> <a id="1664" class="Symbol">:</a> <a id="1666" class="Symbol">∀</a> <a id="1668" class="Symbol">{</a><a id="1669" href="UTxO.Uniqueness.html#1669" class="Bound">l</a><a id="1670" class="Symbol">}</a>
  <a id="1674" class="Symbol">→</a> <a id="1676" href="UTxO.Validity.html#2261" class="Datatype">ValidLedger</a> <a id="1688" href="UTxO.Uniqueness.html#1669" class="Bound">l</a>
  <a id="1692" class="Symbol">→</a> <a id="1694" href="Data.List.Relation.Unary.Unique.Setoid.html#728" class="Datatype">Unique</a> <a id="1701" class="Symbol">(</a><a id="1702" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="1707" href="UTxO.Uniqueness.html#1669" class="Bound">l</a><a id="1708" class="Symbol">)</a>
<a id="1710" href="UTxO.Uniqueness.html#1652" class="Function">Unique-utxo</a> <a id="1722" class="Symbol">{</a><a id="1723" class="Argument">l</a> <a id="1725" class="Symbol">=</a> <a id="1727" href="Agda.Builtin.List.html#167" class="InductiveConstructor">[]</a><a id="1729" class="Symbol">}</a>     <a id="1735" href="UTxO.Validity.html#2297" class="InductiveConstructor">∙</a>                     <a id="1757" class="Symbol">=</a> <a id="1759" href="Data.List.Relation.Unary.AllPairs.Core.html#990" class="InductiveConstructor">[]</a>
<a id="1762" href="UTxO.Uniqueness.html#1652" class="Function">Unique-utxo</a> <a id="1774" class="Symbol">{</a><a id="1775" class="Argument">l</a> <a id="1777" class="Symbol">=</a> <a id="1779" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a> <a id="1782" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="1784" href="UTxO.Uniqueness.html#1784" class="Bound">l</a><a id="1785" class="Symbol">}</a> <a id="1787" href="UTxO.Uniqueness.html#1787" class="Bound">vl₀</a><a id="1790" class="Symbol">@(</a><a id="1792" href="UTxO.Uniqueness.html#1792" class="Bound">vl</a> <a id="1795" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">⊕</a> <a id="1797" class="DottedPattern Symbol">.</a><a id="1798" href="UTxO.Uniqueness.html#1779" class="DottedPattern Bound">tx</a> <a id="1801" href="UTxO.Validity.html#2319" class="InductiveConstructor Operator">∶-</a> <a id="1804" href="UTxO.Uniqueness.html#1804" class="Bound">vtx</a><a id="1807" class="Symbol">)</a> <a id="1809" class="Symbol">=</a> <a id="1811" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html#1790" class="Function">++⁺</a> <a id="1815" href="UTxO.Uniqueness.html#1944" class="Function">uniqˡ</a> <a id="1821" href="UTxO.Uniqueness.html#2035" class="Function">uniqʳ</a> <a id="1827" href="UTxO.Uniqueness.html#2305" class="Function">disj</a>
  <a id="1834" class="Keyword">where</a>
    <a id="1844" href="UTxO.Uniqueness.html#1844" class="Function">lˡ</a> <a id="1847" class="Symbol">=</a> <a id="1849" href="Data.List.Base.html#8101" class="Function">filter</a> <a id="1856" class="Symbol">((</a><a id="1858" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="1862" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="1873" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="1875" class="Symbol">)</a> <a id="1877" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1879" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="1885" class="Symbol">)</a> <a id="1887" class="Symbol">(</a><a id="1888" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="1893" href="UTxO.Uniqueness.html#1784" class="Bound">l</a><a id="1894" class="Symbol">)</a>
    <a id="1900" href="UTxO.Uniqueness.html#1900" class="Function">lʳ</a> <a id="1903" class="Symbol">=</a> <a id="1905" href="Data.List.Membership.Setoid.html#1137" class="Function">mapWith∈</a> <a id="1914" class="Symbol">(</a><a id="1915" href="UTxO.Types.html#7700" class="Field">outputs</a> <a id="1923" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="1925" class="Symbol">)</a> <a id="1927" class="Symbol">(</a><a id="1928" href="UTxO.TxUtilities.html#656" class="Function">mkUtxo</a> <a id="1935" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="1937" class="Symbol">)</a>

    <a id="1944" href="UTxO.Uniqueness.html#1944" class="Function">uniqˡ</a> <a id="1950" class="Symbol">:</a> <a id="1952" href="Data.List.Relation.Unary.Unique.Setoid.html#728" class="Datatype">Unique</a> <a id="1959" href="UTxO.Uniqueness.html#1844" class="Function">lˡ</a>
    <a id="1966" href="UTxO.Uniqueness.html#1944" class="Function">uniqˡ</a> <a id="1972" class="Symbol">=</a> <a id="1974" href="Data.List.Relation.Unary.Unique.Propositional.Properties.html#4951" class="Function">filter⁺</a> <a id="1982" class="Symbol">((</a><a id="1984" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="1988" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="1999" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="2001" class="Symbol">)</a> <a id="2003" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2005" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="2011" class="Symbol">)</a> <a id="2013" class="Symbol">(</a><a id="2014" href="UTxO.Uniqueness.html#1652" class="Function">Unique-utxo</a> <a id="2026" href="UTxO.Uniqueness.html#1792" class="Bound">vl</a><a id="2028" class="Symbol">)</a>

    <a id="2035" href="UTxO.Uniqueness.html#2035" class="Function">uniqʳ</a> <a id="2041" class="Symbol">:</a> <a id="2043" href="Data.List.Relation.Unary.Unique.Setoid.html#728" class="Datatype">Unique</a> <a id="2050" href="UTxO.Uniqueness.html#1900" class="Function">lʳ</a>
    <a id="2057" href="UTxO.Uniqueness.html#2035" class="Function">uniqʳ</a> <a id="2063" class="Symbol">=</a> <a id="2065" href="Prelude.Lists.Membership.html#5725" class="Function">Unique-mapWith∈</a> <a id="2081" href="UTxO.Uniqueness.html#2103" class="Function">h</a>
      <a id="2089" class="Keyword">where</a>
        <a id="2103" href="UTxO.Uniqueness.html#2103" class="Function">h</a> <a id="2105" class="Symbol">:</a> <a id="2107" class="Symbol">∀</a> <a id="2109" class="Symbol">{</a><a id="2110" href="UTxO.Uniqueness.html#2110" class="Bound">x</a> <a id="2112" href="UTxO.Uniqueness.html#2112" class="Bound">x′</a><a id="2114" class="Symbol">}</a> <a id="2116" class="Symbol">{</a><a id="2117" href="UTxO.Uniqueness.html#2117" class="Bound">x∈</a> <a id="2120" class="Symbol">:</a> <a id="2122" href="UTxO.Uniqueness.html#2110" class="Bound">x</a> <a id="2124" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="2126" href="UTxO.Types.html#7700" class="Field">outputs</a> <a id="2134" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="2136" class="Symbol">}</a> <a id="2138" class="Symbol">{</a><a id="2139" href="UTxO.Uniqueness.html#2139" class="Bound">x∈′</a> <a id="2143" class="Symbol">:</a> <a id="2145" href="UTxO.Uniqueness.html#2112" class="Bound">x′</a> <a id="2148" href="Data.List.Membership.Setoid.html#896" class="Function Operator">∈</a> <a id="2150" href="UTxO.Types.html#7700" class="Field">outputs</a> <a id="2158" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="2160" class="Symbol">}</a>
          <a id="2172" class="Symbol">→</a> <a id="2174" href="UTxO.TxUtilities.html#656" class="Function">mkUtxo</a> <a id="2181" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a> <a id="2184" href="UTxO.Uniqueness.html#2117" class="Bound">x∈</a> <a id="2187" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2189" href="UTxO.TxUtilities.html#656" class="Function">mkUtxo</a> <a id="2196" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a> <a id="2199" href="UTxO.Uniqueness.html#2139" class="Bound">x∈′</a>
          <a id="2213" class="Symbol">→</a> <a id="2215" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="2227" href="UTxO.Uniqueness.html#2117" class="Bound">x∈</a> <a id="2230" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2232" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="2244" href="UTxO.Uniqueness.html#2139" class="Bound">x∈′</a>
        <a id="2256" href="UTxO.Uniqueness.html#2103" class="Function">h</a> <a id="2258" class="Symbol">=</a> <a id="2260" href="Data.Fin.Properties.html#3433" class="Function">F.toℕ-injective</a> <a id="2276" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2278" href="Relation.Binary.PropositionalEquality.Core.html#1139" class="Function">cong</a> <a id="2283" class="Symbol">(</a><a id="2284" href="UTxO.Types.html#4324" class="Field">index</a> <a id="2290" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2292" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="2298" class="Symbol">)</a>

    <a id="2305" href="UTxO.Uniqueness.html#2305" class="Function">disj</a> <a id="2310" class="Symbol">:</a> <a id="2312" href="Data.List.Relation.Binary.Disjoint.Setoid.html#851" class="Function">Disjoint</a> <a id="2321" href="UTxO.Uniqueness.html#1844" class="Function">lˡ</a> <a id="2324" href="UTxO.Uniqueness.html#1900" class="Function">lʳ</a>
    <a id="2331" href="UTxO.Uniqueness.html#2305" class="Function">disj</a> <a id="2336" class="Symbol">(</a><a id="2337" href="UTxO.Uniqueness.html#2337" class="Bound">x∈ˡ</a> <a id="2341" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2343" href="UTxO.Uniqueness.html#2343" class="Bound">x∈ʳ</a><a id="2346" class="Symbol">)</a>
      <a id="2354" class="Keyword">with</a> <a id="2359" href="Data.List.Membership.Propositional.Properties.html#8622" class="Function">∈-filter⁻</a> <a id="2369" class="Symbol">((</a><a id="2371" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="2375" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="2386" href="UTxO.Uniqueness.html#1779" class="Bound">tx</a><a id="2388" class="Symbol">)</a> <a id="2390" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="2392" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="2398" class="Symbol">)</a> <a id="2400" class="Symbol">{</a><a id="2401" class="Argument">xs</a> <a id="2404" class="Symbol">=</a> <a id="2406" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="2411" href="UTxO.Uniqueness.html#1784" class="Bound">l</a><a id="2412" class="Symbol">}</a> <a id="2414" href="UTxO.Uniqueness.html#2337" class="Bound">x∈ˡ</a>
    <a id="2422" class="Symbol">...</a> <a id="2426" class="Symbol">|</a> <a id="2428" href="UTxO.Uniqueness.html#2428" class="Bound">x∈ˡ′</a> <a id="2433" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2435" class="Symbol">_</a>
      <a id="2443" class="Keyword">with</a> <a id="2448" href="UTxO.TxUtilities.html#2014" class="Function">∈utxo⇒outRef≡</a> <a id="2462" class="Symbol">{</a><a id="2463" class="Argument">l</a> <a id="2465" class="Symbol">=</a> <a id="2467" href="UTxO.Uniqueness.html#1784" class="Bound">l</a><a id="2468" class="Symbol">}</a> <a id="2470" href="UTxO.Uniqueness.html#2428" class="Bound">x∈ˡ′</a>
    <a id="2479" class="Symbol">...</a> <a id="2483" class="Symbol">|</a> <a id="2485" href="UTxO.Uniqueness.html#2485" class="Bound">x∈ˡ″</a> <a id="2490" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2492" class="Symbol">_</a>
      <a id="2500" class="Keyword">rewrite</a> <a id="2508" href="UTxO.Uniqueness.html#1505" class="Function">u∈mkUtxo</a> <a id="2517" class="Bound">x∈ʳ</a>
      <a id="2527" class="Keyword">with</a> <a id="2532" href="Data.List.Relation.Unary.AllPairs.html#1292" class="Function">AllPairs.head</a> <a id="2546" class="Symbol">(</a><a id="2547" href="UTxO.Uniqueness.html#896" class="Function">Unique-ledger</a> <a id="2561" href="UTxO.Uniqueness.html#1787" class="Bound">vl₀</a><a id="2564" class="Symbol">)</a>
    <a id="2570" class="Symbol">...</a> <a id="2574" class="Symbol">|</a> <a id="2576" href="UTxO.Uniqueness.html#2576" class="Bound">all≢tx</a>
        <a id="2591" class="Symbol">=</a> <a id="2593" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="2606" href="UTxO.Uniqueness.html#2576" class="Bound">all≢tx</a> <a id="2613" class="Bound">x∈ˡ″</a> <a id="2618" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
</pre></body></html>