<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bisimulation.Completeness</title><link rel="stylesheet" href="css/Agda.css"></head><body><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Data.List.Membership.Propositional.Properties.html" class="Module">Data.List.Membership.Propositional.Properties</a>
  <a id="61" class="Keyword">using</a> <a id="67" class="Symbol">(</a><a id="68" href="Data.List.Membership.Propositional.Properties.Core.html#1439" class="Function">find∘map</a><a id="76" class="Symbol">;</a> <a id="78" href="Data.List.Membership.Propositional.Properties.html#3429" class="Function">∈-map⁻</a><a id="84" class="Symbol">;</a> <a id="86" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a><a id="92" class="Symbol">;</a> <a id="94" href="Data.List.Membership.Propositional.Properties.html#6447" class="Function">∈-filter⁻</a><a id="103" class="Symbol">;</a> <a id="105" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a><a id="114" class="Symbol">;</a> <a id="116" href="Data.List.Membership.Propositional.Properties.html#4081" class="Function">∈-++⁻</a><a id="121" class="Symbol">;</a> <a id="123" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a><a id="129" class="Symbol">;</a> <a id="131" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a><a id="137" class="Symbol">)</a>

<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="245" class="Keyword">open</a> <a id="250" class="Keyword">import</a> <a id="257" href="Prelude.Set%2527.html" class="Module">Prelude.Set&#39;</a>
<a id="270" class="Keyword">open</a> <a id="275" class="Keyword">import</a> <a id="282" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="294" class="Keyword">open</a> <a id="299" class="Keyword">import</a> <a id="306" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>
<a id="324" class="Keyword">open</a> <a id="329" class="Keyword">import</a> <a id="336" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>

<a id="357" class="Keyword">open</a> <a id="362" class="Keyword">import</a> <a id="369" href="UTxO.Hashing.html" class="Module">UTxO.Hashing</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="UTxO.Value.html" class="Module">UTxO.Value</a>
<a id="405" class="Keyword">open</a> <a id="410" class="Keyword">import</a> <a id="417" href="UTxO.Types.html" class="Module">UTxO.Types</a> <a id="428" class="Keyword">hiding</a> <a id="435" class="Symbol">(</a><a id="436" href="UTxO.Types.html#751" class="InductiveConstructor">I</a><a id="437" class="Symbol">)</a>
<a id="439" class="Keyword">open</a> <a id="444" class="Keyword">import</a> <a id="451" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>
<a id="465" class="Keyword">open</a> <a id="470" class="Keyword">import</a> <a id="477" href="UTxO.TxUtilities.html" class="Module">UTxO.TxUtilities</a>
<a id="494" class="Keyword">open</a> <a id="499" class="Keyword">import</a> <a id="506" href="StateMachine.Base.html" class="Module">StateMachine.Base</a>

<a id="525" class="Keyword">open</a> <a id="530" href="UTxO.Types.html#4459" class="Module">InputInfo</a>
<a id="540" class="Keyword">open</a> <a id="545" href="UTxO.Types.html#4892" class="Module">TxInfo</a>

<a id="553" class="Keyword">module</a> <a id="560" href="Bisimulation.Completeness.html" class="Module">Bisimulation.Completeness</a>
  <a id="588" class="Symbol">{</a><a id="589" href="Bisimulation.Completeness.html#589" class="Bound">S</a> <a id="591" href="Bisimulation.Completeness.html#591" class="Bound">I</a> <a id="593" class="Symbol">:</a> <a id="595" class="PrimitiveType">Set</a><a id="598" class="Symbol">}</a> <a id="600" class="Symbol">{{</a><a id="602" href="Bisimulation.Completeness.html#602" class="Bound">_</a> <a id="604" class="Symbol">:</a> <a id="606" href="UTxO.Types.html#981" class="Record">IsData</a> <a id="613" href="Bisimulation.Completeness.html#589" class="Bound">S</a><a id="614" class="Symbol">}}</a> <a id="617" class="Symbol">{{</a><a id="619" href="Bisimulation.Completeness.html#619" class="Bound">_</a> <a id="621" class="Symbol">:</a> <a id="623" href="UTxO.Types.html#981" class="Record">IsData</a> <a id="630" href="Bisimulation.Completeness.html#591" class="Bound">I</a><a id="631" class="Symbol">}}</a> <a id="634" class="Symbol">{</a><a id="635" href="Bisimulation.Completeness.html#635" class="Bound">sm</a> <a id="638" class="Symbol">:</a> <a id="640" href="StateMachine.Base.html#1793" class="Record">StateMachine</a> <a id="653" href="Bisimulation.Completeness.html#589" class="Bound">S</a> <a id="655" href="Bisimulation.Completeness.html#591" class="Bound">I</a><a id="656" class="Symbol">}</a>
  <a id="660" class="Keyword">where</a>

<a id="667" class="Keyword">open</a> <a id="672" href="StateMachine.Base.html#2039" class="Module">CEM</a> <a id="676" class="Symbol">{</a><a id="677" class="Argument">sm</a> <a id="680" class="Symbol">=</a> <a id="682" href="Bisimulation.Completeness.html#635" class="Bound">sm</a><a id="684" class="Symbol">}</a>
<a id="686" class="Keyword">open</a> <a id="691" class="Keyword">import</a> <a id="698" href="StateMachine.Properties.html" class="Module">StateMachine.Properties</a> <a id="722" class="Symbol">{</a><a id="723" class="Argument">sm</a> <a id="726" class="Symbol">=</a> <a id="728" href="Bisimulation.Completeness.html#635" class="Bound">sm</a><a id="730" class="Symbol">}</a>
<a id="732" class="Keyword">open</a> <a id="737" class="Keyword">import</a> <a id="744" href="Bisimulation.Base.html" class="Module">Bisimulation.Base</a>       <a id="768" class="Symbol">{</a><a id="769" class="Argument">sm</a> <a id="772" class="Symbol">=</a> <a id="774" href="Bisimulation.Completeness.html#635" class="Bound">sm</a><a id="776" class="Symbol">}</a>

<a id="completeness"></a><a id="779" href="Bisimulation.Completeness.html#779" class="Function">completeness</a> <a id="792" class="Symbol">:</a> <a id="794" class="Symbol">∀</a> <a id="796" class="Symbol">{</a><a id="797" href="Bisimulation.Completeness.html#797" class="Bound">s</a> <a id="799" href="Bisimulation.Completeness.html#799" class="Bound">tx</a> <a id="802" href="Bisimulation.Completeness.html#802" class="Bound">l</a><a id="803" class="Symbol">}</a> <a id="805" class="Symbol">{</a><a id="806" href="Bisimulation.Completeness.html#806" class="Bound">vtx</a> <a id="810" class="Symbol">:</a> <a id="812" href="UTxO.Validity.html#1184" class="Record">IsValidTx</a> <a id="822" href="Bisimulation.Completeness.html#799" class="Bound">tx</a> <a id="825" href="Bisimulation.Completeness.html#802" class="Bound">l</a><a id="826" class="Symbol">}</a> <a id="828" class="Symbol">{</a><a id="829" href="Bisimulation.Completeness.html#829" class="Bound">vl</a> <a id="832" class="Symbol">:</a> <a id="834" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="846" href="Bisimulation.Completeness.html#802" class="Bound">l</a><a id="847" class="Symbol">}</a> <a id="849" class="Symbol">{</a><a id="850" href="Bisimulation.Completeness.html#850" class="Bound">vl′</a> <a id="854" class="Symbol">:</a> <a id="856" href="UTxO.Validity.html#2109" class="Datatype">ValidLedger</a> <a id="868" class="Symbol">(</a><a id="869" href="Bisimulation.Completeness.html#799" class="Bound">tx</a> <a id="872" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="874" href="Bisimulation.Completeness.html#802" class="Bound">l</a><a id="875" class="Symbol">)}</a>
  <a id="880" class="Symbol">→</a> <a id="882" href="Bisimulation.Completeness.html#829" class="Bound">vl</a> <a id="885" href="Bisimulation.Base.html#664" class="Function Operator">—→[</a> <a id="889" href="Bisimulation.Completeness.html#799" class="Bound">tx</a> <a id="892" href="Bisimulation.Base.html#664" class="Function Operator">∶-</a> <a id="895" href="Bisimulation.Completeness.html#806" class="Bound">vtx</a> <a id="899" href="Bisimulation.Base.html#664" class="Function Operator">]</a> <a id="901" href="Bisimulation.Completeness.html#850" class="Bound">vl′</a>
  <a id="907" class="Symbol">→</a> <a id="909" href="Bisimulation.Completeness.html#829" class="Bound">vl</a> <a id="912" href="Bisimulation.Base.html#804" class="Function Operator">~</a> <a id="914" href="Bisimulation.Completeness.html#797" class="Bound">s</a>
    <a id="920" class="Comment">--------------------------------------</a>
  <a id="961" class="Symbol">→</a> <a id="963" class="Symbol">(</a><a id="964" href="Data.Product.html#1788" class="Function">∃[</a> <a id="967" href="Bisimulation.Completeness.html#967" class="Bound">i</a> <a id="969" href="Data.Product.html#1788" class="Function">]</a> <a id="971" href="Data.Product.html#1788" class="Function">∃[</a> <a id="974" href="Bisimulation.Completeness.html#974" class="Bound">s′</a> <a id="977" href="Data.Product.html#1788" class="Function">]</a> <a id="979" href="Data.Product.html#1788" class="Function">∃[</a> <a id="982" href="Bisimulation.Completeness.html#982" class="Bound">tx≡</a> <a id="986" href="Data.Product.html#1788" class="Function">]</a>
      <a id="994" class="Symbol">(</a> <a id="996" href="Bisimulation.Completeness.html#797" class="Bound">s</a> <a id="998" href="Bisimulation.Base.html#547" class="Function Operator">—→[</a> <a id="1002" href="Bisimulation.Completeness.html#967" class="Bound">i</a> <a id="1004" href="Bisimulation.Base.html#547" class="Function Operator">]</a> <a id="1006" class="Symbol">(</a><a id="1007" href="Bisimulation.Completeness.html#974" class="Bound">s′</a> <a id="1010" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1012" href="Bisimulation.Completeness.html#982" class="Bound">tx≡</a><a id="1015" class="Symbol">)</a>
      <a id="1023" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1025" class="Symbol">(</a><a id="1026" href="Bisimulation.Completeness.html#850" class="Bound">vl′</a> <a id="1030" href="Bisimulation.Base.html#804" class="Function Operator">~</a> <a id="1032" href="Bisimulation.Completeness.html#974" class="Bound">s′</a><a id="1034" class="Symbol">)</a>
      <a id="1042" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="1044" class="Symbol">(</a><a id="1045" href="StateMachine.Base.html#1616" class="Function">verifyTx</a> <a id="1054" href="Bisimulation.Completeness.html#802" class="Bound">l</a> <a id="1056" href="Bisimulation.Completeness.html#799" class="Bound">tx</a> <a id="1059" href="Bisimulation.Completeness.html#982" class="Bound">tx≡</a> <a id="1063" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="1065" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="1069" class="Symbol">)))</a>
  <a id="1075" href="Data.Sum.Base.html#728" class="Datatype Operator">⊎</a> <a id="1077" class="Symbol">(</a><a id="1078" href="Bisimulation.Completeness.html#850" class="Bound">vl′</a> <a id="1082" href="Bisimulation.Base.html#804" class="Function Operator">~</a> <a id="1084" href="Bisimulation.Completeness.html#797" class="Bound">s</a><a id="1085" class="Symbol">)</a>
<a id="1087" href="Bisimulation.Completeness.html#779" class="Function">completeness</a> <a id="1100" class="Symbol">{</a><a id="1101" href="Bisimulation.Completeness.html#1101" class="Bound">s</a><a id="1102" class="Symbol">}</a> <a id="1104" class="Symbol">{</a><a id="1105" href="Bisimulation.Completeness.html#1105" class="Bound">tx</a><a id="1107" class="Symbol">}</a> <a id="1109" class="Symbol">{</a><a id="1110" href="Bisimulation.Completeness.html#1110" class="Bound">l</a><a id="1111" class="Symbol">}</a> <a id="1113" class="Symbol">{</a><a id="1114" href="Bisimulation.Completeness.html#1114" class="Bound">vtx</a><a id="1117" class="Symbol">}</a> <a id="1119" class="Symbol">{</a><a id="1120" href="Bisimulation.Completeness.html#1120" class="Bound">vl</a><a id="1122" class="Symbol">}</a> <a id="1124" class="Symbol">{</a><a id="1125" href="Bisimulation.Completeness.html#1125" class="Bound">vl′</a><a id="1128" class="Symbol">}</a> <a id="1130" href="Bisimulation.Completeness.html#1130" class="Bound">vl→vl′</a> <a id="1137" href="Bisimulation.Completeness.html#1137" class="Bound">vl~s</a>
  <a id="1144" class="Keyword">with</a> <a id="1149" href="Bisimulation.Base.html#1339" class="Function">view-~</a> <a id="1156" class="Symbol">{</a><a id="1157" href="Bisimulation.Completeness.html#1110" class="Bound">l</a><a id="1158" class="Symbol">}</a> <a id="1160" class="Symbol">{</a><a id="1161" href="Bisimulation.Completeness.html#1101" class="Bound">s</a><a id="1162" class="Symbol">}</a> <a id="1164" class="Symbol">{</a><a id="1165" href="Bisimulation.Completeness.html#1120" class="Bound">vl</a><a id="1167" class="Symbol">}</a> <a id="1169" href="Bisimulation.Completeness.html#1137" class="Bound">vl~s</a>
<a id="1174" class="Symbol">...</a> <a id="1178" class="Symbol">|</a> <a id="1180" href="Bisimulation.Completeness.html#1180" class="Bound">prevTx</a> <a id="1187" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1189" href="Bisimulation.Completeness.html#1189" class="Bound">v</a> <a id="1191" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1193" href="Bisimulation.Completeness.html#1193" class="Bound">prevOut∈</a> <a id="1202" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1204" href="Bisimulation.Completeness.html#1204" class="Bound">u∈</a> <a id="1207" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1209" class="Symbol">_</a> <a id="1211" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1213" href="Bisimulation.Completeness.html#1213" class="Bound">prev∈utxo</a> <a id="1223" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1225" href="Bisimulation.Completeness.html#1225" class="Bound">getSpent≡</a> <a id="1235" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1237" href="Bisimulation.Completeness.html#1237" class="Bound">threadToken≡</a>
  <a id="1252" class="Keyword">with</a> <a id="1257" class="Symbol">(</a><a id="1258" href="Bisimulation.Completeness.html#1180" class="Bound">prevTx</a> <a id="1265" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="1268" class="Symbol">)</a> <a id="1270" href="UTxO.Types.html#4064" class="InductiveConstructor Operator">indexed-at</a> <a id="1281" class="Symbol">(</a><a id="1282" href="Prelude.ToN.html#106" class="Field">toℕ</a> <a id="1286" class="Symbol">(</a><a id="1287" href="Data.List.Relation.Unary.Any.html#1909" class="Function">L.Any.index</a> <a id="1299" href="Bisimulation.Completeness.html#1193" class="Bound">prevOut∈</a><a id="1307" class="Symbol">))</a> <a id="1310" href="Data.List.Membership.DecSetoid.html#762" class="Function Operator">∈?</a> <a id="1313" href="UTxO.Types.html#7844" class="Function">outputRefs</a> <a id="1324" class="Bound">tx</a>
<a id="1327" class="Symbol">...</a> <a id="1331" class="Symbol">|</a> <a id="1333" href="Relation.Nullary.html#1682" class="InductiveConstructor">no</a> <a id="1336" href="Bisimulation.Completeness.html#1336" class="Bound">prev∉</a>
    <a id="1346" class="Symbol">=</a> <a id="1348" href="Data.Sum.Base.html#803" class="InductiveConstructor">inj₂</a> <a id="1353" class="Symbol">(</a><a id="1354" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="1361" class="Symbol">(</a><a id="1362" href="UTxO.Types.html#4750" class="Field">datumHash</a> <a id="1372" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1374" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="1377" class="Symbol">)</a>
             <a id="1392" class="Symbol">(</a><a id="1393" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a> <a id="1403" class="Symbol">((</a><a id="1405" href="Prelude.DecEq.html#593" class="Field Operator">_≟</a> <a id="1408" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="1412" class="Symbol">)</a> <a id="1414" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1416" class="Symbol">(</a><a id="1417" href="UTxO.Value.html#2174" class="Function Operator">_≥ᶜ</a> <a id="1421" href="StateMachine.Base.html#2955" class="Function">threadₛₘ</a><a id="1429" class="Symbol">)</a> <a id="1431" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1433" href="UTxO.Types.html#4728" class="Field">value</a> <a id="1439" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1441" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="1444" class="Symbol">)</a>
               <a id="1461" class="Symbol">(</a><a id="1462" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a> <a id="1472" class="Symbol">((</a><a id="1474" href="StateMachine.Base.html#2370" class="Function">𝕍</a> <a id="1476" href="Prelude.DecEq.html#593" class="Field Operator">≟_</a><a id="1478" class="Symbol">)</a> <a id="1480" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1482" href="UTxO.Types.html#4669" class="Field">address</a> <a id="1490" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1492" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="1495" class="Symbol">)</a>
                 <a id="1514" class="Symbol">(</a><a id="1515" href="Data.List.Membership.Propositional.Properties.html#3903" class="Function">∈-++⁺ˡ</a> <a id="1522" class="Symbol">(</a><a id="1523" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a> <a id="1533" class="Symbol">((</a><a id="1535" href="Prelude.DecEq.html#2182" class="Function Operator">_∉?</a> <a id="1539" href="UTxO.Types.html#7844" class="Function">outputRefs</a> <a id="1550" class="Bound">tx</a><a id="1552" class="Symbol">)</a> <a id="1554" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="1556" href="UTxO.TxUtilities.html#471" class="Field">outRef</a><a id="1562" class="Symbol">)</a> <a id="1564" class="Symbol">{</a><a id="1565" class="Argument">x</a> <a id="1567" class="Symbol">=</a> <a id="1569" href="Bisimulation.Completeness.html#1742" class="Function">u</a><a id="1570" class="Symbol">}</a> <a id="1572" class="Symbol">{</a><a id="1573" class="Argument">xs</a> <a id="1576" class="Symbol">=</a> <a id="1578" href="UTxO.TxUtilities.html#736" class="Function">utxo</a> <a id="1583" class="Bound">l</a><a id="1584" class="Symbol">}</a>
                   <a id="1605" class="Bound">u∈</a> <a id="1608" href="Bisimulation.Completeness.html#1336" class="Bound">prev∉</a><a id="1613" class="Symbol">))</a> <a id="1616" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a><a id="1620" class="Symbol">)</a>
               <a id="1637" class="Bound">threadToken≡</a><a id="1649" class="Symbol">))</a>
      <a id="1658" class="Keyword">where</a> <a id="1664" href="Bisimulation.Completeness.html#1664" class="Function">o</a>    <a id="1669" class="Symbol">=</a> <a id="1671" class="Keyword">record</a> <a id="1678" class="Symbol">{</a> <a id="1680" href="UTxO.Types.html#4669" class="Field">address</a> <a id="1688" class="Symbol">=</a> <a id="1690" href="StateMachine.Base.html#2370" class="Function">𝕍</a><a id="1691" class="Symbol">;</a> <a id="1693" href="UTxO.Types.html#4750" class="Field">datumHash</a> <a id="1703" class="Symbol">=</a> <a id="1705" href="UTxO.Types.html#1022" class="Field">toData</a> <a id="1712" class="Bound">s</a> <a id="1714" href="UTxO.Hashing.Types.html#593" class="Function Operator">♯ᵈ</a><a id="1716" class="Symbol">;</a> <a id="1718" href="UTxO.Types.html#4728" class="Field">value</a> <a id="1724" class="Symbol">=</a> <a id="1726" class="Bound">v</a> <a id="1728" class="Symbol">}</a>
            <a id="1742" href="Bisimulation.Completeness.html#1742" class="Function">u</a>    <a id="1747" class="Symbol">=</a> <a id="1749" class="Keyword">record</a> <a id="1756" class="Symbol">{</a> <a id="1758" href="UTxO.TxUtilities.html#522" class="Field">prevTx</a> <a id="1765" class="Symbol">=</a> <a id="1767" class="Bound">prevTx</a><a id="1773" class="Symbol">;</a> <a id="1775" href="UTxO.TxUtilities.html#498" class="Field">out</a> <a id="1779" class="Symbol">=</a> <a id="1781" href="Bisimulation.Completeness.html#1664" class="Function">o</a><a id="1782" class="Symbol">;</a> <a id="1784" href="UTxO.TxUtilities.html#471" class="Field">outRef</a> <a id="1791" class="Symbol">=</a> <a id="1793" class="Symbol">(</a><a id="1794" class="Bound">prevTx</a> <a id="1801" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="1804" class="Symbol">)</a> <a id="1806" href="UTxO.Types.html#4064" class="InductiveConstructor Operator">indexed-at</a> <a id="1817" class="Symbol">(</a><a id="1818" href="Prelude.ToN.html#106" class="Field">toℕ</a> <a id="1822" class="Symbol">(</a><a id="1823" href="Data.List.Relation.Unary.Any.html#1909" class="Function">L.Any.index</a> <a id="1835" class="Bound">prevOut∈</a><a id="1843" class="Symbol">))</a> <a id="1846" class="Symbol">}</a>
<a id="1848" class="Symbol">...</a> <a id="1852" class="Symbol">|</a> <a id="1854" href="Relation.Nullary.html#1645" class="InductiveConstructor">yes</a> <a id="1858" href="Bisimulation.Completeness.html#1858" class="Bound">prev∈</a>
  <a id="1866" class="Keyword">with</a> <a id="1871" href="Data.List.Membership.Propositional.Properties.html#3429" class="Function">∈-map⁻</a> <a id="1878" href="UTxO.Types.html#7268" class="Field">outputRef</a> <a id="1888" href="Bisimulation.Completeness.html#1858" class="Bound">prev∈</a>
<a id="1894" class="Symbol">...</a> <a id="1898" class="Symbol">|</a> <a id="1900" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a> <a id="1905" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1907" href="Bisimulation.Completeness.html#1907" class="Bound">txIn∈</a> <a id="1913" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="1915" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
    <a id="1924" class="Symbol">=</a> <a id="1926" href="Data.Sum.Base.html#778" class="InductiveConstructor">inj₁</a> <a id="1931" class="Symbol">(</a><a id="1932" href="Bisimulation.Completeness.html#2559" class="Function">STEP</a> <a id="1937" class="Symbol">(</a><a id="1938" href="Bisimulation.Completeness.html#2297" class="Function">validate≡</a> <a id="1948" class="Symbol">{</a><a id="1949" class="Argument">ptx</a> <a id="1953" class="Symbol">=</a> <a id="1955" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a><a id="1958" class="Symbol">}</a> <a id="1960" class="Symbol">(</a><a id="1961" href="Data.List.Relation.Unary.All.html#5949" class="Function">L.All.lookup</a> <a id="1974" class="Symbol">(</a><a id="1975" href="UTxO.Validity.html#1578" class="Field">allInputsValidate</a> <a id="1993" class="Bound">vtx</a><a id="1996" class="Symbol">)</a> <a id="1998" class="Symbol">(</a><a id="1999" href="Prelude.Lists.html#3807" class="Function">x∈→ix∈</a> <a id="2006" href="Bisimulation.Completeness.html#1907" class="Bound">txIn∈</a><a id="2011" class="Symbol">))))</a>
  <a id="2018" class="Keyword">where</a>
    <a id="2028" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a> <a id="2032" class="Symbol">=</a> <a id="2034" href="UTxO.TxUtilities.html#6141" class="Function">toPendingTx</a> <a id="2046" class="Bound">l</a> <a id="2048" class="Bound">tx</a> <a id="2051" class="Symbol">(</a><a id="2052" href="Data.List.Relation.Unary.Any.html#1909" class="Function">L.Any.index</a> <a id="2064" href="Bisimulation.Completeness.html#1907" class="Bound">txIn∈</a><a id="2069" class="Symbol">)</a>
    <a id="2075" href="Bisimulation.Completeness.html#2075" class="Function">txi</a> <a id="2079" class="Symbol">=</a> <a id="2081" href="UTxO.Types.html#5190" class="Field">txInfo</a> <a id="2088" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a>
    <a id="2096" href="Bisimulation.Completeness.html#2096" class="Function">di</a>  <a id="2100" class="Symbol">=</a> <a id="2102" href="UTxO.Types.html#7322" class="Field">redeemer</a> <a id="2111" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a>
    <a id="2120" href="Bisimulation.Completeness.html#2120" class="Function">ds</a>  <a id="2124" class="Symbol">=</a> <a id="2126" href="UTxO.Types.html#1022" class="Field">toData</a> <a id="2133" class="Bound">s</a>

    <a id="2140" href="Bisimulation.Completeness.html#2140" class="Function">vvh</a> <a id="2144" class="Symbol">:</a> <a id="2146" class="Symbol">(</a><a id="2147" href="StateMachine.Base.html#2370" class="Function">𝕍</a> <a id="2149" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2151" href="UTxO.Types.html#7296" class="Field">validator</a> <a id="2161" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a> <a id="2166" href="UTxO.Hashing.Base.html#1212" class="Postulate Operator">♯</a><a id="2167" class="Symbol">)</a> <a id="2169" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2171" class="Symbol">(</a><a id="2172" href="Bisimulation.Completeness.html#2120" class="Function">ds</a> <a id="2175" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2177" href="UTxO.Types.html#7343" class="Field">datum</a> <a id="2183" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a><a id="2187" class="Symbol">)</a>
    <a id="2193" href="Bisimulation.Completeness.html#2140" class="Function">vvh</a> <a id="2197" class="Symbol">=</a> <a id="2199" href="Prelude.Bifunctor.html#962" class="Function">map₂</a> <a id="2204" href="UTxO.Hashing.Types.html#1643" class="Postulate">injective♯ᵈ</a>
        <a id="2224" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="2226" href="Prelude.General.html#2758" class="Function">Any-just</a> <a id="2235" class="Bound">getSpent≡</a> <a id="2245" class="Symbol">(</a><a id="2246" href="Data.List.Relation.Unary.All.html#5949" class="Function">L.All.lookup</a> <a id="2259" class="Symbol">(</a><a id="2260" href="UTxO.Validity.html#1825" class="Field">validateValidHashes</a> <a id="2280" class="Bound">vtx</a><a id="2283" class="Symbol">)</a> <a id="2285" href="Bisimulation.Completeness.html#1907" class="Bound">txIn∈</a><a id="2290" class="Symbol">)</a>

    <a id="2297" href="Bisimulation.Completeness.html#2297" class="Function">validate≡</a> <a id="2307" class="Symbol">:</a> <a id="2309" class="Symbol">∀</a> <a id="2311" class="Symbol">{</a><a id="2312" href="Bisimulation.Completeness.html#2312" class="Bound">ptx</a> <a id="2316" class="Symbol">:</a> <a id="2318" href="UTxO.Types.html#5250" class="Function">PendingTx</a><a id="2327" class="Symbol">}</a>
       <a id="2336" class="Symbol">→</a> <a id="2338" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2340" class="Symbol">(</a><a id="2341" href="UTxO.Types.html#7739" class="Function">runValidation</a> <a id="2355" href="Bisimulation.Completeness.html#2312" class="Bound">ptx</a> <a id="2359" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a><a id="2363" class="Symbol">)</a>
       <a id="2372" class="Symbol">→</a> <a id="2374" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2376" class="Symbol">(</a><a id="2377" href="StateMachine.Base.html#3006" class="Function">validatorₛₘ</a> <a id="2389" href="Bisimulation.Completeness.html#2312" class="Bound">ptx</a> <a id="2393" href="Bisimulation.Completeness.html#2096" class="Function">di</a> <a id="2396" href="Bisimulation.Completeness.html#2120" class="Function">ds</a><a id="2398" class="Symbol">)</a>
    <a id="2404" href="Bisimulation.Completeness.html#2297" class="Function">validate≡</a> <a id="2414" href="Bisimulation.Completeness.html#2414" class="Bound">p</a> <a id="2416" class="Keyword">rewrite</a> <a id="2424" class="Bound">getSpent≡</a>
                      <a id="2456" class="Symbol">|</a> <a id="2458" href="UTxO.Hashing.Base.html#1240" class="Postulate">♯-injective</a> <a id="2470" class="Symbol">(</a><a id="2471" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="2475" href="Function.Base.html#1538" class="Function Operator">$</a> <a id="2477" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="2483" href="Bisimulation.Completeness.html#2140" class="Function">vvh</a><a id="2486" class="Symbol">)</a>
                      <a id="2510" class="Symbol">|</a> <a id="2512" href="Relation.Binary.PropositionalEquality.Core.html#980" class="Function">sym</a> <a id="2516" class="Symbol">(</a><a id="2517" href="Agda.Builtin.Sigma.html#264" class="Field">proj₂</a> <a id="2523" href="Bisimulation.Completeness.html#2140" class="Function">vvh</a><a id="2526" class="Symbol">)</a>
                      <a id="2550" class="Symbol">=</a> <a id="2552" href="Bisimulation.Completeness.html#2414" class="Bound">p</a>

    <a id="2559" href="Bisimulation.Completeness.html#2559" class="Function">STEP</a> <a id="2564" class="Symbol">:</a>
        <a id="2574" href="Data.Bool.Base.html#1451" class="Function">T</a> <a id="2576" class="Symbol">(</a><a id="2577" href="StateMachine.Base.html#3006" class="Function">validatorₛₘ</a> <a id="2589" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a> <a id="2593" href="Bisimulation.Completeness.html#2096" class="Function">di</a> <a id="2596" href="Bisimulation.Completeness.html#2120" class="Function">ds</a><a id="2598" class="Symbol">)</a>
         <a id="2609" class="Comment">------------------------------------</a>
      <a id="2652" class="Symbol">→</a> <a id="2654" href="Data.Product.html#1788" class="Function">∃[</a> <a id="2657" href="Bisimulation.Completeness.html#2657" class="Bound">i</a> <a id="2659" href="Data.Product.html#1788" class="Function">]</a> <a id="2661" href="Data.Product.html#1788" class="Function">∃[</a> <a id="2664" href="Bisimulation.Completeness.html#2664" class="Bound">s′</a> <a id="2667" href="Data.Product.html#1788" class="Function">]</a> <a id="2669" href="Data.Product.html#1788" class="Function">∃[</a> <a id="2672" href="Bisimulation.Completeness.html#2672" class="Bound">tx≡</a> <a id="2676" href="Data.Product.html#1788" class="Function">]</a>
          <a id="2688" class="Symbol">(</a> <a id="2690" class="Symbol">(</a><a id="2691" href="StateMachine.Base.html#2152" class="Function">stepₛₘ</a> <a id="2698" class="Bound">s</a> <a id="2700" href="Bisimulation.Completeness.html#2657" class="Bound">i</a> <a id="2702" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2704" href="Category.Applicative.Indexed.html#985" class="Field">pure</a> <a id="2709" class="Symbol">(</a><a id="2710" href="Bisimulation.Completeness.html#2664" class="Bound">s′</a> <a id="2713" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2715" href="Bisimulation.Completeness.html#2672" class="Bound">tx≡</a><a id="2718" class="Symbol">))</a>
          <a id="2731" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2733" class="Symbol">(</a><a id="2734" class="Bound">vl′</a> <a id="2738" href="Bisimulation.Base.html#804" class="Function Operator">~</a> <a id="2740" href="Bisimulation.Completeness.html#2664" class="Bound">s′</a><a id="2742" class="Symbol">)</a>
          <a id="2754" href="Data.Product.html#1167" class="Function Operator">×</a> <a id="2756" class="Symbol">(</a><a id="2757" href="StateMachine.Base.html#1616" class="Function">verifyTx</a> <a id="2766" class="Bound">l</a> <a id="2768" class="Bound">tx</a> <a id="2771" href="Bisimulation.Completeness.html#2672" class="Bound">tx≡</a> <a id="2775" href="Agda.Builtin.Equality.html#151" class="Datatype Operator">≡</a> <a id="2777" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="2781" class="Symbol">)</a> <a id="2783" class="Symbol">)</a>
    <a id="2789" href="Bisimulation.Completeness.html#2559" class="Function">STEP</a> <a id="2794" href="Bisimulation.Completeness.html#2794" class="Bound">eq</a>
      <a id="2803" class="Keyword">with</a> <a id="2808" href="StateMachine.Properties.html#1851" class="Function">T-validator</a> <a id="2820" class="Symbol">{</a><a id="2821" href="Bisimulation.Completeness.html#2096" class="Function">di</a><a id="2823" class="Symbol">}</a> <a id="2825" class="Symbol">{</a><a id="2826" class="Bound">s</a><a id="2827" class="Symbol">}</a> <a id="2829" class="Symbol">{</a><a id="2830" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a><a id="2833" class="Symbol">}</a> <a id="2835" href="Bisimulation.Completeness.html#2794" class="Bound">eq</a>
    <a id="2842" class="Symbol">...</a> <a id="2846" class="Symbol">|</a> <a id="2848" href="Bisimulation.Completeness.html#2848" class="Bound">i</a> <a id="2850" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2852" href="Bisimulation.Completeness.html#2852" class="Bound">s′</a> <a id="2855" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2857" href="Bisimulation.Completeness.html#2857" class="Bound">tx≡</a> <a id="2861" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2863" href="Bisimulation.Completeness.html#2863" class="Bound">step≡</a> <a id="2869" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2871" href="Bisimulation.Completeness.html#2871" class="Bound">outsOK≡</a> <a id="2879" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2881" href="Bisimulation.Completeness.html#2881" class="Bound">verify≡</a> <a id="2889" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2891" href="Bisimulation.Completeness.html#2891" class="Bound">prop≡</a>
        <a id="2905" class="Symbol">=</a> <a id="2907" href="Bisimulation.Completeness.html#2848" class="Bound">i</a> <a id="2909" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2911" href="Bisimulation.Completeness.html#2852" class="Bound">s′</a> <a id="2914" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2916" href="Bisimulation.Completeness.html#2857" class="Bound">tx≡</a> <a id="2920" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2922" href="Bisimulation.Completeness.html#2863" class="Bound">step≡</a> <a id="2928" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2930" href="Bisimulation.Completeness.html#2967" class="Function">vl′~s′</a> <a id="2937" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="2939" href="Bisimulation.Completeness.html#2881" class="Bound">verify≡</a>
      <a id="2953" class="Keyword">where</a>
        <a id="2967" href="Bisimulation.Completeness.html#2967" class="Function">vl′~s′</a> <a id="2974" class="Symbol">:</a> <a id="2976" class="Bound">vl′</a> <a id="2980" href="Bisimulation.Base.html#804" class="Function Operator">~</a> <a id="2982" href="Bisimulation.Completeness.html#2852" class="Bound">s′</a>
        <a id="2993" href="Bisimulation.Completeness.html#2967" class="Function">vl′~s′</a>
          <a id="3010" class="Keyword">with</a> <a id="3015" href="StateMachine.Properties.html#558" class="Function">T-propagates</a> <a id="3028" class="Symbol">{</a><a id="3029" href="Bisimulation.Completeness.html#2028" class="Function">ptx</a><a id="3032" class="Symbol">}</a> <a id="3034" href="Bisimulation.Completeness.html#2891" class="Bound">prop≡</a>
        <a id="3048" class="Symbol">...</a> <a id="3052" class="Symbol">|</a> <a id="3054" href="Bisimulation.Completeness.html#3054" class="Bound">vin≥</a> <a id="3059" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3061" href="Bisimulation.Completeness.html#3061" class="Bound">vout≥</a>
          <a id="3077" class="Keyword">with</a> <a id="3082" href="StateMachine.Properties.html#852" class="Function">T-outputsOK</a> <a id="3094" class="Symbol">{</a><a id="3095" class="Bound">l</a><a id="3096" class="Symbol">}</a> <a id="3098" class="Symbol">{</a><a id="3099" class="Bound">tx</a><a id="3101" class="Symbol">}</a> <a id="3103" class="Symbol">{</a><a id="3104" href="Bisimulation.Completeness.html#2096" class="Function">di</a><a id="3106" class="Symbol">}</a> <a id="3108" class="Symbol">{</a><a id="3109" href="Bisimulation.Completeness.html#2120" class="Function">ds</a><a id="3111" class="Symbol">}</a> <a id="3113" class="Symbol">{</a><a id="3114" href="Bisimulation.Completeness.html#2852" class="Bound">s′</a><a id="3116" class="Symbol">}</a> <a id="3118" class="Symbol">{</a><a id="3119" href="Bisimulation.Completeness.html#1900" class="Bound">txIn</a><a id="3123" class="Symbol">}</a> <a id="3125" class="Symbol">{</a><a id="3126" href="Bisimulation.Completeness.html#1907" class="Bound">txIn∈</a><a id="3131" class="Symbol">}</a> <a id="3133" href="Bisimulation.Completeness.html#2871" class="Bound">outsOK≡</a>
        <a id="3149" class="Symbol">...</a> <a id="3153" class="Symbol">|</a> <a id="3155" href="Bisimulation.Completeness.html#3155" class="Bound">o</a> <a id="3157" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3159" href="Bisimulation.Completeness.html#3159" class="Bound">o∈</a> <a id="3162" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3164" href="Bisimulation.Completeness.html#3164" class="Bound">out≡</a> <a id="3169" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3171" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3176" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3178" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a> <a id="3183" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3185" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
          <a id="3200" class="Keyword">with</a> <a id="3205" href="Prelude.General.html#3796" class="Function">mapWith∈⁺</a> <a id="3215" class="Symbol">{</a><a id="3216" class="Argument">x</a> <a id="3218" class="Symbol">=</a> <a id="3220" href="Bisimulation.Completeness.html#3155" class="Bound">o</a><a id="3221" class="Symbol">}</a> <a id="3223" class="Symbol">{</a><a id="3224" class="Argument">xs</a> <a id="3227" class="Symbol">=</a> <a id="3229" href="UTxO.Types.html#7520" class="Field">outputs</a> <a id="3237" class="Bound">tx</a><a id="3239" class="Symbol">}</a>
                         <a id="3266" class="Symbol">{</a><a id="3267" class="Argument">f</a> <a id="3269" class="Symbol">=</a> <a id="3271" class="Symbol">λ</a> <a id="3273" class="Symbol">{</a><a id="3274" href="Bisimulation.Completeness.html#3274" class="Bound">out</a><a id="3277" class="Symbol">}</a> <a id="3279" href="Bisimulation.Completeness.html#3279" class="Bound">out∈</a> <a id="3284" class="Symbol">→</a> <a id="3286" class="Keyword">record</a> <a id="3293" class="Symbol">{</a> <a id="3295" href="UTxO.TxUtilities.html#471" class="Field">outRef</a>   <a id="3304" class="Symbol">=</a> <a id="3306" class="Symbol">(</a><a id="3307" class="Bound">tx</a> <a id="3310" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="3313" class="Symbol">)</a> <a id="3315" href="UTxO.Types.html#4064" class="InductiveConstructor Operator">indexed-at</a> <a id="3326" href="Prelude.ToN.html#106" class="Field">toℕ</a> <a id="3330" class="Symbol">(</a><a id="3331" href="Data.List.Relation.Unary.Any.html#1909" class="Function">L.Any.index</a> <a id="3343" href="Bisimulation.Completeness.html#3279" class="Bound">out∈</a><a id="3347" class="Symbol">)</a>
                                                    <a id="3401" class="Symbol">;</a> <a id="3403" href="UTxO.TxUtilities.html#498" class="Field">out</a>      <a id="3412" class="Symbol">=</a> <a id="3414" href="Bisimulation.Completeness.html#3274" class="Bound">out</a>
                                                    <a id="3470" class="Symbol">;</a> <a id="3472" href="UTxO.TxUtilities.html#522" class="Field">prevTx</a>   <a id="3481" class="Symbol">=</a> <a id="3483" class="Bound">tx</a> <a id="3486" class="Symbol">}}</a> <a id="3489" href="Bisimulation.Completeness.html#3159" class="Bound">o∈</a>
        <a id="3500" class="Symbol">...</a> <a id="3504" class="Symbol">|</a> <a id="3506" href="Bisimulation.Completeness.html#3506" class="Bound">u</a> <a id="3508" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3510" href="Bisimulation.Completeness.html#3510" class="Bound">u∈</a> <a id="3513" href="Agda.Builtin.Sigma.html#236" class="InductiveConstructor Operator">,</a> <a id="3515" href="Agda.Builtin.Equality.html#208" class="InductiveConstructor">refl</a>
            <a id="3532" class="Symbol">=</a> <a id="3534" href="Data.List.Membership.Propositional.Properties.html#3315" class="Function">∈-map⁺</a> <a id="3541" class="Symbol">(</a><a id="3542" href="UTxO.Types.html#4750" class="Field">datumHash</a> <a id="3552" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3554" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="3557" class="Symbol">)</a> <a id="3559" class="Symbol">{</a><a id="3560" class="Argument">x</a> <a id="3562" class="Symbol">=</a> <a id="3564" href="Bisimulation.Completeness.html#3506" class="Bound">u</a><a id="3565" class="Symbol">}</a>
                <a id="3583" class="Symbol">(</a><a id="3584" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a> <a id="3594" class="Symbol">((</a><a id="3596" href="Prelude.DecEq.html#593" class="Field Operator">_≟</a> <a id="3599" href="Agda.Builtin.Bool.html#188" class="InductiveConstructor">true</a><a id="3603" class="Symbol">)</a> <a id="3605" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3607" class="Symbol">(</a><a id="3608" href="UTxO.Value.html#2174" class="Function Operator">_≥ᶜ</a> <a id="3612" href="StateMachine.Base.html#2955" class="Function">threadₛₘ</a><a id="3620" class="Symbol">)</a> <a id="3622" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3624" href="UTxO.Types.html#4728" class="Field">value</a> <a id="3630" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3632" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="3635" class="Symbol">)</a>
                  <a id="3655" class="Symbol">(</a><a id="3656" href="Data.List.Membership.Propositional.Properties.html#6325" class="Function">∈-filter⁺</a> <a id="3666" class="Symbol">((</a><a id="3668" href="StateMachine.Base.html#2370" class="Function">𝕍</a> <a id="3670" href="Prelude.DecEq.html#593" class="Field Operator">≟_</a><a id="3672" class="Symbol">)</a> <a id="3674" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3676" href="UTxO.Types.html#4669" class="Field">address</a> <a id="3684" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3686" href="UTxO.TxUtilities.html#498" class="Field">out</a><a id="3689" class="Symbol">)</a> <a id="3691" class="Symbol">{</a><a id="3692" class="Argument">x</a> <a id="3694" class="Symbol">=</a> <a id="3696" href="Bisimulation.Completeness.html#3506" class="Bound">u</a><a id="3697" class="Symbol">}</a> <a id="3699" class="Symbol">{</a><a id="3700" class="Argument">xs</a> <a id="3703" class="Symbol">=</a> <a id="3705" href="UTxO.TxUtilities.html#736" class="Function">utxo</a> <a id="3710" class="Symbol">(</a><a id="3711" class="Bound">tx</a> <a id="3714" href="Agda.Builtin.List.html#200" class="InductiveConstructor Operator">∷</a> <a id="3716" class="Bound">l</a><a id="3717" class="Symbol">)}</a>
                    <a id="3740" class="Symbol">(</a><a id="3741" href="Data.List.Membership.Propositional.Properties.html#3992" class="Function">∈-++⁺ʳ</a> <a id="3748" class="Symbol">(</a><a id="3749" href="Data.List.Base.html#7436" class="Function">filter</a> <a id="3756" class="Symbol">((</a><a id="3758" href="Prelude.DecEq.html#2182" class="Function Operator">_∉?</a> <a id="3762" href="UTxO.Types.html#7844" class="Function">outputRefs</a> <a id="3773" class="Bound">tx</a><a id="3775" class="Symbol">)</a> <a id="3777" href="Function.Base.html#992" class="Function Operator">∘</a> <a id="3779" href="UTxO.TxUtilities.html#471" class="Field">outRef</a><a id="3785" class="Symbol">)</a> <a id="3787" class="Symbol">(</a><a id="3788" href="UTxO.TxUtilities.html#736" class="Function">utxo</a> <a id="3793" class="Bound">l</a><a id="3794" class="Symbol">))</a> <a id="3797" href="Bisimulation.Completeness.html#3510" class="Bound">u∈</a><a id="3799" class="Symbol">)</a>
                    <a id="3821" class="Symbol">(</a><a id="3822" href="Agda.Builtin.Sigma.html#252" class="Field">proj₁</a> <a id="3828" href="Bisimulation.Completeness.html#2140" class="Function">vvh</a><a id="3831" class="Symbol">))</a>
                  <a id="3852" class="Bound">vout≥</a><a id="3857" class="Symbol">)</a>
</pre></body></html>