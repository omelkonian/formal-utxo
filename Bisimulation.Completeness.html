<!DOCTYPE HTML>
<html><head><meta charset="utf-8"><title>Bisimulation.Completeness</title><link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/github-fork-ribbon-css/0.2.3/gh-fork-ribbon.min.css'/><style>.github-fork-ribbon:before { background-color: #333; }</style><link rel="stylesheet" href="css/Agda.css"></head><body><a class='github-fork-ribbon'href='https://github.com/omelkonian/formal-utxo/tree/master/Bisimulation/Completeness.agda'data-ribbon='Source code on Github' title='Source code on Github'>Source code on Github</a><pre class="Agda"><a id="1" class="Keyword">open</a> <a id="6" class="Keyword">import</a> <a id="13" href="Data.List.Membership.Propositional.Properties.html" class="Module">Data.List.Membership.Propositional.Properties</a>
  <a id="61" class="Keyword">using</a> <a id="67" class="Symbol">(</a><a id="68" href="Data.List.Membership.Propositional.Properties.Core.html#1448" class="Function">find∘map</a><a id="76" class="Symbol">;</a> <a id="78" href="Data.List.Membership.Propositional.Properties.html#3491" class="Function">∈-map⁻</a><a id="84" class="Symbol">;</a> <a id="86" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a><a id="92" class="Symbol">;</a> <a id="94" href="Data.List.Membership.Propositional.Properties.html#8622" class="Function">∈-filter⁻</a><a id="103" class="Symbol">;</a> <a id="105" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a><a id="114" class="Symbol">;</a> <a id="116" href="Data.List.Membership.Propositional.Properties.html#4143" class="Function">∈-++⁻</a><a id="121" class="Symbol">;</a> <a id="123" href="Data.List.Membership.Propositional.Properties.html#4054" class="Function">∈-++⁺ʳ</a><a id="129" class="Symbol">;</a> <a id="131" href="Data.List.Membership.Propositional.Properties.html#3965" class="Function">∈-++⁺ˡ</a><a id="137" class="Symbol">)</a>

<a id="140" class="Keyword">open</a> <a id="145" class="Keyword">import</a> <a id="152" href="Prelude.Init.html" class="Module">Prelude.Init</a>
<a id="165" class="Keyword">open</a> <a id="170" class="Keyword">import</a> <a id="177" href="Prelude.General.html" class="Module">Prelude.General</a>
<a id="193" class="Keyword">open</a> <a id="198" class="Keyword">import</a> <a id="205" href="Prelude.Lists.html" class="Module">Prelude.Lists</a>
<a id="219" class="Keyword">open</a> <a id="224" class="Keyword">import</a> <a id="231" href="Prelude.Maybes.html" class="Module">Prelude.Maybes</a>
<a id="246" class="Keyword">open</a> <a id="251" class="Keyword">import</a> <a id="258" href="Prelude.DecEq.html" class="Module">Prelude.DecEq</a>
<a id="272" class="Keyword">open</a> <a id="277" class="Keyword">import</a> <a id="284" href="Prelude.Sets.html" class="Module">Prelude.Sets</a>
<a id="297" class="Keyword">open</a> <a id="302" class="Keyword">import</a> <a id="309" href="Prelude.Membership.html" class="Module">Prelude.Membership</a>
<a id="328" class="Keyword">open</a> <a id="333" class="Keyword">import</a> <a id="340" href="Prelude.ToN.html" class="Module">Prelude.ToN</a>
<a id="352" class="Keyword">open</a> <a id="357" class="Keyword">import</a> <a id="364" href="Prelude.Bifunctor.html" class="Module">Prelude.Bifunctor</a>
<a id="382" class="Keyword">open</a> <a id="387" class="Keyword">import</a> <a id="394" href="Prelude.Applicative.html" class="Module">Prelude.Applicative</a>

<a id="415" class="Keyword">open</a> <a id="420" class="Keyword">import</a> <a id="427" href="UTxO.Hashing.html" class="Module">UTxO.Hashing</a>
<a id="440" class="Keyword">open</a> <a id="445" class="Keyword">import</a> <a id="452" href="UTxO.Value.html" class="Module">UTxO.Value</a>
<a id="463" class="Keyword">open</a> <a id="468" class="Keyword">import</a> <a id="475" href="UTxO.Types.html" class="Module">UTxO.Types</a> <a id="486" class="Keyword">hiding</a> <a id="493" class="Symbol">(</a><a id="494" href="UTxO.Types.html#925" class="InductiveConstructor">I</a><a id="495" class="Symbol">)</a>
<a id="497" class="Keyword">open</a> <a id="502" class="Keyword">import</a> <a id="509" href="UTxO.Validity.html" class="Module">UTxO.Validity</a>
<a id="523" class="Keyword">open</a> <a id="528" class="Keyword">import</a> <a id="535" href="UTxO.TxUtilities.html" class="Module">UTxO.TxUtilities</a>
<a id="552" class="Keyword">open</a> <a id="557" class="Keyword">import</a> <a id="564" href="StateMachine.Base.html" class="Module">StateMachine.Base</a>

<a id="583" class="Keyword">open</a> <a id="588" href="UTxO.Types.html#4637" class="Module">InputInfo</a>
<a id="598" class="Keyword">open</a> <a id="603" href="UTxO.Types.html#5070" class="Module">TxInfo</a>

<a id="611" class="Keyword">module</a> <a id="618" href="Bisimulation.Completeness.html" class="Module">Bisimulation.Completeness</a>
  <a id="646" class="Symbol">{</a><a id="647" href="Bisimulation.Completeness.html#647" class="Bound">S</a> <a id="649" href="Bisimulation.Completeness.html#649" class="Bound">I</a> <a id="651" class="Symbol">:</a> <a id="653" href="Agda.Primitive.html#320" class="Primitive">Set</a><a id="656" class="Symbol">}</a> <a id="658" class="Symbol">{{</a><a id="660" href="Bisimulation.Completeness.html#660" class="Bound">_</a> <a id="662" class="Symbol">:</a> <a id="664" href="UTxO.Types.html#1155" class="Record">IsData</a> <a id="671" href="Bisimulation.Completeness.html#647" class="Bound">S</a><a id="672" class="Symbol">}}</a> <a id="675" class="Symbol">{{</a><a id="677" href="Bisimulation.Completeness.html#677" class="Bound">_</a> <a id="679" class="Symbol">:</a> <a id="681" href="UTxO.Types.html#1155" class="Record">IsData</a> <a id="688" href="Bisimulation.Completeness.html#649" class="Bound">I</a><a id="689" class="Symbol">}}</a> <a id="692" class="Symbol">{</a><a id="693" href="Bisimulation.Completeness.html#693" class="Bound">sm</a> <a id="696" class="Symbol">:</a> <a id="698" href="StateMachine.Base.html#1973" class="Record">StateMachine</a> <a id="711" href="Bisimulation.Completeness.html#647" class="Bound">S</a> <a id="713" href="Bisimulation.Completeness.html#649" class="Bound">I</a><a id="714" class="Symbol">}</a>
  <a id="718" class="Keyword">where</a>

<a id="725" class="Keyword">open</a> <a id="730" href="StateMachine.Base.html#2219" class="Module">CEM</a> <a id="734" class="Symbol">{</a><a id="735" class="Argument">sm</a> <a id="738" class="Symbol">=</a> <a id="740" href="Bisimulation.Completeness.html#693" class="Bound">sm</a><a id="742" class="Symbol">}</a>
<a id="744" class="Keyword">open</a> <a id="749" class="Keyword">import</a> <a id="756" href="StateMachine.Properties.html" class="Module">StateMachine.Properties</a> <a id="780" class="Symbol">{</a><a id="781" class="Argument">sm</a> <a id="784" class="Symbol">=</a> <a id="786" href="Bisimulation.Completeness.html#693" class="Bound">sm</a><a id="788" class="Symbol">}</a>
<a id="790" class="Keyword">open</a> <a id="795" class="Keyword">import</a> <a id="802" href="Bisimulation.Base.html" class="Module">Bisimulation.Base</a>       <a id="826" class="Symbol">{</a><a id="827" class="Argument">sm</a> <a id="830" class="Symbol">=</a> <a id="832" href="Bisimulation.Completeness.html#693" class="Bound">sm</a><a id="834" class="Symbol">}</a>

<a id="completeness"></a><a id="837" href="Bisimulation.Completeness.html#837" class="Function">completeness</a> <a id="850" class="Symbol">:</a> <a id="852" class="Symbol">∀</a> <a id="854" class="Symbol">{</a><a id="855" href="Bisimulation.Completeness.html#855" class="Bound">s</a> <a id="857" href="Bisimulation.Completeness.html#857" class="Bound">tx</a> <a id="860" href="Bisimulation.Completeness.html#860" class="Bound">l</a><a id="861" class="Symbol">}</a> <a id="863" class="Symbol">{</a><a id="864" href="Bisimulation.Completeness.html#864" class="Bound">vtx</a> <a id="868" class="Symbol">:</a> <a id="870" href="UTxO.Validity.html#1336" class="Record">IsValidTx</a> <a id="880" href="Bisimulation.Completeness.html#857" class="Bound">tx</a> <a id="883" href="Bisimulation.Completeness.html#860" class="Bound">l</a><a id="884" class="Symbol">}</a> <a id="886" class="Symbol">{</a><a id="887" href="Bisimulation.Completeness.html#887" class="Bound">vl</a> <a id="890" class="Symbol">:</a> <a id="892" href="UTxO.Validity.html#2261" class="Datatype">ValidLedger</a> <a id="904" href="Bisimulation.Completeness.html#860" class="Bound">l</a><a id="905" class="Symbol">}</a> <a id="907" class="Symbol">{</a><a id="908" href="Bisimulation.Completeness.html#908" class="Bound">vl′</a> <a id="912" class="Symbol">:</a> <a id="914" href="UTxO.Validity.html#2261" class="Datatype">ValidLedger</a> <a id="926" class="Symbol">(</a><a id="927" href="Bisimulation.Completeness.html#857" class="Bound">tx</a> <a id="930" class="InductiveConstructor Operator">∷</a> <a id="932" href="Bisimulation.Completeness.html#860" class="Bound">l</a><a id="933" class="Symbol">)}</a>
  <a id="938" class="Symbol">→</a> <a id="940" href="Bisimulation.Completeness.html#887" class="Bound">vl</a> <a id="943" href="Bisimulation.Base.html#695" class="Function Operator">—→[</a> <a id="947" href="Bisimulation.Completeness.html#857" class="Bound">tx</a> <a id="950" href="Bisimulation.Base.html#695" class="Function Operator">∶-</a> <a id="953" href="Bisimulation.Completeness.html#864" class="Bound">vtx</a> <a id="957" href="Bisimulation.Base.html#695" class="Function Operator">]</a> <a id="959" href="Bisimulation.Completeness.html#908" class="Bound">vl′</a>
  <a id="965" class="Symbol">→</a> <a id="967" href="Bisimulation.Completeness.html#887" class="Bound">vl</a> <a id="970" href="Bisimulation.Base.html#835" class="Function Operator">~</a> <a id="972" href="Bisimulation.Completeness.html#855" class="Bound">s</a>
    <a id="978" class="Comment">--------------------------------------</a>
  <a id="1019" class="Symbol">→</a> <a id="1021" class="Symbol">(</a><a id="1022" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1025" href="Bisimulation.Completeness.html#1025" class="Bound">i</a> <a id="1027" href="Data.Product.html#1815" class="Function">]</a> <a id="1029" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1032" href="Bisimulation.Completeness.html#1032" class="Bound">s′</a> <a id="1035" href="Data.Product.html#1815" class="Function">]</a> <a id="1037" href="Data.Product.html#1815" class="Function">∃[</a> <a id="1040" href="Bisimulation.Completeness.html#1040" class="Bound">tx≡</a> <a id="1044" href="Data.Product.html#1815" class="Function">]</a>
      <a id="1052" class="Symbol">(</a> <a id="1054" href="Bisimulation.Completeness.html#855" class="Bound">s</a> <a id="1056" href="Bisimulation.Base.html#578" class="Function Operator">—→[</a> <a id="1060" href="Bisimulation.Completeness.html#1025" class="Bound">i</a> <a id="1062" href="Bisimulation.Base.html#578" class="Function Operator">]</a> <a id="1064" class="Symbol">(</a><a id="1065" href="Bisimulation.Completeness.html#1032" class="Bound">s′</a> <a id="1068" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1070" href="Bisimulation.Completeness.html#1040" class="Bound">tx≡</a><a id="1073" class="Symbol">)</a>
      <a id="1081" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1083" class="Symbol">(</a><a id="1084" href="Bisimulation.Completeness.html#908" class="Bound">vl′</a> <a id="1088" href="Bisimulation.Base.html#835" class="Function Operator">~</a> <a id="1090" href="Bisimulation.Completeness.html#1032" class="Bound">s′</a><a id="1092" class="Symbol">)</a>
      <a id="1100" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="1102" class="Symbol">(</a><a id="1103" href="StateMachine.Base.html#1796" class="Function">verifyTx</a> <a id="1112" href="Bisimulation.Completeness.html#860" class="Bound">l</a> <a id="1114" href="Bisimulation.Completeness.html#857" class="Bound">tx</a> <a id="1117" href="Bisimulation.Completeness.html#1040" class="Bound">tx≡</a> <a id="1121" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="1123" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1127" class="Symbol">)))</a>
  <a id="1133" href="Data.Sum.Base.html#743" class="Datatype Operator">⊎</a> <a id="1135" class="Symbol">(</a><a id="1136" href="Bisimulation.Completeness.html#908" class="Bound">vl′</a> <a id="1140" href="Bisimulation.Base.html#835" class="Function Operator">~</a> <a id="1142" href="Bisimulation.Completeness.html#855" class="Bound">s</a><a id="1143" class="Symbol">)</a>
<a id="1145" href="Bisimulation.Completeness.html#837" class="Function">completeness</a> <a id="1158" class="Symbol">{</a><a id="1159" href="Bisimulation.Completeness.html#1159" class="Bound">s</a><a id="1160" class="Symbol">}</a> <a id="1162" class="Symbol">{</a><a id="1163" href="Bisimulation.Completeness.html#1163" class="Bound">tx</a><a id="1165" class="Symbol">}</a> <a id="1167" class="Symbol">{</a><a id="1168" href="Bisimulation.Completeness.html#1168" class="Bound">l</a><a id="1169" class="Symbol">}</a> <a id="1171" class="Symbol">{</a><a id="1172" href="Bisimulation.Completeness.html#1172" class="Bound">vtx</a><a id="1175" class="Symbol">}</a> <a id="1177" class="Symbol">{</a><a id="1178" href="Bisimulation.Completeness.html#1178" class="Bound">vl</a><a id="1180" class="Symbol">}</a> <a id="1182" class="Symbol">{</a><a id="1183" href="Bisimulation.Completeness.html#1183" class="Bound">vl′</a><a id="1186" class="Symbol">}</a> <a id="1188" href="Bisimulation.Completeness.html#1188" class="Bound">vl→vl′</a> <a id="1195" href="Bisimulation.Completeness.html#1195" class="Bound">vl~s</a>
  <a id="1202" class="Keyword">with</a> <a id="1207" href="Bisimulation.Base.html#1370" class="Function">view-~</a> <a id="1214" class="Symbol">{</a><a id="1215" href="Bisimulation.Completeness.html#1168" class="Bound">l</a><a id="1216" class="Symbol">}</a> <a id="1218" class="Symbol">{</a><a id="1219" href="Bisimulation.Completeness.html#1159" class="Bound">s</a><a id="1220" class="Symbol">}</a> <a id="1222" class="Symbol">{</a><a id="1223" href="Bisimulation.Completeness.html#1178" class="Bound">vl</a><a id="1225" class="Symbol">}</a> <a id="1227" href="Bisimulation.Completeness.html#1195" class="Bound">vl~s</a>
<a id="1232" class="Symbol">...</a> <a id="1236" class="Symbol">|</a> <a id="1238" href="Bisimulation.Completeness.html#1238" class="Bound">prevTx</a> <a id="1245" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1247" href="Bisimulation.Completeness.html#1247" class="Bound">v</a> <a id="1249" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1251" href="Bisimulation.Completeness.html#1251" class="Bound">prevOut∈</a> <a id="1260" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1262" href="Bisimulation.Completeness.html#1262" class="Bound">u∈</a> <a id="1265" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1267" class="Symbol">_</a> <a id="1269" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1271" href="Bisimulation.Completeness.html#1271" class="Bound">prev∈utxo</a> <a id="1281" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1283" href="Bisimulation.Completeness.html#1283" class="Bound">getSpent≡</a> <a id="1293" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1295" href="Bisimulation.Completeness.html#1295" class="Bound">threadToken≡</a>
  <a id="1310" class="Keyword">with</a> <a id="1315" class="Symbol">(</a><a id="1316" href="Bisimulation.Completeness.html#1238" class="Bound">prevTx</a> <a id="1323" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="1326" class="Symbol">)</a> <a id="1328" href="UTxO.Types.html#4242" class="InductiveConstructor Operator">indexed-at</a> <a id="1339" class="Symbol">(</a><a id="1340" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="1344" class="Symbol">(</a><a id="1345" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="1357" href="Bisimulation.Completeness.html#1251" class="Bound">prevOut∈</a><a id="1365" class="Symbol">))</a> <a id="1368" href="Prelude.Membership.html#455" class="Field Operator">∈?</a> <a id="1371" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="1382" class="Bound">tx</a>
<a id="1385" class="Symbol">...</a> <a id="1389" class="Symbol">|</a> <a id="1391" href="Relation.Nullary.html#1694" class="InductiveConstructor">no</a> <a id="1394" href="Bisimulation.Completeness.html#1394" class="Bound">prev∉</a>
    <a id="1404" class="Symbol">=</a> <a id="1406" href="Data.Sum.Base.html#818" class="InductiveConstructor">inj₂</a> <a id="1411" class="Symbol">(</a><a id="1412" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a> <a id="1419" class="Symbol">(</a><a id="1420" href="UTxO.Types.html#4928" class="Field">datumHash</a> <a id="1430" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1432" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="1435" class="Symbol">)</a>
             <a id="1450" class="Symbol">(</a><a id="1451" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a> <a id="1461" class="Symbol">((</a><a id="1463" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="1466" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="1470" class="Symbol">)</a> <a id="1472" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1474" class="Symbol">(</a><a id="1475" href="UTxO.Value.html#2341" class="Function Operator">_≥ᶜ</a> <a id="1479" href="StateMachine.Base.html#3185" class="Function">threadₛₘ</a><a id="1487" class="Symbol">)</a> <a id="1489" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1491" href="UTxO.Types.html#4906" class="Field">value</a> <a id="1497" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1499" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="1502" class="Symbol">)</a>
               <a id="1519" class="Symbol">(</a><a id="1520" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a> <a id="1530" class="Symbol">((</a><a id="1532" href="StateMachine.Base.html#3741" class="Function">𝕍</a> <a id="1534" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟_</a><a id="1536" class="Symbol">)</a> <a id="1538" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1540" href="UTxO.Types.html#4847" class="Field">address</a> <a id="1548" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1550" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="1553" class="Symbol">)</a>
                 <a id="1572" class="Symbol">(</a><a id="1573" href="Data.List.Membership.Propositional.Properties.html#3965" class="Function">∈-++⁺ˡ</a> <a id="1580" class="Symbol">(</a><a id="1581" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a> <a id="1591" class="Symbol">((</a><a id="1593" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="1597" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="1608" class="Bound">tx</a><a id="1610" class="Symbol">)</a> <a id="1612" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="1614" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="1620" class="Symbol">)</a> <a id="1622" class="Symbol">{</a><a id="1623" class="Argument">x</a> <a id="1625" class="Symbol">=</a> <a id="1627" href="Bisimulation.Completeness.html#1800" class="Function">u</a><a id="1628" class="Symbol">}</a> <a id="1630" class="Symbol">{</a><a id="1631" class="Argument">xs</a> <a id="1634" class="Symbol">=</a> <a id="1636" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="1641" class="Bound">l</a><a id="1642" class="Symbol">}</a>
                   <a id="1663" class="Bound">u∈</a> <a id="1666" href="Bisimulation.Completeness.html#1394" class="Bound">prev∉</a><a id="1671" class="Symbol">))</a> <a id="1674" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a><a id="1678" class="Symbol">)</a>
               <a id="1695" class="Bound">threadToken≡</a><a id="1707" class="Symbol">))</a>
      <a id="1716" class="Keyword">where</a> <a id="1722" href="Bisimulation.Completeness.html#1722" class="Function">o</a>    <a id="1727" class="Symbol">=</a> <a id="1729" class="Keyword">record</a> <a id="1736" class="Symbol">{</a> <a id="1738" href="UTxO.Types.html#4847" class="Field">address</a> <a id="1746" class="Symbol">=</a> <a id="1748" href="StateMachine.Base.html#3741" class="Function">𝕍</a><a id="1749" class="Symbol">;</a> <a id="1751" href="UTxO.Types.html#4928" class="Field">datumHash</a> <a id="1761" class="Symbol">=</a> <a id="1763" href="UTxO.Types.html#1196" class="Field">toData</a> <a id="1770" class="Bound">s</a> <a id="1772" href="UTxO.Hashing.Types.html#593" class="Function Operator">♯ᵈ</a><a id="1774" class="Symbol">;</a> <a id="1776" href="UTxO.Types.html#4906" class="Field">value</a> <a id="1782" class="Symbol">=</a> <a id="1784" class="Bound">v</a> <a id="1786" class="Symbol">}</a>
            <a id="1800" href="Bisimulation.Completeness.html#1800" class="Function">u</a>    <a id="1805" class="Symbol">=</a> <a id="1807" class="Keyword">record</a> <a id="1814" class="Symbol">{</a> <a id="1816" href="UTxO.TxUtilities.html#623" class="Field">prevTx</a> <a id="1823" class="Symbol">=</a> <a id="1825" class="Bound">prevTx</a><a id="1831" class="Symbol">;</a> <a id="1833" href="UTxO.TxUtilities.html#599" class="Field">out</a> <a id="1837" class="Symbol">=</a> <a id="1839" href="Bisimulation.Completeness.html#1722" class="Function">o</a><a id="1840" class="Symbol">;</a> <a id="1842" href="UTxO.TxUtilities.html#572" class="Field">outRef</a> <a id="1849" class="Symbol">=</a> <a id="1851" class="Symbol">(</a><a id="1852" class="Bound">prevTx</a> <a id="1859" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="1862" class="Symbol">)</a> <a id="1864" href="UTxO.Types.html#4242" class="InductiveConstructor Operator">indexed-at</a> <a id="1875" class="Symbol">(</a><a id="1876" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="1880" class="Symbol">(</a><a id="1881" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="1893" class="Bound">prevOut∈</a><a id="1901" class="Symbol">))</a> <a id="1904" class="Symbol">}</a>
<a id="1906" class="Symbol">...</a> <a id="1910" class="Symbol">|</a> <a id="1912" href="Relation.Nullary.html#1657" class="InductiveConstructor">yes</a> <a id="1916" href="Bisimulation.Completeness.html#1916" class="Bound">prev∈</a>
  <a id="1924" class="Keyword">with</a> <a id="1929" href="Data.List.Membership.Propositional.Properties.html#3491" class="Function">∈-map⁻</a> <a id="1936" href="UTxO.Types.html#7448" class="Field">outputRef</a> <a id="1946" href="Bisimulation.Completeness.html#1916" class="Bound">prev∈</a>
<a id="1952" class="Symbol">...</a> <a id="1956" class="Symbol">|</a> <a id="1958" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a> <a id="1963" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1965" href="Bisimulation.Completeness.html#1965" class="Bound">txIn∈</a> <a id="1971" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="1973" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
    <a id="1982" class="Symbol">=</a> <a id="1984" href="Data.Sum.Base.html#793" class="InductiveConstructor">inj₁</a> <a id="1989" class="Symbol">(</a><a id="1990" href="Bisimulation.Completeness.html#2617" class="Function">STEP</a> <a id="1995" class="Symbol">(</a><a id="1996" href="Bisimulation.Completeness.html#2355" class="Function">validate≡</a> <a id="2006" class="Symbol">{</a><a id="2007" class="Argument">ptx</a> <a id="2011" class="Symbol">=</a> <a id="2013" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a><a id="2016" class="Symbol">}</a> <a id="2018" class="Symbol">(</a><a id="2019" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="2032" class="Symbol">(</a><a id="2033" href="UTxO.Validity.html#1730" class="Field">allInputsValidate</a> <a id="2051" class="Bound">vtx</a><a id="2054" class="Symbol">)</a> <a id="2056" class="Symbol">(</a><a id="2057" href="Prelude.Lists.Indexed.html#8732" class="Function">x∈→ix∈</a> <a id="2064" href="Bisimulation.Completeness.html#1965" class="Bound">txIn∈</a><a id="2069" class="Symbol">))))</a>
  <a id="2076" class="Keyword">where</a>
    <a id="2086" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a> <a id="2090" class="Symbol">=</a> <a id="2092" href="UTxO.TxUtilities.html#6140" class="Function">toPendingTx</a> <a id="2104" class="Bound">l</a> <a id="2106" class="Bound">tx</a> <a id="2109" class="Symbol">(</a><a id="2110" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="2122" href="Bisimulation.Completeness.html#1965" class="Bound">txIn∈</a><a id="2127" class="Symbol">)</a>
    <a id="2133" href="Bisimulation.Completeness.html#2133" class="Function">txi</a> <a id="2137" class="Symbol">=</a> <a id="2139" href="UTxO.Types.html#5368" class="Field">txInfo</a> <a id="2146" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a>
    <a id="2154" href="Bisimulation.Completeness.html#2154" class="Function">di</a>  <a id="2158" class="Symbol">=</a> <a id="2160" href="UTxO.Types.html#7502" class="Field">redeemer</a> <a id="2169" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a>
    <a id="2178" href="Bisimulation.Completeness.html#2178" class="Function">ds</a>  <a id="2182" class="Symbol">=</a> <a id="2184" href="UTxO.Types.html#1196" class="Field">toData</a> <a id="2191" class="Bound">s</a>

    <a id="2198" href="Bisimulation.Completeness.html#2198" class="Function">vvh</a> <a id="2202" class="Symbol">:</a> <a id="2204" class="Symbol">(</a><a id="2205" href="StateMachine.Base.html#3741" class="Function">𝕍</a> <a id="2207" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2209" href="UTxO.Types.html#7476" class="Field">validator</a> <a id="2219" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a> <a id="2224" href="UTxO.Hashing.Base.html#1199" class="Postulate Operator">♯</a><a id="2225" class="Symbol">)</a> <a id="2227" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2229" class="Symbol">(</a><a id="2230" href="Bisimulation.Completeness.html#2178" class="Function">ds</a> <a id="2233" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2235" href="UTxO.Types.html#7523" class="Field">datum</a> <a id="2241" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a><a id="2245" class="Symbol">)</a>
    <a id="2251" href="Bisimulation.Completeness.html#2198" class="Function">vvh</a> <a id="2255" class="Symbol">=</a> <a id="2257" href="Prelude.Bifunctor.html#1037" class="Function">map₂</a> <a id="2262" href="UTxO.Hashing.Types.html#1643" class="Postulate">injective♯ᵈ</a>
        <a id="2282" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="2284" href="Prelude.Maybes.html#1233" class="Function">Any-just</a> <a id="2293" class="Bound">getSpent≡</a> <a id="2303" class="Symbol">(</a><a id="2304" href="Data.List.Relation.Unary.All.html#5775" class="Function">L.All.lookup</a> <a id="2317" class="Symbol">(</a><a id="2318" href="UTxO.Validity.html#1977" class="Field">validateValidHashes</a> <a id="2338" class="Bound">vtx</a><a id="2341" class="Symbol">)</a> <a id="2343" href="Bisimulation.Completeness.html#1965" class="Bound">txIn∈</a><a id="2348" class="Symbol">)</a>

    <a id="2355" href="Bisimulation.Completeness.html#2355" class="Function">validate≡</a> <a id="2365" class="Symbol">:</a> <a id="2367" class="Symbol">∀</a> <a id="2369" class="Symbol">{</a><a id="2370" href="Bisimulation.Completeness.html#2370" class="Bound">ptx</a> <a id="2374" class="Symbol">:</a> <a id="2376" href="UTxO.Types.html#5428" class="Function">PendingTx</a><a id="2385" class="Symbol">}</a>
       <a id="2394" class="Symbol">→</a> <a id="2396" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="2398" class="Symbol">(</a><a id="2399" href="UTxO.Types.html#7919" class="Function">runValidation</a> <a id="2413" href="Bisimulation.Completeness.html#2370" class="Bound">ptx</a> <a id="2417" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a><a id="2421" class="Symbol">)</a>
       <a id="2430" class="Symbol">→</a> <a id="2432" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="2434" class="Symbol">(</a><a id="2435" href="StateMachine.Base.html#3240" class="Function">validatorₛₘ</a> <a id="2447" href="Bisimulation.Completeness.html#2370" class="Bound">ptx</a> <a id="2451" href="Bisimulation.Completeness.html#2154" class="Function">di</a> <a id="2454" href="Bisimulation.Completeness.html#2178" class="Function">ds</a><a id="2456" class="Symbol">)</a>
    <a id="2462" href="Bisimulation.Completeness.html#2355" class="Function">validate≡</a> <a id="2472" href="Bisimulation.Completeness.html#2472" class="Bound">p</a> <a id="2474" class="Keyword">rewrite</a> <a id="2482" class="Bound">getSpent≡</a>
                      <a id="2514" class="Symbol">|</a> <a id="2516" href="UTxO.Hashing.Base.html#1227" class="Postulate">♯-injective</a> <a id="2528" class="Symbol">(</a><a id="2529" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="2533" href="Function.Base.html#1928" class="Function Operator">$</a> <a id="2535" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="2541" href="Bisimulation.Completeness.html#2198" class="Function">vvh</a><a id="2544" class="Symbol">)</a>
                      <a id="2568" class="Symbol">|</a> <a id="2570" href="Relation.Binary.PropositionalEquality.Core.html#1693" class="Function">sym</a> <a id="2574" class="Symbol">(</a><a id="2575" href="Agda.Builtin.Sigma.html#246" class="Field">proj₂</a> <a id="2581" href="Bisimulation.Completeness.html#2198" class="Function">vvh</a><a id="2584" class="Symbol">)</a>
                      <a id="2608" class="Symbol">=</a> <a id="2610" href="Bisimulation.Completeness.html#2472" class="Bound">p</a>

    <a id="2617" href="Bisimulation.Completeness.html#2617" class="Function">STEP</a> <a id="2622" class="Symbol">:</a>
        <a id="2632" href="Data.Bool.Base.html#1460" class="Function">T</a> <a id="2634" class="Symbol">(</a><a id="2635" href="StateMachine.Base.html#3240" class="Function">validatorₛₘ</a> <a id="2647" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a> <a id="2651" href="Bisimulation.Completeness.html#2154" class="Function">di</a> <a id="2654" href="Bisimulation.Completeness.html#2178" class="Function">ds</a><a id="2656" class="Symbol">)</a>
         <a id="2667" class="Comment">------------------------------------</a>
      <a id="2710" class="Symbol">→</a> <a id="2712" href="Data.Product.html#1815" class="Function">∃[</a> <a id="2715" href="Bisimulation.Completeness.html#2715" class="Bound">i</a> <a id="2717" href="Data.Product.html#1815" class="Function">]</a> <a id="2719" href="Data.Product.html#1815" class="Function">∃[</a> <a id="2722" href="Bisimulation.Completeness.html#2722" class="Bound">s′</a> <a id="2725" href="Data.Product.html#1815" class="Function">]</a> <a id="2727" href="Data.Product.html#1815" class="Function">∃[</a> <a id="2730" href="Bisimulation.Completeness.html#2730" class="Bound">tx≡</a> <a id="2734" href="Data.Product.html#1815" class="Function">]</a>
          <a id="2746" class="Symbol">(</a> <a id="2748" class="Symbol">(</a><a id="2749" href="StateMachine.Base.html#2332" class="Function">stepₛₘ</a> <a id="2756" class="Bound">s</a> <a id="2758" href="Bisimulation.Completeness.html#2715" class="Bound">i</a> <a id="2760" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2762" href="Prelude.Applicative.html#568" class="Field">pure</a> <a id="2767" class="Symbol">(</a><a id="2768" href="Bisimulation.Completeness.html#2722" class="Bound">s′</a> <a id="2771" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2773" href="Bisimulation.Completeness.html#2730" class="Bound">tx≡</a><a id="2776" class="Symbol">))</a>
          <a id="2789" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2791" class="Symbol">(</a><a id="2792" class="Bound">vl′</a> <a id="2796" href="Bisimulation.Base.html#835" class="Function Operator">~</a> <a id="2798" href="Bisimulation.Completeness.html#2722" class="Bound">s′</a><a id="2800" class="Symbol">)</a>
          <a id="2812" href="Data.Product.html#1176" class="Function Operator">×</a> <a id="2814" class="Symbol">(</a><a id="2815" href="StateMachine.Base.html#1796" class="Function">verifyTx</a> <a id="2824" class="Bound">l</a> <a id="2826" class="Bound">tx</a> <a id="2829" href="Bisimulation.Completeness.html#2730" class="Bound">tx≡</a> <a id="2833" href="Agda.Builtin.Equality.html#133" class="Datatype Operator">≡</a> <a id="2835" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="2839" class="Symbol">)</a> <a id="2841" class="Symbol">)</a>
    <a id="2847" href="Bisimulation.Completeness.html#2617" class="Function">STEP</a> <a id="2852" href="Bisimulation.Completeness.html#2852" class="Bound">eq</a>
      <a id="2861" class="Keyword">with</a> <a id="2866" href="StateMachine.Properties.html#2010" class="Function">T-validator</a> <a id="2878" class="Symbol">{</a><a id="2879" href="Bisimulation.Completeness.html#2154" class="Function">di</a><a id="2881" class="Symbol">}</a> <a id="2883" class="Symbol">{</a><a id="2884" class="Bound">s</a><a id="2885" class="Symbol">}</a> <a id="2887" class="Symbol">{</a><a id="2888" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a><a id="2891" class="Symbol">}</a> <a id="2893" href="Bisimulation.Completeness.html#2852" class="Bound">eq</a>
    <a id="2900" class="Symbol">...</a> <a id="2904" class="Symbol">|</a> <a id="2906" href="Bisimulation.Completeness.html#2906" class="Bound">i</a> <a id="2908" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2910" href="Bisimulation.Completeness.html#2910" class="Bound">s′</a> <a id="2913" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2915" href="Bisimulation.Completeness.html#2915" class="Bound">tx≡</a> <a id="2919" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2921" href="Bisimulation.Completeness.html#2921" class="Bound">step≡</a> <a id="2927" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2929" href="Bisimulation.Completeness.html#2929" class="Bound">outsOK≡</a> <a id="2937" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2939" href="Bisimulation.Completeness.html#2939" class="Bound">verify≡</a> <a id="2947" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2949" href="Bisimulation.Completeness.html#2949" class="Bound">prop≡</a>
        <a id="2963" class="Symbol">=</a> <a id="2965" href="Bisimulation.Completeness.html#2906" class="Bound">i</a> <a id="2967" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2969" href="Bisimulation.Completeness.html#2910" class="Bound">s′</a> <a id="2972" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2974" href="Bisimulation.Completeness.html#2915" class="Bound">tx≡</a> <a id="2978" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2980" href="Bisimulation.Completeness.html#2921" class="Bound">step≡</a> <a id="2986" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2988" href="Bisimulation.Completeness.html#3025" class="Function">vl′~s′</a> <a id="2995" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="2997" href="Bisimulation.Completeness.html#2939" class="Bound">verify≡</a>
      <a id="3011" class="Keyword">where</a>
        <a id="3025" href="Bisimulation.Completeness.html#3025" class="Function">vl′~s′</a> <a id="3032" class="Symbol">:</a> <a id="3034" class="Bound">vl′</a> <a id="3038" href="Bisimulation.Base.html#835" class="Function Operator">~</a> <a id="3040" href="Bisimulation.Completeness.html#2910" class="Bound">s′</a>
        <a id="3051" href="Bisimulation.Completeness.html#3025" class="Function">vl′~s′</a>
          <a id="3068" class="Keyword">with</a> <a id="3073" href="StateMachine.Properties.html#717" class="Function">T-propagates</a> <a id="3086" class="Symbol">{</a><a id="3087" href="Bisimulation.Completeness.html#2086" class="Function">ptx</a><a id="3090" class="Symbol">}</a> <a id="3092" href="Bisimulation.Completeness.html#2949" class="Bound">prop≡</a>
        <a id="3106" href="Bisimulation.Completeness.html#3025" class="Function">...</a> <a id="3110" class="Symbol">|</a> <a id="3112" href="Bisimulation.Completeness.html#3112" class="Bound">vin≥</a> <a id="3117" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3119" href="Bisimulation.Completeness.html#3119" class="Bound">vout≥</a>
          <a id="3135" class="Keyword">with</a> <a id="3140" href="StateMachine.Properties.html#1011" class="Function">T-outputsOK</a> <a id="3152" class="Symbol">{</a><a id="3153" class="Bound">l</a><a id="3154" class="Symbol">}</a> <a id="3156" class="Symbol">{</a><a id="3157" class="Bound">tx</a><a id="3159" class="Symbol">}</a> <a id="3161" class="Symbol">{</a><a id="3162" href="Bisimulation.Completeness.html#2154" class="Function">di</a><a id="3164" class="Symbol">}</a> <a id="3166" class="Symbol">{</a><a id="3167" href="Bisimulation.Completeness.html#2178" class="Function">ds</a><a id="3169" class="Symbol">}</a> <a id="3171" class="Symbol">{</a><a id="3172" href="Bisimulation.Completeness.html#2910" class="Bound">s′</a><a id="3174" class="Symbol">}</a> <a id="3176" class="Symbol">{</a><a id="3177" href="Bisimulation.Completeness.html#1958" class="Bound">txIn</a><a id="3181" class="Symbol">}</a> <a id="3183" class="Symbol">{</a><a id="3184" href="Bisimulation.Completeness.html#1965" class="Bound">txIn∈</a><a id="3189" class="Symbol">}</a> <a id="3191" href="Bisimulation.Completeness.html#2929" class="Bound">outsOK≡</a>
        <a id="3207" class="Symbol">...</a> <a id="3211" class="Symbol">|</a> <a id="3213" href="Bisimulation.Completeness.html#3213" class="Bound">o</a> <a id="3215" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3217" href="Bisimulation.Completeness.html#3217" class="Bound">o∈</a> <a id="3220" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3222" href="Bisimulation.Completeness.html#3222" class="Bound">out≡</a> <a id="3227" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3229" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="3234" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3236" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a> <a id="3241" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3243" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
          <a id="3258" class="Keyword">with</a> <a id="3263" href="Prelude.General.html#5684" class="Function">mapWith∈⁺</a> <a id="3273" class="Symbol">{</a><a id="3274" class="Argument">x</a> <a id="3276" class="Symbol">=</a> <a id="3278" href="Bisimulation.Completeness.html#3213" class="Bound">o</a><a id="3279" class="Symbol">}</a> <a id="3281" class="Symbol">{</a><a id="3282" class="Argument">xs</a> <a id="3285" class="Symbol">=</a> <a id="3287" href="UTxO.Types.html#7700" class="Field">outputs</a> <a id="3295" class="Bound">tx</a><a id="3297" class="Symbol">}</a>
                         <a id="3324" class="Symbol">{</a><a id="3325" class="Argument">f</a> <a id="3327" class="Symbol">=</a> <a id="3329" class="Symbol">λ</a> <a id="3331" class="Symbol">{</a><a id="3332" href="Bisimulation.Completeness.html#3332" class="Bound">out</a><a id="3335" class="Symbol">}</a> <a id="3337" href="Bisimulation.Completeness.html#3337" class="Bound">out∈</a> <a id="3342" class="Symbol">→</a> <a id="3344" class="Keyword">record</a> <a id="3351" class="Symbol">{</a> <a id="3353" href="UTxO.TxUtilities.html#572" class="Field">outRef</a>   <a id="3362" class="Symbol">=</a> <a id="3364" class="Symbol">(</a><a id="3365" class="Bound">tx</a> <a id="3368" href="UTxO.Hashing.Types.html#1170" class="Function Operator">♯ₜₓ</a><a id="3371" class="Symbol">)</a> <a id="3373" href="UTxO.Types.html#4242" class="InductiveConstructor Operator">indexed-at</a> <a id="3384" href="Prelude.ToN.html#139" class="Field">toℕ</a> <a id="3388" class="Symbol">(</a><a id="3389" href="Data.List.Relation.Unary.Any.html#1826" class="Function">L.Any.index</a> <a id="3401" href="Bisimulation.Completeness.html#3337" class="Bound">out∈</a><a id="3405" class="Symbol">)</a>
                                                    <a id="3459" class="Symbol">;</a> <a id="3461" href="UTxO.TxUtilities.html#599" class="Field">out</a>      <a id="3470" class="Symbol">=</a> <a id="3472" href="Bisimulation.Completeness.html#3332" class="Bound">out</a>
                                                    <a id="3528" class="Symbol">;</a> <a id="3530" href="UTxO.TxUtilities.html#623" class="Field">prevTx</a>   <a id="3539" class="Symbol">=</a> <a id="3541" class="Bound">tx</a> <a id="3544" class="Symbol">}}</a> <a id="3547" href="Bisimulation.Completeness.html#3217" class="Bound">o∈</a>
        <a id="3558" class="Symbol">...</a> <a id="3562" class="Symbol">|</a> <a id="3564" href="Bisimulation.Completeness.html#3564" class="Bound">u</a> <a id="3566" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3568" href="Bisimulation.Completeness.html#3568" class="Bound">u∈</a> <a id="3571" href="Agda.Builtin.Sigma.html#218" class="InductiveConstructor Operator">,</a> <a id="3573" href="Agda.Builtin.Equality.html#190" class="InductiveConstructor">refl</a>
            <a id="3590" class="Symbol">=</a> <a id="3592" href="Data.List.Membership.Propositional.Properties.html#3377" class="Function">∈-map⁺</a> <a id="3599" class="Symbol">(</a><a id="3600" href="UTxO.Types.html#4928" class="Field">datumHash</a> <a id="3610" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3612" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="3615" class="Symbol">)</a> <a id="3617" class="Symbol">{</a><a id="3618" class="Argument">x</a> <a id="3620" class="Symbol">=</a> <a id="3622" href="Bisimulation.Completeness.html#3564" class="Bound">u</a><a id="3623" class="Symbol">}</a>
                <a id="3641" class="Symbol">(</a><a id="3642" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a> <a id="3652" class="Symbol">((</a><a id="3654" href="Prelude.DecEq.Core.html#190" class="Field Operator">_≟</a> <a id="3657" href="Agda.Builtin.Bool.html#181" class="InductiveConstructor">true</a><a id="3661" class="Symbol">)</a> <a id="3663" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3665" class="Symbol">(</a><a id="3666" href="UTxO.Value.html#2341" class="Function Operator">_≥ᶜ</a> <a id="3670" href="StateMachine.Base.html#3185" class="Function">threadₛₘ</a><a id="3678" class="Symbol">)</a> <a id="3680" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3682" href="UTxO.Types.html#4906" class="Field">value</a> <a id="3688" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3690" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="3693" class="Symbol">)</a>
                  <a id="3713" class="Symbol">(</a><a id="3714" href="Data.List.Membership.Propositional.Properties.html#8500" class="Function">∈-filter⁺</a> <a id="3724" class="Symbol">((</a><a id="3726" href="StateMachine.Base.html#3741" class="Function">𝕍</a> <a id="3728" href="Prelude.DecEq.Core.html#190" class="Field Operator">≟_</a><a id="3730" class="Symbol">)</a> <a id="3732" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3734" href="UTxO.Types.html#4847" class="Field">address</a> <a id="3742" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3744" href="UTxO.TxUtilities.html#599" class="Field">out</a><a id="3747" class="Symbol">)</a> <a id="3749" class="Symbol">{</a><a id="3750" class="Argument">x</a> <a id="3752" class="Symbol">=</a> <a id="3754" href="Bisimulation.Completeness.html#3564" class="Bound">u</a><a id="3755" class="Symbol">}</a> <a id="3757" class="Symbol">{</a><a id="3758" class="Argument">xs</a> <a id="3761" class="Symbol">=</a> <a id="3763" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="3768" class="Symbol">(</a><a id="3769" class="Bound">tx</a> <a id="3772" href="Agda.Builtin.List.html#182" class="InductiveConstructor Operator">∷</a> <a id="3774" class="Bound">l</a><a id="3775" class="Symbol">)}</a>
                    <a id="3798" class="Symbol">(</a><a id="3799" href="Data.List.Membership.Propositional.Properties.html#4054" class="Function">∈-++⁺ʳ</a> <a id="3806" class="Symbol">(</a><a id="3807" href="Data.List.Base.html#8101" class="Function">filter</a> <a id="3814" class="Symbol">((</a><a id="3816" href="Prelude.Membership.html#613" class="Function Operator">_∉?</a> <a id="3820" href="UTxO.Types.html#8024" class="Function">outputRefs</a> <a id="3831" class="Bound">tx</a><a id="3833" class="Symbol">)</a> <a id="3835" href="Function.Base.html#1040" class="Function Operator">∘</a> <a id="3837" href="UTxO.TxUtilities.html#572" class="Field">outRef</a><a id="3843" class="Symbol">)</a> <a id="3845" class="Symbol">(</a><a id="3846" href="UTxO.TxUtilities.html#837" class="Function">utxo</a> <a id="3851" class="Bound">l</a><a id="3852" class="Symbol">))</a> <a id="3855" href="Bisimulation.Completeness.html#3568" class="Bound">u∈</a><a id="3857" class="Symbol">)</a>
                    <a id="3879" class="Symbol">(</a><a id="3880" href="Agda.Builtin.Sigma.html#234" class="Field">proj₁</a> <a id="3886" href="Bisimulation.Completeness.html#2198" class="Function">vvh</a><a id="3889" class="Symbol">))</a>
                  <a id="3910" class="Bound">vout≥</a><a id="3915" class="Symbol">)</a>
</pre></body></html>